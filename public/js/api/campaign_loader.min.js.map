{"version":3,"sources":["campaign_loader.js","campaign_loader.min.js"],"names":["inputs","loader_debug","show_skip","_options","default_options","src","screen_view","submitBtn","submit","first_name","last_name","email","zip","birthdate","dobmonth","dobday","dobyear","gender","address","phone","phone1","phone2","phone3","ethnicity","source_url","image","affiliate_id","website_id","offer_id","campaign_id","s1","s2","s3","s4","s5","cs1","cs2","cs3","cs4","cs5","q2","redirect_url","appendTo","targetUrl","ifrWidth","ifrBorder","skipTimeout","submitBtntext","initiateResizerBeforeIframeContentLoad","loaderText","loaderTextColor","loaderWrapperBackgroundColor","loaderTop","loaderMarginTop","toReloadParentFrame","extend","$default","$input","property","hasOwnProperty","inner_property","loaderDebug","window","addEventListener","event","type","target","id","indexOf","iframe_wrapper","document","getElementById","substring","getElementsByClassName","getElementsByTagName","html","innerHTML","location","href","top","onload","detectMobile","createElement","getUserIp","processAndAppend","appendChild","queryString","arr","s","e","escape","appendIframe","$options","ifr_src","console","log","appendLoaderText","ifr","width","style","border","loader_text_wrapper","remove","iFrameResize","parent_skip","appendSkipLink","$redirect_url","$timeout","$iframe_wrapper","setTimeout","skip","cssText","text","createTextNode","appendLoadingRotatorStyle","css","styles","styleSheet","$option","loader_text","loader_image","borderTopColor","loader_inner_text_wrapper","color","backgroundColor","appendIframeResizer","initiateResizer","ifr_resizer","windowNavigator","nameOffset","verOffset","ix","browser","os","os_version","browser_version","user_agent","navigator","userAgent","device","isMobile","isTablet","isDesktop","nVer","appVersion","nAgt","browserName","appName","fullVersion","parseFloat","majorVersion","parseInt","lastIndexOf","toLowerCase","toUpperCase","isNaN","test","clientStrings","r","cs","osVersion","exec","md","MobileDetect","view","mobile","tablet","birthDate","$year","$month","$day","$gender","url","callback","callbackName","Math","round","random","data","body","removeChild","script","ip","onerror","windowData","is_mobile","is_tablet","is_desktop","replace","substr","target_url","reload_parent_frame","options"],"mappings":"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","file":"campaign_loader.min.js","sourcesContent":["/**!\r\n * NLR Campaign API Script\r\n * Campaign Loader v1 (http://leadreactor.engageiq.com)\r\n * All action, event related to appending the iframe for NLR offers.\r\n *\r\n * @param options - Host site given parameters\r\n * @uses iFrameResize - Correct the iframe dimmension in relation to inner content\r\n * @uses MobileDetect - Detect mobile view\r\n */\r\n\r\n(function(inputs)\r\n{\r\n    /**\r\n     * Debug loader\r\n     */\r\n    var loader_debug = false;\r\n\r\n    /**\r\n     * Flag to determine if needed to show skip link\r\n     */\r\n     var show_skip = true;\r\n\r\n    /**\r\n     * Global container for merge default_options and options\r\n     */\r\n    var _options = {};\r\n\r\n    /**\r\n     * The default value needed to get the list of campaigns\r\n     *\r\n     */\r\n    var default_options = {\r\n        // This will be used for iframe query string\r\n        // add website id\r\n        'src': {\r\n            'screen_view': '1',\r\n            'submitBtn': '',\r\n            'submit': '',\r\n            'first_name': '',\r\n            'last_name': '',\r\n            'email': '',\r\n            'zip': '',\r\n            'birthdate': '',\r\n            'dobmonth': '',\r\n            'dobday': '',\r\n            'dobyear': '',\r\n            'gender': '',\r\n            'address': '',\r\n            'phone': '',\r\n            'phone1': '',\r\n            'phone2': '',\r\n            'phone3': '',\r\n            'ethnicity': '',\r\n            'source_url': '',\r\n            'image': '',\r\n            'affiliate_id': '',\r\n            'website_id':'',\r\n            'offer_id': '',\r\n            'campaign_id': '',\r\n            's1': '',\r\n            's2': '',\r\n            's3': '',\r\n            's4': '',\r\n            's5': '',\r\n            'cs1': '',\r\n            'cs2': '',\r\n            'cs3': '',\r\n            'cs4': '',\r\n            'cs5': '',\r\n            'q2': '',\r\n            'redirect_url': ''\r\n        },\r\n        // Append the iframe to given value\r\n        'appendTo': 'body',\r\n        // The NLR url to send request\r\n        'targetUrl': 'http://leadreactor.engageiq.com/',\r\n        // Iframe attributes\r\n        'ifrWidth': '100%',\r\n        'ifrBorder': 'none',\r\n        // Time duration before showing the skip button, default 1 second\r\n        'skipTimeout': 6000,\r\n        // Button text\r\n        'submitBtntext': 'Submit',\r\n        // True: initialize resizer when the resizer script is ready\r\n        // False: initialize resizer when  the resizer script is ready and the iframe content is done\r\n        'initiateResizerBeforeIframeContentLoad': true,\r\n        // Loading message\r\n        'loaderText': 'Please wait while we fetch offers to match your profile.',\r\n        // Loading text attributes\r\n        'loaderTextColor': '#53A653',\r\n        'loaderWrapperBackgroundColor': '#fff',\r\n        'loaderTop': '175px',\r\n        'loaderMarginTop': '-175px',\r\n        'toReloadParentFrame': false\r\n    };\r\n\r\n    /**\r\n     * Function to overwrite default data with given inputs\r\n     *\r\n     * @param object $default\r\n     * @param object $input\r\n     * @return object\r\n     */\r\n    var extend = function($default, $input)\r\n    {\r\n        // Go through default object and iterate\r\n        // We used the default object for it has the complete parameters\r\n        for (var property in $default) {\r\n            // Check $input object if the property of defaut exists on its own\r\n            if ($input.hasOwnProperty(property)) {\r\n                // Detemine if the $input property is object\r\n                if(typeof($input[property]) === 'object') {\r\n                    // go through the $default property\r\n                    // We used the default object property for it has the complete parameters\r\n                    for (var inner_property in $default[property]) {\r\n                        // Check $input object if the property of defaut exists on its own\r\n                        if ($input[property].hasOwnProperty(inner_property)) {\r\n                            // Replace the default property value with $input property value\r\n                            $default[property][inner_property] = $input[property][inner_property];\r\n                        }\r\n                    }\r\n                }\r\n                // $input property is not object\r\n                else {\r\n                    // Replace the default property value with $input property value\r\n                    $default[property] = $input[property];\r\n                }\r\n            }\r\n        }\r\n\r\n        if($input.loaderDebug) loader_debug = $input.loaderDebug;\r\n\r\n        return $default;\r\n    };\r\n\r\n    /**\r\n     * Catch script error\r\n     *\r\n     */\r\n    window.addEventListener('error', function(event)\r\n    {\r\n\r\n        if (event.type === \"error\") {\r\n            if(event.target.id != 'mobile_detect') return;\r\n\r\n            if(inputs.appendTo.indexOf('#') !== -1) var iframe_wrapper = document.getElementById(inputs.appendTo.substring(1));\r\n            // Uses class attribute\r\n            else if(inputs.appendTo.indexOf('.') !== -1) var iframe_wrapper = document.getElementsByClassName(inputs.appendTo.substring(1))[0];\r\n            // Uses plain html tag or default html tag\r\n            else var iframe_wrapper = document.getElementsByTagName(inputs.appendTo)[0];\r\n\r\n            var html = '<span style=\"font-size: 20px; font-family: Verdana, Arial, Helvetica, sans-serif; color:' + default_options.loaderTextColor + '\">There is a problem loading the script from EIQ website. <br /> Please report to  EIQ about this error.</span>';\r\n            if(inputs.src.redirect_url) html += '<br /><br /><span id=\"skip_error\" style=\"font-size: 20px; font-family: Verdana, Arial, Helvetica, sans-serif; color:#2fa4e7; cursor: pointer\">Skip</span>';\r\n\r\n            iframe_wrapper.innerHTML= html;\r\n        }\r\n\r\n    }, true);\r\n\r\n    /**\r\n     * Catch skip click event\r\n     *\r\n     */\r\n    window.addEventListener('click', function(event) {\r\n        if (event.target.id === \"skip_error\") {\r\n            if(inputs.toReloadParentFrame !== 'false') {\r\n                window.location.href = inputs.src.redirect_url;\r\n            } else {\r\n                window.top.location.href = inputs.src.redirect_url;\r\n            }\r\n        }\r\n    });\r\n\r\n    /**\r\n     * initialization\r\n     * Load the mobile detect first and\r\n     * Run initialization when mobile detect script is ready\r\n     *\r\n     */\r\n    window.onload = function()\r\n    {\r\n       _options = extend(default_options, inputs);\r\n\r\n        // Add mobile detect script to header\r\n        var html = document.getElementsByTagName(\"html\")[0];\r\n        var detectMobile = document.createElement(\"script\");\r\n\r\n        detectMobile.type = 'text/javascript';\r\n        detectMobile.id = 'mobile_detect';\r\n        detectMobile.src =  _options.targetUrl + 'js/api/mobile_detect.min.js';\r\n\r\n        // Function after finish loading of script\r\n        html.addEventListener(\"load\", function(event) {\r\n            //if (event.target.id === \"mobile_detect\") getUserIp('http://ipinfo.io', processAndAppend);\r\n            if (event.target.id === \"mobile_detect\") getUserIp('http://postleads.engageiq.com/myipaddress.php', processAndAppend);\r\n        }, true);\r\n\r\n        // append to header\r\n        html.appendChild(detectMobile);\r\n    }\r\n\r\n    /**\r\n     * Function to generate query string\r\n     *\r\n     * @param array arr\r\n     * @return string\r\n     */\r\n    var queryString = function (arr)\r\n    {\r\n        var s = '';\r\n        for ( var e in arr ) {\r\n           s += '&' + e + '=' + escape( arr[e] );\r\n        }\r\n        return s.substring(1);\r\n    }\r\n\r\n    /**\r\n     * Function to load iframe with given parameters\r\n     *\r\n     * @param array options\r\n     * @return void\r\n     */\r\n    var appendIframe = function ($options)\r\n    {\r\n        // Iframe source url\r\n        ifr_src = $options.targetUrl + 'frame/get_campaign_list_by_api?' + queryString($options.src);\r\n        console.log(ifr_src);\r\n        // Where to append\r\n        var appendTo = $options.appendTo;\r\n\r\n        // Detemine what elements where used to append the iframe\r\n        // Uses id attribute\r\n        if(appendTo.indexOf('#') !== -1) var iframe_wrapper = document.getElementById(appendTo.substring(1));\r\n        // Uses class attribute\r\n        else if(appendTo.indexOf('.') !== -1) var iframe_wrapper = document.getElementsByClassName(appendTo.substring(1))[0];\r\n        // Uses plain html tag or default html tag\r\n        else var iframe_wrapper = document.getElementsByTagName(appendTo)[0];\r\n\r\n        // Append the looding message before loading the iframe\r\n        appendLoaderText(iframe_wrapper, $options);\r\n\r\n        // Creation of iframe element\r\n        var ifr = document.createElement('iframe');\r\n        // Some iframe attributes\r\n        ifr.src = ifr_src;\r\n        ifr.width = $options.ifrWidth;\r\n        ifr.style.border = $options.ifrBorder;\r\n\r\n        // Function to determine if the iframe is done loading\r\n        ifr.onload = function() {\r\n            // Remove the loading text and image\r\n            var loader_text_wrapper = document.getElementById('loader_text_wrapper');\r\n            if(!loader_debug) if(loader_text_wrapper) loader_text_wrapper.remove();\r\n\r\n            // Iframe resizer will be called after complete loading of iframe\r\n            if(!loader_debug) if(!$options.initiateResizerBeforeIframeContentLoad) iFrameResize();\r\n\r\n            // Need to remove the skip button since the iframe is done loading\r\n            if($options.src.redirect_url) {\r\n                // If the iframe is first to load before the skip link was shown,\r\n                // We need to set to false so that the skip button will not show\r\n                show_skip = false;\r\n                // If ever the skip button was shown before the loading is complete,\r\n                // We need to remove the skip link\r\n                var parent_skip = document.getElementById('parent_skip');\r\n                if(!loader_debug) if(parent_skip) parent_skip.remove();\r\n            }\r\n        };\r\n\r\n        // append now the iframe\r\n        iframe_wrapper.appendChild(ifr);\r\n\r\n        // If redirection url is available, we need to append the skip button,\r\n        // so that in case of not showing or incomplete loading\r\n        // the user has the ability to skip the page\r\n        appendSkipLink ($options.src.redirect_url, $options.skipTimeout, iframe_wrapper);\r\n    }\r\n\r\n    /**\r\n     * Function to append skip link\r\n     *\r\n     * @param string $redirect_url\r\n     * @param integer $timeout\r\n     * @param node $iframe_wrapper\r\n     * @param bolean $show_skip\r\n     * @return void\r\n     */\r\n    var appendSkipLink = function ($redirect_url, $timeout, $iframe_wrapper)\r\n    {\r\n        if($redirect_url) {\r\n            // Set time delay before showing the skip link\r\n            setTimeout(function () {\r\n                // Create the skip anchor element\r\n                var skip = document.createElement(\"a\");\r\n                // Skip attribute\r\n                skip.id = 'parent_skip';\r\n                skip.href = $redirect_url;\r\n                skip.style.cssText = 'color: #2fa4e7; cursor: pointer; display: block; margin: 30px 0 15px; text-align: center; font-family: Verdana, Arial, Helvetica, sans-serif; text-decoration: none;';\r\n                // Determine that in this moment the button is needed to show,\r\n                // means the iframe is not yet finish loading\r\n                // and ifr.onload is not yet triggered\r\n\r\n                if(show_skip) {\r\n                    $iframe_wrapper.appendChild(skip);\r\n                    // Create the text for skip element\r\n                    var text = document.createTextNode('Skip');\r\n                    skip.appendChild(text);\r\n                }\r\n            },\r\n            // time delay, Default time is  1 second\r\n            $timeout);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Function to load loading rotator styling\r\n     *\r\n     * @return void\r\n     */\r\n    var appendLoadingRotatorStyle = function ()\r\n    {\r\n        var css = document.createElement('style');\r\n        css.type = 'text/css';\r\n\r\n        var styles = '@keyframes spin {\\\r\n                0% { transform: rotate(0deg); }\\\r\n                100% { transform: rotate(360deg); }\\\r\n            }';\r\n\r\n        if (css.styleSheet) css.styleSheet.cssText = styles;\r\n        else css.appendChild(document.createTextNode(styles));\r\n\r\n        document.getElementsByTagName(\"head\")[0].appendChild(css);\r\n    }\r\n\r\n    /**\r\n     * Function to load loading text and image\r\n     *\r\n     * @param node $iframe_wrapper\r\n     * @param string $loaderText\r\n     * @return void\r\n     */\r\n\r\n    var appendLoaderText = function ($iframe_wrapper, $option)\r\n    {\r\n        // Text message\r\n        var loader_text = document.createTextNode($option.loaderText);\r\n\r\n        // Rotator\r\n        var loader_image = document.createElement(\"div\");\r\n        loader_image.style.cssText = 'border: 8px solid #f3f3f3; border-radius: 50%; width: 25px; height: 25px; animation: spin 2s linear infinite; margin: 0 auto 10px;';\r\n        loader_image.style.borderTopColor = $option.loaderTextColor;\r\n\r\n        // Inner text wrapper\r\n        var loader_inner_text_wrapper = document.createElement(\"div\");\r\n        loader_inner_text_wrapper.style.cssText = 'display:  table-cell; vertical-align: middle; font-size: 20px; font-family: Verdana, Arial, Helvetica, sans-serif;';\r\n        loader_inner_text_wrapper.style.color =  $option.loaderTextColor;\r\n\r\n        // Append rotator and message to innertext wrappar\r\n        loader_inner_text_wrapper.appendChild(loader_image);\r\n        loader_inner_text_wrapper.appendChild(loader_text);\r\n\r\n        // Text message wrapper\r\n        var loader_text_wrapper = document.createElement(\"div\");\r\n        loader_text_wrapper.id = 'loader_text_wrapper';\r\n        loader_text_wrapper.style.cssText = 'display: table; position: relative; width: 100%; top: ' + $option.loaderTop + '; margin-top: ' + $option.loaderMarginTop + '; height: 175px; overflow: hidden;';\r\n        loader_text_wrapper.style.backgroundColor = $option.loaderWrapperBackgroundColor;\r\n\r\n        // Append iner text wrapper to parent wrapper\r\n        loader_text_wrapper.appendChild(loader_inner_text_wrapper);\r\n\r\n        // Append text message wrapper tp iframe wrapper\r\n        $iframe_wrapper.appendChild(loader_text_wrapper);\r\n\r\n        // Append loader style\r\n        appendLoadingRotatorStyle();\r\n    }\r\n\r\n    /**\r\n     * Function to load iframe resizer\r\n     *\r\n     * @param string targetUrl\r\n     * @param bolean initiateResizer\r\n     * @return void\r\n     */\r\n    var appendIframeResizer = function (targetUrl, initiateResizer)\r\n    {\r\n        // Creation of iframe resizer script element\r\n        var ifr_resizer = document.createElement('script');\r\n        ifr_resizer.type = 'text/javascript';\r\n        ifr_resizer.id = 'irame_resizer';\r\n        ifr_resizer.src = targetUrl + 'js/api/iframeResizer.min.js';\r\n\r\n        // Function after finish loading of script\r\n        ifr_resizer.onload = function() {\r\n            if(initiateResizer) iFrameResize();\r\n        };\r\n        // append below body tag\r\n        document.getElementsByTagName('html')[0].appendChild(ifr_resizer);\r\n    }\r\n\r\n    /**\r\n     * Function to detect screen view\r\n     *\r\n     * @return bolean\r\n     */\r\n    var windowNavigator = function ()\r\n    {\r\n        var browser = {\r\n            'os': '',\r\n            'os_version': '',\r\n            'browser': '',\r\n            'browser_version': '',\r\n            'user_agent': window.navigator.userAgent\r\n        }\r\n        var device = {\r\n            'isMobile': '',\r\n            'isTablet': '',\r\n            'isDesktop': '',\r\n            'type': ''\r\n        }\r\n\r\n        var nVer = navigator.appVersion;\r\n        var nAgt = navigator.userAgent;\r\n        var browserName  = navigator.appName;\r\n        var fullVersion  = ''  +parseFloat(navigator.appVersion);\r\n        var majorVersion = parseInt(navigator.appVersion,10);\r\n        var nameOffset, verOffset, ix;\r\n\r\n        // In Opera, the true version is after \"Opera\" or after \"Version\"\r\n        if ((verOffset = nAgt.indexOf(\"Opera\")) != -1) {\r\n            browserName = \"Opera\";\r\n            fullVersion = nAgt.substring(verOffset + 6);\r\n            if ((verOffset = nAgt.indexOf(\"Version\")) != -1)\r\n                fullVersion = nAgt.substring(verOffset + 8);\r\n        }\r\n        // In MSIE, the true version is after \"MSIE\" in userAgent\r\n        else if ((verOffset = nAgt.indexOf(\"MSIE\")) != -1) {\r\n            browserName = \"Microsoft Internet Explorer\";\r\n            fullVersion = nAgt.substring(verOffset + 5);\r\n        }\r\n        // In Chrome, the true version is after \"Chrome\"\r\n        else if ((verOffset = nAgt.indexOf(\"Chrome\")) != -1) {\r\n            browserName = \"Chrome\";\r\n            fullVersion = nAgt.substring(verOffset + 7);\r\n        }\r\n        // In Safari, the true version is after \"Safari\" or after \"Version\"\r\n        else if ((verOffset = nAgt.indexOf(\"Safari\")) != -1) {\r\n        browserName = \"Safari\";\r\n        fullVersion = nAgt.substring(verOffset + 7);\r\n        if ((verOffset = nAgt.indexOf(\"Version\")) != -1)\r\n            fullVersion = nAgt.substring(verOffset + 8);\r\n        }\r\n        // In Firefox, the true version is after \"Firefox\"\r\n        else if ((verOffset = nAgt.indexOf(\"Firefox\")) != -1) {\r\n            browserName = \"Firefox\";\r\n            fullVersion = nAgt.substring(verOffset+8);\r\n        }\r\n        // In most other browsers, \"name/version\" is at the end of userAgent\r\n        else if ( (nameOffset = nAgt.lastIndexOf(' ') + 1) <\r\n                  (verOffset = nAgt.lastIndexOf('/')) )\r\n        {\r\n            browserName = nAgt.substring(nameOffset, verOffset);\r\n            fullVersion = nAgt.substring(verOffset + 1);\r\n            if (browserName.toLowerCase() == browserName.toUpperCase()) {\r\n                browserName = navigator.appName;\r\n            }\r\n        }\r\n        // trim the fullVersion string at semicolon/space if present\r\n        if ((ix = fullVersion.indexOf(\";\")) != -1) fullVersion = fullVersion.substring(0, ix);\r\n        if ((ix = fullVersion.indexOf(\" \")) != -1) fullVersion = fullVersion.substring(0, ix);\r\n        if ((ix = fullVersion.indexOf(')')) != -1) fullVersion = fullVersion.substring(0, ix);\r\n\r\n        majorVersion = parseInt('' + fullVersion, 10);\r\n        if (isNaN(majorVersion)) {\r\n            fullVersion  = '' + parseFloat(navigator.appVersion);\r\n            majorVersion = parseInt(navigator.appVersion, 10);\r\n        }\r\n\r\n        // mobile version\r\n        var mobileVr = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(nVer);\r\n\r\n        // system\r\n        var os = 'unknown';\r\n        var clientStrings = [\r\n            {s:'Windows 10', r:/(Windows 10.0|Windows NT 10.0)/},\r\n            {s:'Windows 8.1', r:/(Windows 8.1|Windows NT 6.3)/},\r\n            {s:'Windows 8', r:/(Windows 8|Windows NT 6.2)/},\r\n            {s:'Windows 7', r:/(Windows 7|Windows NT 6.1)/},\r\n            {s:'Windows Vista', r:/Windows NT 6.0/},\r\n            {s:'Windows Server 2003', r:/Windows NT 5.2/},\r\n            {s:'Windows XP', r:/(Windows NT 5.1|Windows XP)/},\r\n            {s:'Windows 2000', r:/(Windows NT 5.0|Windows 2000)/},\r\n            {s:'Windows ME', r:/(Win 9x 4.90|Windows ME)/},\r\n            {s:'Windows 98', r:/(Windows 98|Win98)/},\r\n            {s:'Windows 95', r:/(Windows 95|Win95|Windows_95)/},\r\n            {s:'Windows NT 4.0', r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},\r\n            {s:'Windows CE', r:/Windows CE/},\r\n            {s:'Windows 3.11', r:/Win16/},\r\n            {s:'Android', r:/Android/},\r\n            {s:'Open BSD', r:/OpenBSD/},\r\n            {s:'Sun OS', r:/SunOS/},\r\n            {s:'Linux', r:/(Linux|X11)/},\r\n            {s:'iOS', r:/(iPhone|iPad|iPod)/},\r\n            {s:'Mac OS X', r:/Mac OS X/},\r\n            {s:'Mac OS', r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},\r\n            {s:'QNX', r:/QNX/},\r\n            {s:'UNIX', r:/UNIX/},\r\n            {s:'BeOS', r:/BeOS/},\r\n            {s:'OS/2', r:/OS\\/2/},\r\n            {s:'Search Bot', r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/}\r\n        ];\r\n        for (var id in clientStrings) {\r\n            var cs = clientStrings[id];\r\n            if (cs.r.test(nAgt)) {\r\n                os = cs.s;\r\n                break;\r\n            }\r\n        }\r\n\r\n        var osVersion = 'unknown';\r\n\r\n        if (/Windows/.test(os)) {\r\n            osVersion = 'Windows ' + /Windows (.*)/.exec(os)[1];\r\n            os = 'Windows';\r\n        }\r\n\r\n        switch (os) {\r\n            case 'Mac OS X':\r\n                osVersion = /Mac OS X (10[\\.\\_\\d]+)/.exec(nAgt)[1];\r\n                break;\r\n\r\n            case 'Android':\r\n                osVersion = /Android ([\\.\\_\\d]+)/.exec(nAgt)[1];\r\n                break;\r\n\r\n            case 'iOS':\r\n                osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(nVer);\r\n                osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0);\r\n                break;\r\n        }\r\n\r\n        var md = new MobileDetect(window.navigator.userAgent);\r\n        // Desktop\r\n        var view = 1;\r\n        device.isDesktop = 1;\r\n        device.type = 'desktop';\r\n        browser.browser = browserName;\r\n        browser.browser_version = fullVersion;\r\n        browser.os = (device.os) ? device.os : os;\r\n        browser.os_version = osVersion;\r\n        // Phone\r\n        if (md.mobile() && md.phone()) {\r\n             view = 2;\r\n             device.isMobile = 1;\r\n             device.isDesktop = '';\r\n             device.type = md.phone();\r\n        }\r\n        // Tablet\r\n        if (md.tablet() || (md.mobile() && !md.phone())) {\r\n            view = 3;\r\n            device.isTablet = 1;\r\n            device.isDesktop = '';\r\n            device.type = md.tablet();\r\n        }\r\n\r\n        return {\r\n            'screen_view': view,\r\n            'browser': browser,\r\n            'device': device\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Birthdate\r\n     *\r\n     * @param integer $year\r\n     * @param integer $month\r\n     * @param integer $day\r\n     * @return string\r\n     */\r\n    var birthDate = function ($year, $month, $day)\r\n    {\r\n        return $year + '-' + $month  + '-' + $day;\r\n    }\r\n\r\n    /**\r\n     * Gender\r\n     *\r\n     * @param string $gender\r\n     * @return string\r\n     */\r\n    var gender = function ($gender)\r\n    {\r\n        if($gender == 'male' || $gender == 'm') return 'M';\r\n        else return 'F';\r\n    }\r\n\r\n    /**\r\n     * Function to get the user IP\r\n     *\r\n     * @param string $url\r\n     * @param callable callback\r\n     * @return void\r\n     */\r\n    var getUserIp = function (url, callback)\r\n    {\r\n        // Create callback for jsonp response\r\n        var callbackName = 'jsonp_callback_' + Math.round(100000 * Math.random());\r\n        window[callbackName] = function(data) {\r\n            delete window[callbackName];\r\n            document.body.removeChild(script);\r\n            callback(data.ip);\r\n        };\r\n\r\n        // Create temporary script\r\n        var script = document.createElement('script');\r\n        script.src = url + (url.indexOf('?') >= 0 ? '&' : '?') + 'callback=' + callbackName;\r\n        document.body.appendChild(script);\r\n\r\n        // Callback when error\r\n        script.onerror = function(data) {\r\n           callback('');\r\n        };\r\n    }\r\n\r\n    /**\r\n     *  Assign source data and append iframe\r\n     *\r\n     * @param string $ip\r\n     * @return void\r\n     */\r\n    var processAndAppend = function (ip)\r\n    {\r\n        var windowData = windowNavigator();\r\n        // IP adress\r\n        _options.src.ip = ip;\r\n        // Screen view\r\n        _options.src.screen_view = windowData.screen_view;\r\n        //browser\r\n         _options.src.os = windowData.browser.os;\r\n        _options.src.os_version = windowData.browser.os_version;\r\n        _options.src.browser = windowData.browser.browser;\r\n        _options.src.browser_version = windowData.browser.browser_version;\r\n        _options.src.user_agent = windowData.browser.user_agent;\r\n        //device\r\n        _options.src.is_mobile = windowData.device.isMobile;\r\n        _options.src.is_tablet = windowData.device.isTablet;\r\n        _options.src.is_desktop = windowData.device.isDesktop;\r\n        _options.src.type = windowData.device.type;\r\n        // Full birthdate\r\n        _options.src.birthdate = birthDate(_options.src.dobyear, _options.src.dobmonth, _options.src.dobday);\r\n        // Gender\r\n        _options.src.gender = gender(_options.src.gender.toLowerCase());\r\n        // Source url\r\n        _options.src.source_url = window.location.href;\r\n        // Phone\r\n        var phone = _options.src.phone.replace(/\\D/g,'');\r\n        _options.src.phone = phone;\r\n        _options.src.phone1 = phone.substr(0, 3);\r\n        _options.src.phone2 = phone.substr(3, 3);\r\n        _options.src.phone3 = phone.substr(6, 4);\r\n        // Submit\r\n        _options.src.submitBtn = _options.submitBtntext;\r\n        _options.src.submit = 'engageiq_iframeapi_post_data';\r\n        // Check wether to relaod parent frame/self frame\r\n        _options.src.target_url = _options.targetUrl;\r\n        _options.src.reload_parent_frame = _options.toReloadParentFrame;\r\n\r\n        appendIframe(_options);\r\n        appendIframeResizer(_options.targetUrl, _options.initiateResizerBeforeIframeContentLoad);\r\n    }\r\n})(options);\r\n","/**!\r\n * NLR Campaign API Script\r\n * Campaign Loader v1 (http://leadreactor.engageiq.com)\r\n * All action, event related to appending the iframe for NLR offers.\r\n *\r\n * @param options - Host site given parameters\r\n * @uses iFrameResize - Correct the iframe dimmension in relation to inner content\r\n * @uses MobileDetect - Detect mobile view\r\n */\r\n\r\n(function(inputs)\r\n{\r\n    /**\r\n     * Debug loader\r\n     */\r\n    var loader_debug = false;\r\n\r\n    /**\r\n     * Flag to determine if needed to show skip link\r\n     */\r\n     var show_skip = true;\r\n\r\n    /**\r\n     * Global container for merge default_options and options\r\n     */\r\n    var _options = {};\r\n\r\n    /**\r\n     * The default value needed to get the list of campaigns\r\n     *\r\n     */\r\n    var default_options = {\r\n        // This will be used for iframe query string\r\n        // add website id\r\n        'src': {\r\n            'screen_view': '1',\r\n            'submitBtn': '',\r\n            'submit': '',\r\n            'first_name': '',\r\n            'last_name': '',\r\n            'email': '',\r\n            'zip': '',\r\n            'birthdate': '',\r\n            'dobmonth': '',\r\n            'dobday': '',\r\n            'dobyear': '',\r\n            'gender': '',\r\n            'address': '',\r\n            'phone': '',\r\n            'phone1': '',\r\n            'phone2': '',\r\n            'phone3': '',\r\n            'ethnicity': '',\r\n            'source_url': '',\r\n            'image': '',\r\n            'affiliate_id': '',\r\n            'website_id':'',\r\n            'offer_id': '',\r\n            'campaign_id': '',\r\n            's1': '',\r\n            's2': '',\r\n            's3': '',\r\n            's4': '',\r\n            's5': '',\r\n            'cs1': '',\r\n            'cs2': '',\r\n            'cs3': '',\r\n            'cs4': '',\r\n            'cs5': '',\r\n            'q2': '',\r\n            'redirect_url': ''\r\n        },\r\n        // Append the iframe to given value\r\n        'appendTo': 'body',\r\n        // The NLR url to send request\r\n        'targetUrl': 'http://leadreactor.engageiq.com/',\r\n        // Iframe attributes\r\n        'ifrWidth': '100%',\r\n        'ifrBorder': 'none',\r\n        // Time duration before showing the skip button, default 1 second\r\n        'skipTimeout': 6000,\r\n        // Button text\r\n        'submitBtntext': 'Submit',\r\n        // True: initialize resizer when the resizer script is ready\r\n        // False: initialize resizer when  the resizer script is ready and the iframe content is done\r\n        'initiateResizerBeforeIframeContentLoad': true,\r\n        // Loading message\r\n        'loaderText': 'Please wait while we fetch offers to match your profile.',\r\n        // Loading text attributes\r\n        'loaderTextColor': '#53A653',\r\n        'loaderWrapperBackgroundColor': '#fff',\r\n        'loaderTop': '175px',\r\n        'loaderMarginTop': '-175px',\r\n        'toReloadParentFrame': false\r\n    };\r\n\r\n    /**\r\n     * Function to overwrite default data with given inputs\r\n     *\r\n     * @param object $default\r\n     * @param object $input\r\n     * @return object\r\n     */\r\n    var extend = function($default, $input)\r\n    {\r\n        // Go through default object and iterate\r\n        // We used the default object for it has the complete parameters\r\n        for (var property in $default) {\r\n            // Check $input object if the property of defaut exists on its own\r\n            if ($input.hasOwnProperty(property)) {\r\n                // Detemine if the $input property is object\r\n                if(typeof($input[property]) === 'object') {\r\n                    // go through the $default property\r\n                    // We used the default object property for it has the complete parameters\r\n                    for (var inner_property in $default[property]) {\r\n                        // Check $input object if the property of defaut exists on its own\r\n                        if ($input[property].hasOwnProperty(inner_property)) {\r\n                            // Replace the default property value with $input property value\r\n                            $default[property][inner_property] = $input[property][inner_property];\r\n                        }\r\n                    }\r\n                }\r\n                // $input property is not object\r\n                else {\r\n                    // Replace the default property value with $input property value\r\n                    $default[property] = $input[property];\r\n                }\r\n            }\r\n        }\r\n\r\n        if($input.loaderDebug) loader_debug = $input.loaderDebug;\r\n\r\n        return $default;\r\n    };\r\n\r\n    /**\r\n     * Catch script error\r\n     *\r\n     */\r\n    window.addEventListener('error', function(event)\r\n    {\r\n\r\n        if (event.type === \"error\") {\r\n            if(event.target.id != 'mobile_detect') return;\r\n\r\n            if(inputs.appendTo.indexOf('#') !== -1) var iframe_wrapper = document.getElementById(inputs.appendTo.substring(1));\r\n            // Uses class attribute\r\n            else if(inputs.appendTo.indexOf('.') !== -1) var iframe_wrapper = document.getElementsByClassName(inputs.appendTo.substring(1))[0];\r\n            // Uses plain html tag or default html tag\r\n            else var iframe_wrapper = document.getElementsByTagName(inputs.appendTo)[0];\r\n\r\n            var html = '<span style=\"font-size: 20px; font-family: Verdana, Arial, Helvetica, sans-serif; color:' + default_options.loaderTextColor + '\">There is a problem loading the script from EIQ website. <br /> Please report to  EIQ about this error.</span>';\r\n            if(inputs.src.redirect_url) html += '<br /><br /><span id=\"skip_error\" style=\"font-size: 20px; font-family: Verdana, Arial, Helvetica, sans-serif; color:#2fa4e7; cursor: pointer\">Skip</span>';\r\n\r\n            iframe_wrapper.innerHTML= html;\r\n        }\r\n\r\n    }, true);\r\n\r\n    /**\r\n     * Catch skip click event\r\n     *\r\n     */\r\n    window.addEventListener('click', function(event) {\r\n        if (event.target.id === \"skip_error\") {\r\n            if(inputs.toReloadParentFrame !== 'false') {\r\n                window.location.href = inputs.src.redirect_url;\r\n            } else {\r\n                window.top.location.href = inputs.src.redirect_url;\r\n            }\r\n        }\r\n    });\r\n\r\n    /**\r\n     * initialization\r\n     * Load the mobile detect first and\r\n     * Run initialization when mobile detect script is ready\r\n     *\r\n     */\r\n    window.onload = function()\r\n    {\r\n       _options = extend(default_options, inputs);\r\n\r\n        // Add mobile detect script to header\r\n        var html = document.getElementsByTagName(\"html\")[0];\r\n        var detectMobile = document.createElement(\"script\");\r\n\r\n        detectMobile.type = 'text/javascript';\r\n        detectMobile.id = 'mobile_detect';\r\n        detectMobile.src =  _options.targetUrl + 'js/api/mobile_detect.min.js';\r\n\r\n        // Function after finish loading of script\r\n        html.addEventListener(\"load\", function(event) {\r\n            //if (event.target.id === \"mobile_detect\") getUserIp('http://ipinfo.io', processAndAppend);\r\n            if (event.target.id === \"mobile_detect\") getUserIp('http://postleads.engageiq.com/myipaddress.php', processAndAppend);\r\n        }, true);\r\n\r\n        // append to header\r\n        html.appendChild(detectMobile);\r\n    }\r\n\r\n    /**\r\n     * Function to generate query string\r\n     *\r\n     * @param array arr\r\n     * @return string\r\n     */\r\n    var queryString = function (arr)\r\n    {\r\n        var s = '';\r\n        for ( var e in arr ) {\r\n           s += '&' + e + '=' + escape( arr[e] );\r\n        }\r\n        return s.substring(1);\r\n    }\r\n\r\n    /**\r\n     * Function to load iframe with given parameters\r\n     *\r\n     * @param array options\r\n     * @return void\r\n     */\r\n    var appendIframe = function ($options)\r\n    {\r\n        // Iframe source url\r\n        ifr_src = $options.targetUrl + 'frame/get_campaign_list_by_api?' + queryString($options.src);\r\n        console.log(ifr_src);\r\n        // Where to append\r\n        var appendTo = $options.appendTo;\r\n\r\n        // Detemine what elements where used to append the iframe\r\n        // Uses id attribute\r\n        if(appendTo.indexOf('#') !== -1) var iframe_wrapper = document.getElementById(appendTo.substring(1));\r\n        // Uses class attribute\r\n        else if(appendTo.indexOf('.') !== -1) var iframe_wrapper = document.getElementsByClassName(appendTo.substring(1))[0];\r\n        // Uses plain html tag or default html tag\r\n        else var iframe_wrapper = document.getElementsByTagName(appendTo)[0];\r\n\r\n        // Append the looding message before loading the iframe\r\n        appendLoaderText(iframe_wrapper, $options);\r\n\r\n        // Creation of iframe element\r\n        var ifr = document.createElement('iframe');\r\n        // Some iframe attributes\r\n        ifr.src = ifr_src;\r\n        ifr.width = $options.ifrWidth;\r\n        ifr.style.border = $options.ifrBorder;\r\n\r\n        // Function to determine if the iframe is done loading\r\n        ifr.onload = function() {\r\n            // Remove the loading text and image\r\n            var loader_text_wrapper = document.getElementById('loader_text_wrapper');\r\n            if(!loader_debug) if(loader_text_wrapper) loader_text_wrapper.remove();\r\n\r\n            // Iframe resizer will be called after complete loading of iframe\r\n            if(!loader_debug) if(!$options.initiateResizerBeforeIframeContentLoad) iFrameResize();\r\n\r\n            // Need to remove the skip button since the iframe is done loading\r\n            if($options.src.redirect_url) {\r\n                // If the iframe is first to load before the skip link was shown,\r\n                // We need to set to false so that the skip button will not show\r\n                show_skip = false;\r\n                // If ever the skip button was shown before the loading is complete,\r\n                // We need to remove the skip link\r\n                var parent_skip = document.getElementById('parent_skip');\r\n                if(!loader_debug) if(parent_skip) parent_skip.remove();\r\n            }\r\n        };\r\n\r\n        // append now the iframe\r\n        iframe_wrapper.appendChild(ifr);\r\n\r\n        // If redirection url is available, we need to append the skip button,\r\n        // so that in case of not showing or incomplete loading\r\n        // the user has the ability to skip the page\r\n        appendSkipLink ($options.src.redirect_url, $options.skipTimeout, iframe_wrapper);\r\n    }\r\n\r\n    /**\r\n     * Function to append skip link\r\n     *\r\n     * @param string $redirect_url\r\n     * @param integer $timeout\r\n     * @param node $iframe_wrapper\r\n     * @param bolean $show_skip\r\n     * @return void\r\n     */\r\n    var appendSkipLink = function ($redirect_url, $timeout, $iframe_wrapper)\r\n    {\r\n        if($redirect_url) {\r\n            // Set time delay before showing the skip link\r\n            setTimeout(function () {\r\n                // Create the skip anchor element\r\n                var skip = document.createElement(\"a\");\r\n                // Skip attribute\r\n                skip.id = 'parent_skip';\r\n                skip.href = $redirect_url;\r\n                skip.style.cssText = 'color: #2fa4e7; cursor: pointer; display: block; margin: 30px 0 15px; text-align: center; font-family: Verdana, Arial, Helvetica, sans-serif; text-decoration: none;';\r\n                // Determine that in this moment the button is needed to show,\r\n                // means the iframe is not yet finish loading\r\n                // and ifr.onload is not yet triggered\r\n\r\n                if(show_skip) {\r\n                    $iframe_wrapper.appendChild(skip);\r\n                    // Create the text for skip element\r\n                    var text = document.createTextNode('Skip');\r\n                    skip.appendChild(text);\r\n                }\r\n            },\r\n            // time delay, Default time is  1 second\r\n            $timeout);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Function to load loading rotator styling\r\n     *\r\n     * @return void\r\n     */\r\n    var appendLoadingRotatorStyle = function ()\r\n    {\r\n        var css = document.createElement('style');\r\n        css.type = 'text/css';\r\n\r\n        var styles = '@keyframes spin {\\\r\n                0% { transform: rotate(0deg); }\\\r\n                100% { transform: rotate(360deg); }\\\r\n            }';\r\n\r\n        if (css.styleSheet) css.styleSheet.cssText = styles;\r\n        else css.appendChild(document.createTextNode(styles));\r\n\r\n        document.getElementsByTagName(\"head\")[0].appendChild(css);\r\n    }\r\n\r\n    /**\r\n     * Function to load loading text and image\r\n     *\r\n     * @param node $iframe_wrapper\r\n     * @param string $loaderText\r\n     * @return void\r\n     */\r\n\r\n    var appendLoaderText = function ($iframe_wrapper, $option)\r\n    {\r\n        // Text message\r\n        var loader_text = document.createTextNode($option.loaderText);\r\n\r\n        // Rotator\r\n        var loader_image = document.createElement(\"div\");\r\n        loader_image.style.cssText = 'border: 8px solid #f3f3f3; border-radius: 50%; width: 25px; height: 25px; animation: spin 2s linear infinite; margin: 0 auto 10px;';\r\n        loader_image.style.borderTopColor = $option.loaderTextColor;\r\n\r\n        // Inner text wrapper\r\n        var loader_inner_text_wrapper = document.createElement(\"div\");\r\n        loader_inner_text_wrapper.style.cssText = 'display:  table-cell; vertical-align: middle; font-size: 20px; font-family: Verdana, Arial, Helvetica, sans-serif;';\r\n        loader_inner_text_wrapper.style.color =  $option.loaderTextColor;\r\n\r\n        // Append rotator and message to innertext wrappar\r\n        loader_inner_text_wrapper.appendChild(loader_image);\r\n        loader_inner_text_wrapper.appendChild(loader_text);\r\n\r\n        // Text message wrapper\r\n        var loader_text_wrapper = document.createElement(\"div\");\r\n        loader_text_wrapper.id = 'loader_text_wrapper';\r\n        loader_text_wrapper.style.cssText = 'display: table; position: relative; width: 100%; top: ' + $option.loaderTop + '; margin-top: ' + $option.loaderMarginTop + '; height: 175px; overflow: hidden;';\r\n        loader_text_wrapper.style.backgroundColor = $option.loaderWrapperBackgroundColor;\r\n\r\n        // Append iner text wrapper to parent wrapper\r\n        loader_text_wrapper.appendChild(loader_inner_text_wrapper);\r\n\r\n        // Append text message wrapper tp iframe wrapper\r\n        $iframe_wrapper.appendChild(loader_text_wrapper);\r\n\r\n        // Append loader style\r\n        appendLoadingRotatorStyle();\r\n    }\r\n\r\n    /**\r\n     * Function to load iframe resizer\r\n     *\r\n     * @param string targetUrl\r\n     * @param bolean initiateResizer\r\n     * @return void\r\n     */\r\n    var appendIframeResizer = function (targetUrl, initiateResizer)\r\n    {\r\n        // Creation of iframe resizer script element\r\n        var ifr_resizer = document.createElement('script');\r\n        ifr_resizer.type = 'text/javascript';\r\n        ifr_resizer.id = 'irame_resizer';\r\n        ifr_resizer.src = targetUrl + 'js/api/iframeResizer.min.js';\r\n\r\n        // Function after finish loading of script\r\n        ifr_resizer.onload = function() {\r\n            if(initiateResizer) iFrameResize();\r\n        };\r\n        // append below body tag\r\n        document.getElementsByTagName('html')[0].appendChild(ifr_resizer);\r\n    }\r\n\r\n    /**\r\n     * Function to detect screen view\r\n     *\r\n     * @return bolean\r\n     */\r\n    var windowNavigator = function ()\r\n    {\r\n        var browser = {\r\n            'os': '',\r\n            'os_version': '',\r\n            'browser': '',\r\n            'browser_version': '',\r\n            'user_agent': window.navigator.userAgent\r\n        }\r\n        var device = {\r\n            'isMobile': '',\r\n            'isTablet': '',\r\n            'isDesktop': '',\r\n            'type': ''\r\n        }\r\n\r\n        var nVer = navigator.appVersion;\r\n        var nAgt = navigator.userAgent;\r\n        var browserName  = navigator.appName;\r\n        var fullVersion  = ''  +parseFloat(navigator.appVersion);\r\n        var majorVersion = parseInt(navigator.appVersion,10);\r\n        var nameOffset, verOffset, ix;\r\n\r\n        // In Opera, the true version is after \"Opera\" or after \"Version\"\r\n        if ((verOffset = nAgt.indexOf(\"Opera\")) != -1) {\r\n            browserName = \"Opera\";\r\n            fullVersion = nAgt.substring(verOffset + 6);\r\n            if ((verOffset = nAgt.indexOf(\"Version\")) != -1)\r\n                fullVersion = nAgt.substring(verOffset + 8);\r\n        }\r\n        // In MSIE, the true version is after \"MSIE\" in userAgent\r\n        else if ((verOffset = nAgt.indexOf(\"MSIE\")) != -1) {\r\n            browserName = \"Microsoft Internet Explorer\";\r\n            fullVersion = nAgt.substring(verOffset + 5);\r\n        }\r\n        // In Chrome, the true version is after \"Chrome\"\r\n        else if ((verOffset = nAgt.indexOf(\"Chrome\")) != -1) {\r\n            browserName = \"Chrome\";\r\n            fullVersion = nAgt.substring(verOffset + 7);\r\n        }\r\n        // In Safari, the true version is after \"Safari\" or after \"Version\"\r\n        else if ((verOffset = nAgt.indexOf(\"Safari\")) != -1) {\r\n        browserName = \"Safari\";\r\n        fullVersion = nAgt.substring(verOffset + 7);\r\n        if ((verOffset = nAgt.indexOf(\"Version\")) != -1)\r\n            fullVersion = nAgt.substring(verOffset + 8);\r\n        }\r\n        // In Firefox, the true version is after \"Firefox\"\r\n        else if ((verOffset = nAgt.indexOf(\"Firefox\")) != -1) {\r\n            browserName = \"Firefox\";\r\n            fullVersion = nAgt.substring(verOffset+8);\r\n        }\r\n        // In most other browsers, \"name/version\" is at the end of userAgent\r\n        else if ( (nameOffset = nAgt.lastIndexOf(' ') + 1) <\r\n                  (verOffset = nAgt.lastIndexOf('/')) )\r\n        {\r\n            browserName = nAgt.substring(nameOffset, verOffset);\r\n            fullVersion = nAgt.substring(verOffset + 1);\r\n            if (browserName.toLowerCase() == browserName.toUpperCase()) {\r\n                browserName = navigator.appName;\r\n            }\r\n        }\r\n        // trim the fullVersion string at semicolon/space if present\r\n        if ((ix = fullVersion.indexOf(\";\")) != -1) fullVersion = fullVersion.substring(0, ix);\r\n        if ((ix = fullVersion.indexOf(\" \")) != -1) fullVersion = fullVersion.substring(0, ix);\r\n        if ((ix = fullVersion.indexOf(')')) != -1) fullVersion = fullVersion.substring(0, ix);\r\n\r\n        majorVersion = parseInt('' + fullVersion, 10);\r\n        if (isNaN(majorVersion)) {\r\n            fullVersion  = '' + parseFloat(navigator.appVersion);\r\n            majorVersion = parseInt(navigator.appVersion, 10);\r\n        }\r\n\r\n        // mobile version\r\n        var mobileVr = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(nVer);\r\n\r\n        // system\r\n        var os = 'unknown';\r\n        var clientStrings = [\r\n            {s:'Windows 10', r:/(Windows 10.0|Windows NT 10.0)/},\r\n            {s:'Windows 8.1', r:/(Windows 8.1|Windows NT 6.3)/},\r\n            {s:'Windows 8', r:/(Windows 8|Windows NT 6.2)/},\r\n            {s:'Windows 7', r:/(Windows 7|Windows NT 6.1)/},\r\n            {s:'Windows Vista', r:/Windows NT 6.0/},\r\n            {s:'Windows Server 2003', r:/Windows NT 5.2/},\r\n            {s:'Windows XP', r:/(Windows NT 5.1|Windows XP)/},\r\n            {s:'Windows 2000', r:/(Windows NT 5.0|Windows 2000)/},\r\n            {s:'Windows ME', r:/(Win 9x 4.90|Windows ME)/},\r\n            {s:'Windows 98', r:/(Windows 98|Win98)/},\r\n            {s:'Windows 95', r:/(Windows 95|Win95|Windows_95)/},\r\n            {s:'Windows NT 4.0', r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},\r\n            {s:'Windows CE', r:/Windows CE/},\r\n            {s:'Windows 3.11', r:/Win16/},\r\n            {s:'Android', r:/Android/},\r\n            {s:'Open BSD', r:/OpenBSD/},\r\n            {s:'Sun OS', r:/SunOS/},\r\n            {s:'Linux', r:/(Linux|X11)/},\r\n            {s:'iOS', r:/(iPhone|iPad|iPod)/},\r\n            {s:'Mac OS X', r:/Mac OS X/},\r\n            {s:'Mac OS', r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},\r\n            {s:'QNX', r:/QNX/},\r\n            {s:'UNIX', r:/UNIX/},\r\n            {s:'BeOS', r:/BeOS/},\r\n            {s:'OS/2', r:/OS\\/2/},\r\n            {s:'Search Bot', r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/}\r\n        ];\r\n        for (var id in clientStrings) {\r\n            var cs = clientStrings[id];\r\n            if (cs.r.test(nAgt)) {\r\n                os = cs.s;\r\n                break;\r\n            }\r\n        }\r\n\r\n        var osVersion = 'unknown';\r\n\r\n        if (/Windows/.test(os)) {\r\n            osVersion = 'Windows ' + /Windows (.*)/.exec(os)[1];\r\n            os = 'Windows';\r\n        }\r\n\r\n        switch (os) {\r\n            case 'Mac OS X':\r\n                osVersion = /Mac OS X (10[\\.\\_\\d]+)/.exec(nAgt)[1];\r\n                break;\r\n\r\n            case 'Android':\r\n                osVersion = /Android ([\\.\\_\\d]+)/.exec(nAgt)[1];\r\n                break;\r\n\r\n            case 'iOS':\r\n                osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(nVer);\r\n                osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0);\r\n                break;\r\n        }\r\n\r\n        var md = new MobileDetect(window.navigator.userAgent);\r\n        // Desktop\r\n        var view = 1;\r\n        device.isDesktop = 1;\r\n        device.type = 'desktop';\r\n        browser.browser = browserName;\r\n        browser.browser_version = fullVersion;\r\n        browser.os = (device.os) ? device.os : os;\r\n        browser.os_version = osVersion;\r\n        // Phone\r\n        if (md.mobile() && md.phone()) {\r\n             view = 2;\r\n             device.isMobile = 1;\r\n             device.isDesktop = '';\r\n             device.type = md.phone();\r\n        }\r\n        // Tablet\r\n        if (md.tablet() || (md.mobile() && !md.phone())) {\r\n            view = 3;\r\n            device.isTablet = 1;\r\n            device.isDesktop = '';\r\n            device.type = md.tablet();\r\n        }\r\n\r\n        return {\r\n            'screen_view': view,\r\n            'browser': browser,\r\n            'device': device\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Birthdate\r\n     *\r\n     * @param integer $year\r\n     * @param integer $month\r\n     * @param integer $day\r\n     * @return string\r\n     */\r\n    var birthDate = function ($year, $month, $day)\r\n    {\r\n        return $year + '-' + $month  + '-' + $day;\r\n    }\r\n\r\n    /**\r\n     * Gender\r\n     *\r\n     * @param string $gender\r\n     * @return string\r\n     */\r\n    var gender = function ($gender)\r\n    {\r\n        if($gender == 'male' || $gender == 'm') return 'M';\r\n        else return 'F';\r\n    }\r\n\r\n    /**\r\n     * Function to get the user IP\r\n     *\r\n     * @param string $url\r\n     * @param callable callback\r\n     * @return void\r\n     */\r\n    var getUserIp = function (url, callback)\r\n    {\r\n        // Create callback for jsonp response\r\n        var callbackName = 'jsonp_callback_' + Math.round(100000 * Math.random());\r\n        window[callbackName] = function(data) {\r\n            delete window[callbackName];\r\n            document.body.removeChild(script);\r\n            callback(data.ip);\r\n        };\r\n\r\n        // Create temporary script\r\n        var script = document.createElement('script');\r\n        script.src = url + (url.indexOf('?') >= 0 ? '&' : '?') + 'callback=' + callbackName;\r\n        document.body.appendChild(script);\r\n\r\n        // Callback when error\r\n        script.onerror = function(data) {\r\n           callback('');\r\n        };\r\n    }\r\n\r\n    /**\r\n     *  Assign source data and append iframe\r\n     *\r\n     * @param string $ip\r\n     * @return void\r\n     */\r\n    var processAndAppend = function (ip)\r\n    {\r\n        var windowData = windowNavigator();\r\n        // IP adress\r\n        _options.src.ip = ip;\r\n        // Screen view\r\n        _options.src.screen_view = windowData.screen_view;\r\n        //browser\r\n         _options.src.os = windowData.browser.os;\r\n        _options.src.os_version = windowData.browser.os_version;\r\n        _options.src.browser = windowData.browser.browser;\r\n        _options.src.browser_version = windowData.browser.browser_version;\r\n        _options.src.user_agent = windowData.browser.user_agent;\r\n        //device\r\n        _options.src.is_mobile = windowData.device.isMobile;\r\n        _options.src.is_tablet = windowData.device.isTablet;\r\n        _options.src.is_desktop = windowData.device.isDesktop;\r\n        _options.src.type = windowData.device.type;\r\n        // Full birthdate\r\n        _options.src.birthdate = birthDate(_options.src.dobyear, _options.src.dobmonth, _options.src.dobday);\r\n        // Gender\r\n        _options.src.gender = gender(_options.src.gender.toLowerCase());\r\n        // Source url\r\n        _options.src.source_url = window.location.href;\r\n        // Phone\r\n        var phone = _options.src.phone.replace(/\\D/g,'');\r\n        _options.src.phone = phone;\r\n        _options.src.phone1 = phone.substr(0, 3);\r\n        _options.src.phone2 = phone.substr(3, 3);\r\n        _options.src.phone3 = phone.substr(6, 4);\r\n        // Submit\r\n        _options.src.submitBtn = _options.submitBtntext;\r\n        _options.src.submit = 'engageiq_iframeapi_post_data';\r\n        // Check wether to relaod parent frame/self frame\r\n        _options.src.target_url = _options.targetUrl;\r\n        _options.src.reload_parent_frame = _options.toReloadParentFrame;\r\n\r\n        appendIframe(_options);\r\n        appendIframeResizer(_options.targetUrl, _options.initiateResizerBeforeIframeContentLoad);\r\n    }\r\n})(options);\r\n"]}