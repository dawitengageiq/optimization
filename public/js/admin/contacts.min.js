var inactiveAffiliates=[],inactiveAdvertisers=[];$(document).ready(function(){function e(e,a){for(var t=0;t<a.length;t++)if(a[t].value===e.value)return!0;return!1}$("#affiliate_id").select2({theme:"bootstrap"}),$("#advertiser_id").select2({theme:"bootstrap"});var a=$("#contacts-table"),t=a.data("advertiser"),i=a.data("affiliate"),r=$("#baseUrl").html()+"/contacts",d={};void 0!=t?d={awesome_advertiser_id:t}:void 0!=i&&(d={awesome_affiliate_id:i}),a.DataTable({processing:!0,serverSide:!0,columns:[null,null,null,null,null,null,{orderable:!1}],ajax:{url:r,type:"post",data:d,error:function(){}},lengthMenu:[[25,50,100,1e3,2e3,3e3],[25,50,100,1e3,2e3,3e3]]}),$("#add_contact_button").click(function(){var e=$("#contacts_form_modal"),a=$("#baseUrl").html()+"/admin/contact/store";e.find(".this_form").attr("action",a),e.find(".this_form").attr("data-process","add_contact"),e.find(".this_form").data("confirmation",""),e.find(".this_form").attr("data-confirmation",""),e.find(".modal-title").html("Add Contact"),$(".this_field").val(""),$("#title").val("Mr."),$("#gender").val("M");var t=$("#affiliate_id"),i=$("#advertiser_id");$("#affiliate_checkbox").prop("checked",!1),t.prop("disabled",!0),$("#advertiser_checkbox").prop("checked",!1),i.prop("disabled",!0),t.val($("#affiliate_id option:first").val()).trigger("change"),i.val($("#advertiser_id option:first").val()).trigger("change"),$(".password-fields-container").show(),$(".password-fields").prop("required",!0);for(var r=0;r<inactiveAffiliates.length;r++){var d=inactiveAffiliates[r];$("#affiliate_id option[value='"+d.value+"']").remove()}for(var r=0;r<inactiveAdvertisers.length;r++){var o=inactiveAdvertisers[r];$("#advertiser_id option[value='"+o.value+"']").remove()}e.modal("show"),$(".this_error_wrapper").hide()}),$("#affiliate_checkbox").change(function(){var e=$("#affiliate_id");$(this).is(":checked")?e.prop("disabled",!1):e.prop("disabled",!0)}),$("#advertiser_checkbox").change(function(){var e=$("#advertiser_id");$(this).is(":checked")?e.prop("disabled",!1):e.prop("disabled",!0)}),$(document).on("click",".delete-contact",function(){if(confirm("Are you sure you want to delete this contact?")){var e=$(this).data("id"),a=$("#baseUrl").val()+"/admin/contact/delete/"+e;$.ajax({type:"POST",url:a,success:function(a){if(a.delete_status){var t=$("#contacts-table").DataTable();t.row($("#row-contact-"+e)).remove(),t.draw()}else alert(a.message)}})}}),$(document).on("click",".edit-contact",function(){var a=$("#contacts_form_modal"),t=$(this).data("id"),i=$("#baseUrl").html()+"/admin/contact/update/"+t;a.find(".this_form").attr("action",i),a.find(".this_form").data("process","edit_contact"),a.find(".this_form").attr("data-process","edit_contact"),a.find(".this_form").data("confirmation","Are you sure you want to update this contact?"),a.find(".this_form").attr("data-confirmation","Are you sure you want to update this contact?"),a.find(".modal-title").html("Edit Contact"),a.find("#id").val(t);var r="#contact-"+t+"-",d=$(r+"affiliate_id").val(),o=$(r+"advertiser_id").val(),l=$(r+"full_name").html().trim(),s=l.split(" "),n=s[0],c=s[1],v=s[2],f=s[3],p=$(r+"gender").val(),h=$(r+"position").html(),_=$(r+"email").html(),u=$(r+"address").val(),m=$(r+"mobile_number").html(),g=$(r+"phone_number").html(),b=$(r+"instant_messaging").val();$("#title").val(n),$("#first_name").val(c),$("#middle_name").val(v),$("#last_name").val(f),$("#gender").val(p),$("#position").val(h),$("#address").val(u),$("#email").val(_),$("#mobile_number").val(m),$("#phone_number").val(g),$("#instant_messaging").val(b);var k=$("#affiliate_id"),w=$("#advertiser_id");if(k.val($("#affiliate_id option:first").val()).trigger("change"),w.val($("#advertiser_id option:first").val()).trigger("change"),""!==d){var x=$("#baseUrl").val()+"/affiliates/"+d+"/status";$.ajax({type:"POST",url:x,success:function(a){if(!a.active){var t=$("#affiliate_id option[value='"+a.affiliate_id+"']").length>0;$("#affiliate_checkbox").prop("checked",!0),t||(k.append($("<option>",{value:a.affiliate_id,text:a.name})),k.val(d).trigger("change"),k.prop("disabled",!1),console.log(a.affiliate_id+" was added!"));var i={value:a.affiliate_id,text:a.name};e(i,inactiveAffiliates)||inactiveAffiliates.push(i)}}}),$("#affiliate_checkbox").prop("checked",!0),k.val(d).trigger("change"),k.prop("disabled",!1)}else $("#affiliate_checkbox").prop("checked",!1),k.prop("disabled",!0);if(""!==o){var x=$("#baseUrl").val()+"/advertisers/"+o+"/status";$.ajax({type:"POST",url:x,success:function(a){if(!a.active){var t=$("#advertiser_id option[value='"+a.advertiser_id+"']").length>0;$("#advertiser_checkbox").prop("checked",!0),t||(w.append($("<option>",{value:a.advertiser_id,text:a.name})),w.val(o).trigger("change"),w.prop("disabled",!1),console.log(a.advertiser_id+" was added!"));var i={value:a.advertiser_id,text:a.name};e(i,inactiveAdvertisers)||inactiveAdvertisers.push(i)}}}),$("#advertiser_checkbox").prop("checked",!0),w.val(o).trigger("change"),w.prop("disabled",!1)}else $("#advertiser_checkbox").prop("checked",!1),w.prop("disabled",!0);$(".password-fields-container").hide(),$(".password-fields").prop("required",!1),$(".this_error_wrapper").hide(),a.modal("show")})});
//# sourceMappingURL=contacts.min.js.map
