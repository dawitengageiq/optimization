{"version":3,"sources":["roles.js"],"names":["$","document","ready","rolesURL","val","DataTable","processing","serverSide","columns","orderable","ajax","url","type","error","lengthMenu","click","roleModal","find","removeAttr","html","css","hide","show","modal","roleID","roleName","roleDescription","roleNameLength","length","errorsHtml","thisError","empty","append","console","log","permissions","each","code","this","attr","value","checked","actionID","data","action_id","push","baseURL","updateURL","encodeURIComponent","JSON","stringify","success","alert","message","role","id","name","description","jqXHR","textStatus","errorThrown","getURL","actionButtons","table","row","add","draw","change","checkBoxID","on","roleEditButton","text","actionsURL","arrayLength","i","action","prop","pivot","permitted","roleDeleteButton","confirm","deleteURL","parents","remove"],"mappings":"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","file":"roles.min.js","sourcesContent":["/**\r\n * Created by magbanua-ariel on 02/05/2016.\r\n */\r\n\r\n$(document).ready(function()\r\n{\r\n    var rolesURL = $('#baseUrl').val() + '/admin/roles';\r\n\r\n    $('#roles-table').DataTable({\r\n        'processing': true,\r\n        'serverSide': true,\r\n        'columns': [\r\n            null,\r\n            null,\r\n            null,\r\n            { \"orderable\": false }\r\n        ],\r\n        'ajax':{\r\n            url: rolesURL, // json datasource\r\n            type: 'get',  //LIVE\r\n            // type: 'post',  // KARLA ver\r\n            error: function(){  // error handling\r\n            }\r\n        },\r\n        //lengthMenu: [[10,50,100,-1],[10,50,100,\"All\"]]\r\n        lengthMenu: [[25,50,100,1000,2000,3000],[25,50,100,1000,2000,3000]]\r\n    });\r\n\r\n    $('#addRole').click(function()\r\n    {\r\n        var roleModal = $('#roleModal');\r\n\r\n        //clear all fields in add role modal\r\n        roleModal.find('.permission-input-text').val('');\r\n        roleModal.find('.permission-input-checkbox').removeAttr('checked');\r\n        roleModal.find('.modal-title').html('Add Role');\r\n\r\n        //hide all sub-permissions\r\n        $('.sub-section-permissions').css('display','none');\r\n\r\n        //hide the error container\r\n        $('.this_error_wrapper').hide();\r\n\r\n        $('#updateRole').hide();\r\n        $('#saveRole').show();\r\n\r\n        roleModal.modal('show');\r\n    });\r\n\r\n    $('#updateRole').click(function()\r\n    {\r\n        var roleModal = $('#roleModal');\r\n\r\n        //get all the data from the modal\r\n        var roleID = roleModal.find('#roleID').val();\r\n        var roleName = roleModal.find('#roleName').val();\r\n        var roleDescription = roleModal.find('#description').val();\r\n\r\n        var roleNameLength = roleName.length;\r\n        var errorsHtml = '';\r\n\r\n        if(roleNameLength==0)\r\n        {\r\n            //show the error container\r\n            $('.this_error_wrapper').show();\r\n\r\n            var thisError = $('.this_errors');\r\n            //clear all previous errors\r\n            thisError.empty();\r\n\r\n            errorsHtml = '<ul>';\r\n\r\n            errorsHtml += '<li><span class=\"glyphicon glyphicon-remove-sign\" aria-hidden=\"true\"></span> Role name is empty!</li>'; //showing only the first error.\r\n            //$('label[for=\"'+key+'\"]').addClass('error_label error');\r\n            //$('#'+key).addClass('error_field error');\r\n\r\n            errorsHtml += '</ul>';\r\n\r\n            thisError.append(errorsHtml);\r\n            thisError.show();\r\n\r\n            console.log(errorsHtml);\r\n\r\n            return;\r\n        }\r\n\r\n        var permissions = [];\r\n\r\n        //get all checked items\r\n        $('input:checkbox.permission-input-checkbox').each(function()\r\n        {\r\n            var code = $(this).attr('id');\r\n            var value = this.checked;\r\n            var actionID = $(this).data('action_id');\r\n\r\n            var data = {\r\n                action_id: actionID,\r\n                code: code,\r\n                value: value\r\n            };\r\n\r\n            permissions.push(data);\r\n        });\r\n\r\n        //create the get url\r\n        var baseURL = $('#baseUrl').val()+'roles/'+roleID+'/update';\r\n        var updateURL = baseURL+'?name='+encodeURIComponent(roleName)+'&description='+encodeURIComponent(roleDescription)+'&permissions='+encodeURIComponent(JSON.stringify(permissions));\r\n\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: updateURL,\r\n            success: function(data){\r\n\r\n                if(data.success)\r\n                {\r\n                    alert(data.message);\r\n\r\n                    console.log(data.role);\r\n\r\n                    //update the data displayed of the role in the table\r\n                    $('#roles-'+data.role.id+'-name').html(data.role.name);\r\n                    $('#roles-'+data.role.id+'-description').html(data.role.description);\r\n\r\n                    roleModal.modal('hide');\r\n                }\r\n            },\r\n            error: function(jqXHR,textStatus,errorThrown){\r\n                alert(errorThrown);\r\n                roleModal.modal('hide');\r\n            }\r\n        });\r\n\r\n    });\r\n\r\n    $('#saveRole').click(function()\r\n    {\r\n        var roleModal = $('#roleModal');\r\n\r\n        //get all the data from the modal\r\n        var roleName = roleModal.find('#roleName').val();\r\n        var roleDescription = roleModal.find('#description').val();\r\n\r\n        var roleNameLength = roleName.length;\r\n        var errorsHtml = '';\r\n\r\n        if(roleNameLength==0)\r\n        {\r\n            //show the error container\r\n            $('.this_error_wrapper').show();\r\n\r\n            var thisError = $('.this_errors');\r\n            //clear all previous errors\r\n            thisError.empty();\r\n\r\n            errorsHtml = '<ul>';\r\n\r\n            errorsHtml += '<li><span class=\"glyphicon glyphicon-remove-sign\" aria-hidden=\"true\"></span> Role name is empty!</li>'; //showing only the first error.\r\n            //$('label[for=\"'+key+'\"]').addClass('error_label error');\r\n            //$('#'+key).addClass('error_field error');\r\n\r\n            errorsHtml += '</ul>';\r\n\r\n            thisError.append(errorsHtml);\r\n            thisError.show();\r\n\r\n            console.log(errorsHtml);\r\n\r\n            return;\r\n        }\r\n\r\n        var permissions = [];\r\n\r\n        //get all checked items\r\n        $('input:checkbox.permission-input-checkbox').each(function()\r\n        {\r\n\r\n            var code = $(this).attr('id');\r\n            //var value = $(this).val() == 'on';\r\n            var value = this.checked;\r\n\r\n            var data = {\r\n                code: code,\r\n                value: value\r\n            };\r\n\r\n            permissions.push(data);\r\n        });\r\n\r\n        //create the get url\r\n        var baseURL = $('#baseUrl').val()+'roles/save';\r\n        var getURL = baseURL+'?name='+encodeURIComponent(roleName)+'&description='+encodeURIComponent(roleDescription)+'&permissions='+encodeURIComponent(JSON.stringify(permissions));\r\n\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: getURL,\r\n            success: function(data){\r\n\r\n                if(data.success)\r\n                {\r\n                    alert(data.message);\r\n\r\n                    var actionButtons = '<button class=\"editRole btn btn-default\" data-id=\"'+data.role.id+'\"><span class=\"glyphicon glyphicon-pencil\"></span></button>';\r\n                    actionButtons += '<button class=\"deleteRole btn btn-default\" data-id=\"'+data.role.id+'\"><span class=\"glyphicon glyphicon-trash\"></span></button>';\r\n\r\n                    //append the newly added role to the table\r\n                    var table = $('#roles-table').DataTable();\r\n                    table.row.add([\r\n                        data.role.id,\r\n                        data.role.name,\r\n                        data.role.description,\r\n                        actionButtons\r\n                    ]).draw();\r\n\r\n                    roleModal.modal('hide');\r\n                }\r\n            },\r\n            error: function(jqXHR,textStatus,errorThrown){\r\n                alert(errorThrown);\r\n                roleModal.modal('hide');\r\n            }\r\n        });\r\n\r\n    });\r\n\r\n    //detect if user checks or unchecked the main sections and hide or show it's sub-permissions\r\n    $(\".main-permission\").change(function() {\r\n\r\n        //get the id of the checkbox\r\n        var checkBoxID = $(this).attr('id');\r\n\r\n        switch(checkBoxID)\r\n        {\r\n            case 'access_contacts':\r\n\r\n                if(this.checked)\r\n                {\r\n                    $('#contactPermissions').show();\r\n                }\r\n                else\r\n                {\r\n                    $('#contactPermissions').hide();\r\n                }\r\n\r\n                break;\r\n\r\n            case 'access_affiliates':\r\n\r\n                if(this.checked)\r\n                {\r\n                    $('#affiliatesPermissions').show();\r\n                }\r\n                else\r\n                {\r\n                    $('#affiliatesPermissions').hide();\r\n                }\r\n\r\n                break;\r\n\r\n            case 'access_campaigns':\r\n\r\n                if(this.checked)\r\n                {\r\n                    $('#campaignPermissions').show();\r\n                    $('#campaignInfoPermissions').show();\r\n                }\r\n                else\r\n                {\r\n                    $('#campaignPermissions').hide();\r\n                    $('#campaignInfoPermissions').hide();\r\n                }\r\n\r\n                break;\r\n\r\n            case 'access_advertisers':\r\n\r\n                if(this.checked)\r\n                {\r\n                    $('#advertisersPermissions').show();\r\n                }\r\n                else\r\n                {\r\n                    $('#advertisersPermissions').hide();\r\n                }\r\n\r\n                break;\r\n\r\n            case 'access_filter_types':\r\n\r\n                if(this.checked)\r\n                {\r\n                    $('#filterTypesPermissions').show();\r\n                }\r\n                else\r\n                {\r\n                    $('#filterTypesPermissions').hide();\r\n                }\r\n\r\n                break;\r\n\r\n            case 'access_revenue_trackers':\r\n\r\n                if(this.checked)\r\n                {\r\n                    $('#revenueTrackersPermissions').show();\r\n                }\r\n                else\r\n                {\r\n                    $('#revenueTrackersPermissions').hide();\r\n                }\r\n\r\n                break;\r\n\r\n            case 'access_gallery':\r\n\r\n                if(this.checked)\r\n                {\r\n                    $('#galleryPermissions').show();\r\n                }\r\n                else\r\n                {\r\n                    $('#galleryPermissions').hide();\r\n                }\r\n\r\n                break;\r\n\r\n            case 'access_categories':\r\n\r\n                if(this.checked)\r\n                {\r\n                    $('#categoriesPermissions').show();\r\n                }\r\n                else\r\n                {\r\n                    $('#categoriesPermissions').hide();\r\n                }\r\n\r\n                break;\r\n        }\r\n    });\r\n\r\n});\r\n\r\n$(document).on('click','.editRole', function()\r\n{\r\n    var roleEditButton = $(this);\r\n    var id = roleEditButton.data('id');\r\n\r\n    //set the hidden id to the modal\r\n    $('#roleID').val(id);\r\n\r\n    //get the modal\r\n    var roleModal = $('#roleModal');\r\n\r\n    //clear all fields in add role modal\r\n    roleModal.find('.permission-input-text').val('');\r\n    roleModal.find('.permission-input-checkbox').removeAttr('checked');\r\n    roleModal.find('.modal-title').html('Edit Role');\r\n\r\n    //hide the error container\r\n    $('.this_error_wrapper').hide();\r\n\r\n    $('#updateRole').show();\r\n    $('#saveRole').hide();\r\n\r\n    //get the data role data from row\r\n    var roleName = $('#roles-'+id+'-name').text();\r\n    var roleDescription = $('#roles-'+id+'-description').text();\r\n\r\n    //get all actions data from the database\r\n    var actionsURL = $('#baseUrl').val()+'roles/'+id+'/actions';\r\n\r\n    $.ajax({\r\n        type: 'GET',\r\n        url: actionsURL,\r\n        success: function(data){\r\n\r\n            var arrayLength = data.length;\r\n\r\n            for(var i=0;i<arrayLength;i++)\r\n            {\r\n                var action = data[i];\r\n\r\n                //determine if checked or not\r\n                roleModal.find('#'+action.code).prop('checked', action.pivot.permitted==1);\r\n            }\r\n\r\n            roleModal.find('#roleName').val(roleName);\r\n            roleModal.find('#description').val(roleDescription);\r\n\r\n            //hide or show sub-permission if their main-permission is checked\r\n            //get all checked items\r\n            $('input:checkbox.main-permission').each(function()\r\n            {\r\n                var checkBoxID = $(this).attr('id');\r\n\r\n                switch(checkBoxID)\r\n                {\r\n                    case 'access_contacts':\r\n\r\n                        if(this.checked)\r\n                        {\r\n                            $('#contactPermissions').show();\r\n                        }\r\n                        else\r\n                        {\r\n                            $('#contactPermissions').hide();\r\n                        }\r\n\r\n                        break;\r\n\r\n                    case 'access_affiliates':\r\n\r\n                        if(this.checked)\r\n                        {\r\n                            $('#affiliatesPermissions').show();\r\n                        }\r\n                        else\r\n                        {\r\n                            $('#affiliatesPermissions').hide();\r\n                        }\r\n\r\n                        break;\r\n\r\n                    case 'access_campaigns':\r\n\r\n                        if(this.checked)\r\n                        {\r\n                            $('#campaignPermissions').show();\r\n                            $('#campaignInfoPermissions').show();\r\n                        }\r\n                        else\r\n                        {\r\n                            $('#campaignPermissions').hide();\r\n                            $('#campaignInfoPermissions').hide();\r\n                        }\r\n\r\n                        break;\r\n\r\n                    case 'access_advertisers':\r\n\r\n                        if(this.checked)\r\n                        {\r\n                            $('#advertisersPermissions').show();\r\n                        }\r\n                        else\r\n                        {\r\n                            $('#advertisersPermissions').hide();\r\n                        }\r\n\r\n                        break;\r\n\r\n                    case 'access_filter_types':\r\n\r\n                        if(this.checked)\r\n                        {\r\n                            $('#filterTypesPermissions').show();\r\n                        }\r\n                        else\r\n                        {\r\n                            $('#filterTypesPermissions').hide();\r\n                        }\r\n\r\n                        break;\r\n\r\n                    case 'access_revenue_trackers':\r\n\r\n                        if(this.checked)\r\n                        {\r\n                            $('#revenueTrackersPermissions').show();\r\n                        }\r\n                        else\r\n                        {\r\n                            $('#revenueTrackersPermissions').hide();\r\n                        }\r\n\r\n                        break;\r\n\r\n                    case 'access_gallery':\r\n\r\n                        if(this.checked)\r\n                        {\r\n                            $('#galleryPermissions').show();\r\n                        }\r\n                        else\r\n                        {\r\n                            $('#galleryPermissions').hide();\r\n                        }\r\n\r\n                        break;\r\n\r\n                    case 'access_categories':\r\n\r\n                        if(this.checked)\r\n                        {\r\n                            $('#categoriesPermissions').show();\r\n                        }\r\n                        else\r\n                        {\r\n                            $('#categoriesPermissions').hide();\r\n                        }\r\n\r\n                        break;\r\n                }\r\n\r\n            });\r\n\r\n            roleModal.modal('show');\r\n        },\r\n        error: function(jqXHR,textStatus,errorThrown){\r\n            alert(errorThrown);\r\n        }\r\n    });\r\n});\r\n\r\n$(document).on('click','.deleteRole', function()\r\n{\r\n    var roleDeleteButton = $(this);\r\n    var id = roleDeleteButton.data('id');\r\n\r\n    if(id==1)\r\n    {\r\n        alert('This role cannot be deleted!');\r\n        return;\r\n    }\r\n\r\n    if(confirm('Are you sure you want to delete this role?'))\r\n    {\r\n        //delete the role\r\n        var deleteURL = $('#baseUrl').val()+'roles/'+id+'/delete';\r\n\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: deleteURL,\r\n            success: function(data){\r\n\r\n                if(data.success)\r\n                {\r\n                    alert(data.message);\r\n\r\n                    //append the newly added role to the table\r\n                    var table = $('#roles-table').DataTable();\r\n                    table.row(roleDeleteButton.parents('tr')).remove().draw();\r\n                }\r\n            },\r\n            error: function(jqXHR,textStatus,errorThrown){\r\n                alert(errorThrown);\r\n            }\r\n        });\r\n    }\r\n});\r\n"]}