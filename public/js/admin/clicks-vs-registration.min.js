$(document).ready(function(){function e(){the_url=t.html()+"/admin/getClicksVsRegsStats";var e=$("#clicks-vs-registration-table"),a=$("#clicks-vs-registration-table tbody"),i=$("#clicks-vs-registration-table tfoot tr"),s=($("#download-clicks-vs-registration-report"),$("#group_by").val());i.find(":nth-child(10)").html(""),i.find(":nth-child(11)").html(""),i.find(":nth-child(12)").html(""),e.DataTable().destroy(),a.empty(),$.ajax({type:"POST",url:the_url,data:{date_from:$("#date_from").val(),date_to:$("#date_to").val(),affiliate_id:$("#affiliate_id").val(),group_by:s,date_range:$("#date_range").val(),s1:$("#s1").val(),s2:$("#s2").val(),s3:$("#s3").val(),s4:$("#s4").val(),s5:$("#s5").val(),sib_s1:$("#sib_s1").prop("checked"),sib_s2:$("#sib_s2").prop("checked"),sib_s3:$("#sib_s3").prop("checked"),sib_s4:$("#sib_s4").prop("checked")},success:function(r){console.log(r),console.log(r.records.length);var d=0,l=0,c=r.affiliates,o=$("#download-clicks-vs-registration-report");if(r.records.length>0){for(var n="",f=0;f<r.affiliate_id.length;f++)n+="&affiliate_id["+f+"]="+r.affiliate_id[f];var _=$("#s1").val(),h=$("#s2").val(),u=$("#s3").val(),p=$("#s4").val(),g=$("#s5").val(),v=t.html()+"/admin/downLoadClicksVsRegistrationReport?"+n+"&date_from="+$("#date_from").val()+"&date_to="+$("#date_to").val()+"&group_by="+s+"&is_download=true&date_range="+$("#date_range").val();v+="&s1="+_+"&s2="+h+"&s3="+u+"&s4="+p+"&s5="+g+"&sib_s1="+$("#sib_s1").prop("checked")+"&sib_s2="+$("#sib_s2").prop("checked")+"&sib_s3="+$("#sib_s3").prop("checked")+"&sib_s4="+$("#sib_s4").prop("checked"),o.attr("href",v),o.removeClass("disabled")}else o.addClass("disabled");$.each(r.records,function(e,t){var i=c[t.affiliate_id],r=Number(t.registration_count),o=Number(t.clicks),n=r>0&&o>0?Number(r/o*100).toFixed(2):0,f="",_="",h="",u="",p="",g="";"created_at"==s?(f=t.created_at,_=$("#sib_s1").prop("checked")?t.s1:"",h=$("#sib_s2").prop("checked")?t.s2:"",u=$("#sib_s3").prop("checked")?t.s3:"",p=$("#sib_s4").prop("checked")?t.s4:"",g=t.s5):"custom"==s?f=t.created_at:"per_sub_id"==s&&(_=t.s1,h=t.s2,u=t.s3,p=t.s4,g=t.s5);var t="<tr><td>"+f+"</td><td>"+i+"</td><td>"+t.affiliate_id+"</td><td>"+t.revenue_tracker_id+"</td><td>"+_+"</td><td>"+h+"</td><td>"+u+"</td><td>"+p+"</td><td>"+g+"</td><td>"+r+"</td><td>"+o+"</td><td>"+n+"%</td></tr>";a.append(t),d+=Number(r),l+=Number(o)}),total_percentage=d>0&&l>0?Number(d/l*100).toFixed(2):0,i.find(":nth-child(10)").html(d),i.find(":nth-child(11)").html(l),i.find(":nth-child(12)").html(total_percentage+"%"),e.DataTable({order:[[1,"asc"]],language:{searchPlaceholder:"Affiliate / Revenue Tracker"},lengthMenu:[[25,50,100,-1],[25,50,100,"All"]]}).draw()}})}var t=$("#baseUrl");$(".input-group.date").datepicker({format:"yyyy-mm-dd",clearBtn:!0,autoclose:!0,todayHighlight:!0}),$("#affiliate_id").select2({placeholder:"Select the id or name of the affiliate.",minimumInputLength:1,maximumSelectionLength:0,theme:"bootstrap",language:{inputTooShort:function(){return"Please enter the id or name of the affiliate. (Enter 1 or more characters)"},searching:function(){return"Searching..."}},ajax:{url:t.html()+"/search/select/activeAffiliatesIDName",dataType:"json",type:"POST",data:function(e){var t={term:e.term};return t},processResults:function(e){return console.log(e),{results:$.map(e.items,function(e){return{text:e.name,id:e.id}})}}}}),$("#remove_affiliate_id_selections").click(function(){$("#affiliate_id").val(null).trigger("change")}),$("#clicks-vs-registration-table").dataTable(),e(),$(document).on("submit",function(t){t.preventDefault(),e()}),$("#clear").click(function(){$(".date-field").val(""),$("#affiliate_id").val("").trigger("change")}),$("#date_range").change(function(){""!=$(this).val()&&($("#date_from").val(""),$("#date_to").val(""))}),$(".date-field").change(function(){""!=$(this).val()&&$("#date_range").val("")}),$("#addAffiliateID").click(function(){var e=$("#affiliate_id").val();console.log(e)}),$("#group_by").change(function(){"created_at"!=$(this).val()?$(".sibs").prop("checked",!0).attr("disabled",!0):$(".sibs").removeAttr("disabled")})});
//# sourceMappingURL=clicks-vs-registration.min.js.map
