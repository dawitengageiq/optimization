function getDashboardGraphStatistics(){var e=baseURL+"/get_dashboard_graphs_by_date";$.ajax({type:"POST",url:e,success:function(e){getDashboardGraphsStatisticsChart(e)}})}function getTopCampaignsByLeads(){var e=$("#date_top_campaigns_by_leads").val(),t=baseURL+"/admin/getTopCampaignsByLeads";$.ajax({type:"POST",url:t,data:{date:e},success:function(t){if(""==e)var a=$("#dateYesterday").html();else var a=e;$("#topCampaignsByLeadsDate").html(a),$("#topCampaignsByLeadsBarChart").html(""),0!=t.length&&Morris.Bar({element:"topCampaignsByLeadsBarChart",data:t,xkey:"lead",ykeys:[1,2],labels:["Success","Rejected"],resize:!0,xLabelMargin:2})}})}function getMostChangeCampaigns(){the_url=baseURL+"/admin/getMostChangeCampaigns";var e=$("#top-ten-campaigns-most-changes"),t=$("#top-ten-campaigns-most-changes tbody");e.DataTable().destroy(),t.empty(),$.ajax({type:"POST",url:the_url,data:{predefined_date_range:$("#predefined_date_range").val(),term:$("#term").val(),affiliates:$("#affiliate_ids_most_changes").val()},success:function(a){$.each(a,function(e,a){console.log(a);var o=parseFloat(a.to.ratio).toFixed(2),n=parseFloat(a.change_factor).toFixed(2),r=parseFloat(a.net).toFixed(2),s="<tr><td>"+a.name+"</td><td>"+o+"</td><td>"+n+" "+a.indicator+"</td><td>"+r+"</td></tr>";t.append(s)}),e.DataTable().draw()}})}function getTotalRevStatsChart(e){console.log(e);var t=e.daily_total_revenue;$("#totalRevenueStatisticsChart").html("");Morris.Line({element:"totalRevenueStatisticsChart",data:t,xkey:"date",ykeys:["received"],labels:["Received"],parseTime:!1,preUnits:"$",hoverCallback:function(e,a,o){return o+" Total Success Leads: "+t[e].total},resize:!0,hideHover:!0})}function getAffRevStatsChart(e){console.log(e);var t=e.daily_revenue_affiliate;$("#receivedStatisticsByAffiliateChart").html("");Morris.Line({element:"receivedStatisticsByAffiliateChart",data:t.data,xkey:"date",ykeys:t.ykeys,labels:t.labels,parseTime:!1,resize:!0,preUnits:"$",hideHover:!0,hoverCallback:function(e,a,o){var n=t.data[e],r='<div class="morris-hover-row-label">'+n.date+"</div>",s='<div class="morris-hover-point" style="color: #0b62a4">Total: $'+n.total_revenue+"</div>",i='<button data-date="'+n.created_at+'" class="downloadAffiliateRevenueReport btn btn-primary btn-xs"><i class="fa fa-file-excel-o" aria-hidden="true"></i></button>';return r+s+i}})}function getAffSurveyersStatsChart(e){console.log(e);var t=e.daily_affilate_registrations;$("#totalSurveyTakersPerAffiliateChart").html("");Morris.Line({element:"totalSurveyTakersPerAffiliateChart",data:t.data,xkey:"date",ykeys:t.ykeys,labels:t.labels,parseTime:!1,hoverCallback:function(e,a,o){var n=t.data[e],r='<div class="morris-hover-row-label">'+n.date+"</div>",s='<div class="morris-hover-point" style="color: #0b62a4">Total: '+n.total_registrations+"</div>",i='<button data-date="'+n.created_at+'" class="downloadAffiliateRegistrationsReport btn btn-primary btn-xs"><i class="fa fa-file-excel-o" aria-hidden="true"></i></button>';return r+s+i},resize:!0,hideHover:!0})}var baseURL=$("#baseUrl").val();$(document).on("click","#update-top-ten-most-changes-report",function(e){e.preventDefault(),console.log("update"),getMostChangeCampaigns()}),$(document).on("click",".close_me_popover",function(e){e.preventDefault(),console.log("CLOSE"),$(this).parents(".popover").popover("hide")}),$(document).ready(function(){function e(){if(!$.fn.DataTable.isDataTable("#notes_category-table")){the_url=baseURL+"/notes_category";var e=$("#notes_category-table"),t=$("#notes_category-table tbody");$.ajax({type:"POST",url:the_url,success:function(a){t.empty(),nCatList.empty(),$.each(a.categories,function(e,a){var o='<button data-id="'+a.id+'" class="editNoteCategoryBtn btn btn-primary btn-xs" type="button" style="margin-right:5px"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>',n='<button data-id="'+a.id+'" class="deleteNoteCategoryBtn btn btn-danger btn-xs" type="button"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>',r="<tr><td>"+a.id+"</td><td>"+a.name+"</td><td>"+o+n+"</td></tr>";t.append(r),nCatList.append('<a href="#" data-id="'+a.id+'" class="list-group-item">'+a.name+' <span class="badge"></span></a>')}),e.DataTable().draw(),$("#notesCategoryList > a span").html(""),$.each(a.tracking,function(e,t){$('#notesCategoryList > a[data-id="'+t.category_id+'"] span').html(t.count)})}})}}function t(e){$("#notesCategoryList a").removeClass("active"),$('#notesCategoryList a[data-id="'+e+'"]').addClass("active"),$(".nCat-notes-div").show(),$(".nCat-note-div").hide(),nNotesList.html(loadingLink),$.ajax({type:"POST",url:baseURL+"/get_notes_by_category/"+e,success:function(t){theNoteIds.push(e),nNotesList.empty();var a=[],o=0;0==t.length?nNotesList.append(noNotesStr):$.each(t,function(t,n){a[n.id]=n;var r=null===n.ifNew?"new_note":"";null===n.ifNew&&o++,nNotesList.append('<a href="#" data-id="'+n.id+'" data-cat="'+e+'" class="list-group-item '+r+'">'+n.subject+"</a>")}),theNotes[e]=a;var n=0==o?"":o;$('#notesCategoryList > a[data-id="'+e+'"] span').html(n)}})}var a=$("#offer-goes-down").DataTable({processing:!0,serverSide:!0,order:[[0,"desc"]],searching:!1,ajax:{url:$("#baseUrl").val()+"/dashboard/offerGoesDownStats",type:"post",data:function(e){e.filter=$("#ogd_filter").val()},error:function(e){console.log(e)}},ordering:!1,drawCallback:function(e){$('[data-toggle="popover"]').popover({placement:"bottom",html:"true",title:'<span style="color:#f7f7f7"><strong>title</strong></span><button type="button" class="close close_me_popover">&times;</button>'})},lengthMenu:[[20,50,100,250],[20,50,100,250]],sDom:'l<"offer-goes-down_Toolbar">frtip'});$("div.offer-goes-down_Toolbar").html('<label>Filter Revenue: </label><input type="number" name="ogd_filter" id="ogd_filter" class="form-control" value="30">'),$(document).on("change","#ogd_filter",function(){console.log("Refresh"),a.clear(),a.ajax.reload()}),$("#allInbox-table").DataTable({processing:!0,serverSide:!0,order:[[0,"desc"]],searching:!1,ajax:{url:$("#baseUrl").val()+"/dashboard/campaignRevenueBreakdown/"+$("#allInboxCampaignID").val(),type:"post",error:function(e){console.log(e)}},lengthMenu:[[20,50,100,250],[20,50,100,250]]}),$("#pushPros-table").DataTable({processing:!0,serverSide:!0,order:[[0,"desc"]],searching:!1,ajax:{url:$("#baseUrl").val()+"/dashboard/campaignRevenueBreakdown/"+$("#pushProCampaignID").val(),type:"post",error:function(e){console.log(e)}},lengthMenu:[[20,50,100,250],[20,50,100,250]]}),$("#path6-table").DataTable({processing:!0,serverSide:!0,order:[[0,"desc"]],searching:!1,ajax:{url:$("#baseUrl").val()+"/dashboard/pathSpeed/path6",type:"post",error:function(e){console.log(e)}},lengthMenu:[[20,50,100,250],[20,50,100,250]]}),$("#path18-table").DataTable({processing:!0,serverSide:!0,order:[[0,"desc"]],searching:!1,ajax:{url:$("#baseUrl").val()+"/dashboard/pathSpeed/path18",type:"post",error:function(e){console.log(e)}},lengthMenu:[[20,50,100,250],[20,50,100,250]]}),$("#path19-table").DataTable({processing:!0,serverSide:!0,order:[[0,"desc"]],searching:!1,ajax:{url:$("#baseUrl").val()+"/dashboard/pathSpeed/path19",type:"post",error:function(e){console.log(e)}},lengthMenu:[[20,50,100,250],[20,50,100,250]]}),$("#path17-table").DataTable({processing:!0,serverSide:!0,order:[[0,"desc"]],searching:!1,ajax:{url:$("#baseUrl").val()+"/dashboard/pathSpeed/path17",type:"post",error:function(e){console.log(e)}},lengthMenu:[[20,50,100,250],[20,50,100,250]]}),$("#top-ten-campaigns-most-changes").dataTable(),getMostChangeCampaigns(),$('.active_tooltip[data-toggle="tooltip"]').tooltip(),$(".input-group.date").datepicker({format:"yyyy-mm-dd",clearBtn:!0,autoclose:!0,todayHighlight:!0,endDate:"-0d"}),$("#getStatisticsByDateModal").on("hidden.bs.modal",function(){console.log("Close"),$("#from_date").val(""),$("#to_date").val("")}),$("#getTopCampaignsByDateSubmit").click(function(){getTopCampaignsByLeads()}),$(".refreshGraphs").click(function(){console.log("Refresh"),$("#from_date").val(""),$("#to_date").val(""),$("#getStatisticsByDateForm").trigger("submit")}),getTopCampaignsByLeads(),the_url=baseURL+"/admin/topTenCampaignsByRevenueYesterday",$.ajax({type:"POST",url:the_url,success:function(e){var t=$("#top-ten-revenue-yesterday-campaign tbody");0==e.length?t.find("em").html("No data found."):(t.empty(),jQuery.each(e,function(e,a){var o="<tr><td>"+a.campaign+"</td><td>"+Number(a.revenue).toFixed(2)+"</td></tr>";t.append(o)}))}}),the_url=baseURL+"/admin/topTenCampaignsByRevenueForCurrentWeek",$.ajax({type:"POST",url:the_url,success:function(e){var t=$("#top-ten-revenue-week-campaign tbody");0==e.length?t.find("em").html("No data found."):(t.empty(),jQuery.each(e,function(e,a){var o="<tr><td>"+a.campaign+"</td><td>"+Number(a.revenue).toFixed(2)+"</td></tr>";t.append(o)}))}}),the_url=baseURL+"/admin/topTenCampaignsByRevenueForCurrentMonth",$.ajax({type:"POST",url:the_url,success:function(e){var t=$("#top-ten-revenue-month-campaign tbody");0==e.length?t.find("em").html("No data found."):(t.empty(),jQuery.each(e,function(e,a){var o="<tr><td>"+a.campaign+"</td><td>"+Number(a.revenue).toFixed(2)+"</td></tr>";t.append(o)}))}}),the_url=baseURL+"/admin/topTenAffiliatesByRevenueYesterday",$.ajax({type:"POST",url:the_url,success:function(e){var t=$("#top-ten-revenue-yesterday-affiliate tbody");0==e.length?t.find("em").html("No data found."):(t.empty(),jQuery.each(e,function(e,a){var o="<tr><td>"+a.affiliate+"<td><td>"+Number(a.revenue).toFixed(2)+"</td></tr>";t.append(o)}))}}),the_url=baseURL+"/admin/topTenAffiliatesByRevenueForCurrentWeek",$.ajax({type:"POST",url:the_url,success:function(e){var t=$("#top-ten-revenue-week-affiliate tbody");0==e.length?t.find("em").html("No data found."):(t.empty(),jQuery.each(e,function(e,a){var o="<tr><td>"+a.affiliate+"<td><td>"+Number(a.revenue).toFixed(2)+"</td></tr>";t.append(o)}))}}),the_url=baseURL+"/admin/topTenAffiliatesByRevenueForCurrentMonth",$.ajax({type:"POST",url:the_url,success:function(e){var t=$("#top-ten-revenue-month-affiliate tbody");0==e.length?t.find("em").html("No data found."):(t.empty(),jQuery.each(e,function(e,a){var o="<tr><td>"+a.affiliate+"<td><td>"+Number(a.revenue).toFixed(2)+"</td></tr>";t.append(o)}))}}),the_url=baseURL+"/admin/leadCounts",$.ajax({type:"POST",url:the_url,success:function(e){jQuery.each(e,function(e,t){$(t.lead_type).html(t.lead_count)})}}),$("#affiliate_ids_most_changes").select2({placeholder:"Select the id or name of the affiliate.",minimumInputLength:1,theme:"bootstrap",language:{inputTooShort:function(e){return"Please enter the id or name of the affiliate. (Enter 1 or more characters)"}},ajax:{url:$("#baseUrl").html()+"/search/select/activeAffiliatesIDName",dataType:"json",type:"POST",data:function(e){var t={term:e.term};return t},processResults:function(e){return{results:$.map(e.items,function(e){return{text:e.name,id:e.id}})}}}});var o=$('button[data-target="#noteCategoryCollapse"]'),n=o.html(),r='<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>';nCatForm=$("#notes_category_form"),nCatAddUrl=$("#baseUrl").html()+"/add_notes_category",nCatEditUrl=$("#baseUrl").html()+"/edit_notes_category",nCatList=$("#notesCategoryList"),nNotesList=$("#notesList"),theNotes=[],theNoteIds=[],loadingLink='<a href="#" class="list-group-item text-center"><small><em>Loading...</em></small></a>',nNoteForm=$("#notes_form"),nNoteAddUrl=$("#baseUrl").html()+"/add_note",nNoteEditUrl=$("#baseUrl").html()+"/edit_note",notesQuill=document.getElementsByClassName("ql-editor"),noNotesStr='<a href="#" class="list-group-item text-center isEmpty"><small><em>No Notes Found...</em></small></a>',e();var s=[["bold","italic","underline","strike"],["blockquote"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],i=new Quill("#noteEditorQuill",{modules:{toolbar:s},theme:"snow"});i.on("text-change",function(e,t){nNoteForm.find('[name="content"]').html(i.container.firstChild.innerHTML)}),$("#noteCategoryCollapse").on("hidden.bs.collapse",function(){o.html(n),$(nCatForm).attr("action",nCatAddUrl),$(nCatForm).attr("data-process","add_notes_category").data("process","add_notes_category"),$(nCatForm).find('[name="name"]').val(""),$(nCatForm).find('[name="id"]').val("")}),$("#noteCategoryCollapse").on("show.bs.collapse",function(){o.html(r),$(nCatForm).find(".error").removeClass("error error_label error_field")}),$(document).on("click",".editNoteCategoryBtn",function(){var e=$(this).data("id"),t=$(this),a=(t.closest("tr"),$(this).closest("tr").find("td:nth-child(2)").html());$(nCatForm).attr("action",nCatEditUrl),$(nCatForm).attr("data-process","edit_notes_category").data("process","edit_notes_category"),$(nCatForm).find('[name="id"]').val(e),$(nCatForm).find('[name="name"]').val(a),$("#noteCategoryCollapse").collapse("show")}),$(document).on("click",".deleteNoteCategoryBtn",function(){var e=$(this),t=$(this).data("id"),a=confirm("Are you sure you want to delete this category?");if(a===!0){var o=$("#baseUrl").html()+"/delete_notes_category";$.ajax({type:"POST",url:o,data:{id:t},success:function(a){var o=$("#notes_category-table").DataTable();o.row(e.parents("tr")).remove().draw(),$('#notesCategoryList a[data-id="'+t+'"]').remove()}})}}),$(document).on("click","#notesCategoryList > a",function(e){e.preventDefault();var a=$(this).data("id");"undefined"!=typeof a&&($(this).hasClass("active")||t(a))}),$(document).on("click","#notesList > a",function(e){e.preventDefault();var t=$(this).data("id"),a=$(this).data("cat");if("undefined"!=typeof t&&!$(this).hasClass("active")){$("#notesList a").removeClass("active"),$(this).addClass("active"),$(".nCat-note-div").show(),$(nNoteForm).attr("action",nNoteEditUrl),$(nNoteForm).attr("data-process","edit_note").data("process","edit_note");var o=theNotes[a][t];if(notesQuill[0].innerHTML=o.content,nNoteForm.find('[name="subject"]').val(o.subject),nNoteForm.find('[name="category_id"]').val(o.category_id),nNoteForm.find('[name="id"]').val(o.id),$(this).hasClass("new_note")){$(this).removeClass("new_note"),theNotes[a][t].ifNew=1;var n=Number($('#notesCategoryList a[data-id="'+a+'"] span').html());newCountStr=n-1==0?"":n-1,$('#notesCategoryList a[data-id="'+a+'"] span').html(newCountStr),$.ajax({type:"POST",url:baseURL+"/notes/"+t+"/viewed"})}$(".noteInfo").show(),nNoteForm.find("#updated_at").html(o.updated_at)}}),$(document).on("click","#addNoteBtn",function(e){e.preventDefault();var t=$("#notesCategoryList a.active").data("id");$("#notesList a").removeClass("active"),$(nNoteForm).attr("action",nNoteAddUrl),$(nNoteForm).attr("data-process","add_note").data("process","add_note"),nNoteForm.find('[name="subject"]').val(""),nNoteForm.find('[name="category_id"]').val(t),nNoteForm.find('[name="id"]').val(""),notesQuill[0].innerHTML="",$(".nCat-note-div").show(),$(".noteInfo").hide()}),$(document).on("click","#deleteNote",function(e){e.preventDefault();var a=$("#notesCategoryList a.active").data("id"),o=$("#notesList a.active").data("id"),n=confirm("Are you sure you want to delete this note?");if(n===!0){var r=$("#baseUrl").html()+"/delete_note";$.ajax({type:"POST",url:r,data:{id:o},success:function(e){t(a)}})}})}),$(document).on("click",".downloadAffiliateRevenueReport",function(){console.log("REVENUE"),$("#report_type").val("revenue");var e,t;"undefined"==typeof $(this).data("date")?(e=""==$("#currentFromDate").html()?$("#date7DaysAgo").html():$("#currentFromDate").html(),t=""==$("#currentToDate").html()?$("#dateYesterday").html():$("#currentToDate").html()):(e=$(this).data("date"),t=$(this).data("date")),$("#report_from_date").val(e),$("#report_to_date").val(t),form=$("#downloadReportForm"),form.submit()}),$(document).on("click",".downloadAffiliateRegistrationsReport",function(){console.log("REGISTRATIONS"),$("#report_type").val("registration");var e,t;"undefined"==typeof $(this).data("date")?(e=$("#currentFromDate").html(),t=$("#currentToDate").html()):(e=$(this).data("date"),t=$(this).data("date")),$("#report_from_date").val(e),$("#report_to_date").val(t),form=$("#downloadReportForm"),form.submit()}),$(document).on("submit","#getStatisticsByDateForm",function(e){e.preventDefault(),console.log("SUBMIT");var t=$("#from_date").val(),a=$("#to_date").val(),o=$("#getStatisticsByDateForm"),n=o.serialize(),r=!0,s=0;if($("#from_date").removeClass("error_field error"),$("#to_date").removeClass("error_field error"),""==t&&""==a||a<t&&(r=!1,$("#from_date").addClass("error_field error"),$("#to_date").addClass("error_field error")),$("#currentFromDate").html(t),$("#currentToDate").html(a),r){var i=baseURL+"/dashboard_rev_stats";$.ajax({type:"POST",data:n,url:i,success:function(e){s++,console.log(s),getTotalRevStatsChart(e),s>=3&&$("#getStatisticsByDateModal").modal("hide")}});var i=baseURL+"/dashboard_affiliate_rev_stats";$.ajax({type:"POST",data:n,url:i,success:function(e){s++,console.log(s),getAffRevStatsChart(e),s>=3&&$("#getStatisticsByDateModal").modal("hide")}});var i=baseURL+"/dashboard_survey_takers";$.ajax({type:"POST",data:n,url:i,success:function(e){s++,console.log(s),getAffSurveyersStatsChart(e),s>=3&&$("#getStatisticsByDateModal").modal("hide")}})}});
//# sourceMappingURL=dashboard.min.js.map
