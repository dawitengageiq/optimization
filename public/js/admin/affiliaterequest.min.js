function populateAffiliateRequestDataTable(e,a,t){var i=$("#baseUrl").html()+"/apply_to_run";return $(e).DataTable({processing:!0,serverSide:!0,columns:[null,null,null,null,{orderable:!1}],ajax:{url:i,type:"post",data:{status:a},error:function(){}},columnDefs:[{targets:[t],visible:!1}],lengthMenu:[[10,50,100,-1],[10,50,100,"All"]]})}function processIdentifier(e,a){switch(e){case"approve_affiliate_campaign_request":approveAffiliateApplyToRunRequest(a);break;case"reject_affiliate_campaign_request":rejectAffiliateApplyToRunRequest(a);break;case"revert_affiliate_campaign_request":revertAffiliateApplyToRunRequest(a);break;default:alert("unknown process!")}}function approveAffiliateApplyToRunRequest(e){var a=$("#pendingAffiliateRequests-table").DataTable();a.row($('.approveRequestBtn[data-id="'+e+'"]').parents("tr")).remove().draw(),updatedActiveTable=1,$("#confirmationModal").modal("hide")}function rejectAffiliateApplyToRunRequest(e){var a=$("#pendingAffiliateRequests-table").DataTable();a.row($('.rejectRequestBtn[data-id="'+e+'"]').parents("tr")).remove().draw(),updatedRejectTable=1,$("#confirmationModal").modal("hide")}function revertAffiliateApplyToRunRequest(e){console.log(e);var a=$("#rejectedAffiliateRequests-table").DataTable();a.row($('.revertRequestBtn[data-id="'+e+'"]').parents("tr")).remove().draw();var t=$("#pendingAffiliateRequests-table").DataTable();t.ajax.reload(),$("#confirmationModal").modal("hide")}var updatedActiveTable=0,updatedRejectTable=0,updatedDeactivatedTable=0;$(document).ready(function(){var e,a,t,i=(populateAffiliateRequestDataTable("#pendingAffiliateRequests-table",2,0),$("#baseUrl").html());$('[href="#active-tab"]').click(function(){var a="#activeAffiliateRequests-table";$.fn.DataTable.isDataTable(a)||($("#active-loading").hide(),$("#active-data").show(),e=populateAffiliateRequestDataTable(a,1,-1)),0!=updatedActiveTable&&(console.log("Active"),updatedActiveTable=0,e.ajax.reload())}),$('[href="#rejected-tab"]').click(function(){var e="#rejectedAffiliateRequests-table";$.fn.DataTable.isDataTable(e)||($("#rejected-loading").hide(),$("#rejected-data").show(),a=populateAffiliateRequestDataTable(e,3,null)),0!=updatedRejectTable&&(console.log("Reject"),updatedRejectTable=0,a.ajax.reload())}),$('[href="#deactivated-tab"]').click(function(){var e="#deactivatedAffiliateRequests-table";$.fn.DataTable.isDataTable(e)?console.log("Rejected"):($("#deactivated-loading").hide(),$("#deactivated-data").show(),t=populateAffiliateRequestDataTable(e,0,-1))}),$(document).on("submit",".confirmation-form",function(e){e.preventDefault();var a=$(this),t=a.serialize(),i=a.attr("action");$.ajax({type:"POST",data:t,url:i,success:function(e){console.log("Success"),processIdentifier(a.data("process"),e)}})}),$("#confirmationModal").on("hidden.bs.modal",function(e){$("#confirmationHeader").removeClass("success-modal-header primary-modal-header danger-modal-header"),$("#confirmationButton").removeClass("btn-success btn-danger")}),$(document).on("click",".approveRequestBtn",function(){var e=$(this).data("id"),a=$(".confirmation-form");a.attr("action",i+"/approve_affiliate_campaign_request"),a.attr("data-process","approve_affiliate_campaign_request").data("process","approve_affiliate_campaign_request"),$("#affiliate_campaign_request_id").val(e);var t="You are about to approve <strong>"+$("#rqst-"+e+"-aff").html()+"'s</strong> request to run <strong>"+$("#rqst-"+e+"-cmp").html()+".</strong>";$("#confirmation-description").html(t),$("#confirmationHeader").addClass("success-modal-header"),$("#confirmationButton").addClass("btn-success"),$("#confirmationModal").modal("show")}),$(document).on("click",".rejectRequestBtn",function(){var e=$(this).data("id"),a=$(".confirmation-form");a.attr("action",i+"/reject_affiliate_campaign_request"),a.attr("data-process","reject_affiliate_campaign_request").data("process","reject_affiliate_campaign_request"),$("#affiliate_campaign_request_id").val(e);var t="You are about to reject <strong>"+$("#rqst-"+e+"-aff").html()+"'s</strong> request to run <strong>"+$("#rqst-"+e+"-cmp").html()+".</strong>";$("#confirmation-description").html(t),$("#confirmationHeader").addClass("danger-modal-header"),$("#confirmationButton").addClass("btn-danger"),$("#confirmationModal").modal("show")}),$(document).on("click",".revertRequestBtn",function(){var e=$(this).data("id"),a=$(".confirmation-form");a.attr("action",i+"/revert_affiliate_campaign_request"),a.attr("data-process","revert_affiliate_campaign_request").data("process","revert_affiliate_campaign_request"),$("#affiliate_campaign_request_id").val(e);var t="You are about to revert <strong>"+$("#rqst-"+e+"-aff").html()+"'s</strong> request to run <strong>"+$("#rqst-"+e+"-cmp").html()+"</strong> to pending.";$("#confirmation-description").html(t),$("#confirmationHeader").addClass("danger-modal-header"),$("#confirmationButton").addClass("btn-danger"),$("#confirmationModal").modal("show")})});
//# sourceMappingURL=affiliaterequest.min.js.map
