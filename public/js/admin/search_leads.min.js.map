{"version":3,"sources":["search_leads.js"],"names":["$","document","ready","on","zIndex","length","this","css","setTimeout","not","addClass","draggable","handle","select2","theme","searchLeadsTable","DataTable","responsive","order","lengthMenu","columnDefs","width","targets","searching","e","console","log","prop","show","hide","val","trigger","preventDefault","removeClass","from_date","to_date","submit","hasClass","click","form","find","removeAttr","lead","leadID","data","leadName","leadRCount","leadRDate","getDetailsURL","the_table","html","ajax","type","url","table","success","leadDataCSV","value","leadMessage","leadDataADV","leadSentResult","modal","error","event","datepicker","format","clearBtn","autoclose","todayHighlight","each","i","row","tableRow","tableName","leadIDs","checkBox","undefined","push","strLeadIDs","substr","alert","keyup","max_high","Number","min_critical","btn","attr","rates","remove","keywords","key","words","name","names","append"],"mappings":"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","file":"search_leads.min.js","sourcesContent":["$(document).ready(function()\r\n{\r\n    $(document).on('show.bs.modal', '.modal', function () {\r\n        var zIndex = 1040 + (10 * $('.modal:visible').length);\r\n        $(this).css('z-index', zIndex);\r\n        setTimeout(function() {\r\n            $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');\r\n        }, 0);\r\n    });\r\n    $('.draggable-drilldown-modal').draggable({\r\n        handle: \".modal-header\"\r\n    });\r\n\r\n    // var the_url = $('#baseUrl').html() + '/getSearchLeads';\r\n    // var searchLeadsTable = $('#leads-table').DataTable({\r\n    //     responsive: true,\r\n    //     \"order\": [[ 0, \"desc\" ]],\r\n    //     lengthMenu: [[25,50,100,1000,2000,3000],[25,50,100,1000,2000,3000]],\r\n    //     columnDefs: [\r\n    //         { width: '7%', targets: 0 },\r\n    //         { width: '1%', targets: [9,10] }\r\n    //     ],\r\n    //     \"searching\": false,\r\n    //     'processing': true,\r\n    //     'serverSide': true,\r\n    //     'ajax':{\r\n    //         url:the_url, // json datasource\r\n    //         type: 'post',\r\n    //         // 'data': $('#search-leads').serialize(),\r\n    //         'data': function(d)\r\n    //         {\r\n    //             d.lead_id = $('#lead_id').val();\r\n    //             d.campaign_id = $('#campaign_id').val();\r\n    //             d.affiliate_id = $('#affiliate_id').val();\r\n    //             d.lead_email = $('#lead_email').val();\r\n    //             d.lead_status = $('#lead_status').val();\r\n    //             d.lead_date_from = $('#lead_date_from').val();\r\n    //             d.lead_date_to = $('#lead_date_to').val();\r\n    //             d.s1 = $('#s1').val();\r\n    //             d.s2 = $('#s2').val();\r\n    //             d.s3 = $('#s3').val();\r\n    //             d.s4 = $('#s4').val();\r\n    //             d.s5 = $('#s5').val();\r\n    //             d.table = $('#table').val();\r\n    //         },\r\n    //         \"dataSrc\": function ( json ) {\r\n    //             // alert(\"Done!\");\r\n    //             $('#downloadSearchedLeads').removeAttr('disabled');\r\n    //             console.log('Load');\r\n    //             return json.data;\r\n    //         },\r\n    //         error: function(data){  // error handling\r\n    //             console.log(data);\r\n    //         }\r\n    //     },\r\n    //     lengthMenu: [[25,50,100,1000,2000,3000],[25,50,100,1000,2000,3000]]\r\n    // });\r\n\r\n    $('.campaignField').select2({\r\n        theme: 'bootstrap'\r\n    });\r\n\r\n    var searchLeadsTable = $('#leads-table').DataTable({\r\n        responsive: true,\r\n        \"order\": [[ 0, \"desc\" ]],\r\n        lengthMenu: [[25,50,100,1000,2000,3000],[25,50,100,1000,2000,3000]],\r\n        columnDefs: [\r\n            { width: '7%', targets: 0 },\r\n            { width: '1%', targets: [9,10] }\r\n        ],\r\n        \"searching\": false\r\n        // lengthMenu: [[25,50,100,1000,2000,3000],[25,50,100,1000,2000,3000]]\r\n    });\r\n\r\n    $(document).on('change','#show_inactive_campaign',function(e)\r\n    {\r\n        console.log($(this).prop('checked'))\r\n        if($(this).prop('checked')) {\r\n            $('#showAllCampaigns-container').show();\r\n            $('#showActiveCampaigns-container').hide();\r\n            $('#realCampaignId').val($('[name=\"fake_campaign_id_all\"]').val());\r\n        }else {\r\n            $('#showAllCampaigns-container').hide();\r\n            $('#showActiveCampaigns-container').show();\r\n            $('#realCampaignId').val($('[name=\"fake_campaign_id_active\"]').val());\r\n        }\r\n    });\r\n\r\n    $(document).on('change','[name=\"fake_campaign_id_all\"]',function(e)\r\n    {\r\n        console.log('all');\r\n        console.log($(this).val())\r\n        if($('#show_inactive_campaign').prop('checked')) {\r\n            $('#realCampaignId').val($('[name=\"fake_campaign_id_all\"').val());\r\n            console.log('update the other one');\r\n            $('[name=\"fake_campaign_id_active\"]').val($(this).val()).trigger('change');\r\n        }\r\n        \r\n    });\r\n\r\n    $(document).on('change','[name=\"fake_campaign_id_active\"]',function(e)\r\n    {\r\n        console.log('active');\r\n        console.log($(this).val())\r\n        if(!$('#show_inactive_campaign').prop('checked')) {\r\n            $('#realCampaignId').val($('[name=\"fake_campaign_id_active\"').val());\r\n            console.log('update the other one');\r\n            $('[name=\"fake_campaign_id_all\"]').val($(this).val()).trigger('change');\r\n        }\r\n    });\r\n\r\n    $(document).on('click','#searchedLeadsBtn',function(e)\r\n    {\r\n        e.preventDefault();\r\n        $('label[for=\"lead_date_from\"]').removeClass('error_label error');\r\n        $('#lead_date_from').removeClass('error_field error');\r\n        $('label[for=\"lead_date_to\"]').removeClass('error_label error');\r\n        $('#lead_date_to').removeClass('error_field error');\r\n\r\n        console.log('Test');\r\n        var from_date = $('#lead_date_from').val(),\r\n            to_date = $('#lead_date_to').val();\r\n\r\n        if(from_date == '' || to_date == '') {\r\n            $('#search-leads').submit();\r\n            // $('#downloadSearchedLeads').attr('disabled',true);\r\n            // searchLeadsTable.ajax.reload();\r\n        } else if(from_date != '' && to_date != '' && to_date >= from_date) {\r\n            $('label[for=\"lead_date_from\"]').removeClass('error_label error');\r\n            $('#lead_date_from').removeClass('error_field error');\r\n            $('label[for=\"lead_date_to\"]').removeClass('error_label error');\r\n            $('#lead_date_to').removeClass('error_field error');\r\n            $('#search-leads').submit();\r\n            // $('#downloadSearchedLeads').attr('disabled',true);\r\n            // searchLeadsTable.ajax.reload();\r\n        } else {\r\n            $('label[for=\"lead_date_from\"]').addClass('error_label error');\r\n            $('#lead_date_from').addClass('error_field error');\r\n            $('label[for=\"lead_date_to\"]').addClass('error_label error');\r\n            $('#lead_date_to').addClass('error_field error');\r\n        }\r\n    });\r\n\r\n    $('#leads-table tbody').on( 'click', 'tr', function () {\r\n        if ( $(this).hasClass('selected') ) {\r\n            $(this).removeClass('selected');\r\n        } else {\r\n            searchLeadsTable.$('tr.selected').removeClass('selected');\r\n            $(this).addClass('selected');\r\n        }\r\n    });\r\n\r\n    // $('#table').change(function()\r\n    // {\r\n    //     var selectedTable = $(this).val();\r\n    //\r\n    //     if(selectedTable=='leads')\r\n    //     {\r\n    //         //show the resend button\r\n    //         $('#resend-leads').show();\r\n    //     }\r\n    //     else\r\n    //     {\r\n    //         $('#resend-leads').hide();\r\n    //     }\r\n    // });\r\n\r\n    $('#clear').click(function()\r\n    {\r\n        var form = $('#search-leads');\r\n\r\n        form.find('input:text, input:password, input:file, select, textarea').val('');\r\n        form.find('input:radio, input:checkbox').removeAttr('checked').removeAttr('selected');\r\n        $('#realCampaignId').val('');\r\n        $('.campaignField').trigger('change.select2');\r\n        $('#limit_rows').val(200);\r\n        $('#table').val('leads');\r\n    });\r\n\r\n    $(document).on('click','.show-details',function()\r\n    {\r\n        var lead = $(this),\r\n            leadID = lead.data('lead_id'),\r\n            leadName = lead.data('name'),\r\n            leadRCount = lead.data('rcount'),\r\n            leadRDate = lead.data('rdate'),\r\n            getDetailsURL = '',\r\n            the_table = $('#table').val();\r\n\r\n        \r\n        if(the_table == 'leads_archive') {\r\n            getDetailsURL = $('#baseUrl').val()+'/admin/leadsArchive/'+leadID+'/getLeadDetails';\r\n        }else {\r\n            getDetailsURL = $('#baseUrl').val()+'/admin/leads/'+leadID+'/getLeadDetails';\r\n        }\r\n        console.log(getDetailsURL);\r\n\r\n        /* Modal Name */\r\n        $('#lead_details_modal .modal-title').html('Leads Detail: <b>' + leadID + ' - ' + leadName + '</b>');\r\n\r\n        // console.log(leadID);\r\n\r\n        $('#id').val(leadID);\r\n\r\n        $('#retry_count').val(leadRCount);\r\n        $('#retry_date').val(leadRDate);\r\n\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: getDetailsURL,\r\n            data: {\r\n                table : the_table\r\n            },\r\n            success: function(data)\r\n            {\r\n                console.log(data);\r\n\r\n                // if(data.leadDataCSV!==undefined || data.leadDataCSV!==null)\r\n                if(data.leadDataCSV)\r\n                {\r\n                    $('#lead_csv').val(data.leadDataCSV.value)\r\n                }\r\n\r\n                //if(data.leadMessage!==undefined || data.leadMessage!==null)\r\n                if(data.leadMessage)\r\n                {\r\n                    $('#message').val(data.leadMessage.value)\r\n                }\r\n\r\n                // if(data.leadDataADV!==undefined || data.leadDataADV!==null)\r\n                if(data.leadDataADV)\r\n                {\r\n                    $('#advertiser_data').val(data.leadDataADV.value)\r\n                }\r\n\r\n                //if(data.leadSentResult!==undefined || data.leadSentResult!==null)\r\n                if(data.leadSentResult)\r\n                {\r\n                    $('#sent_result').val(data.leadSentResult.value)\r\n                }\r\n                $('#lead_details_modal').modal('show');\r\n            },\r\n            error: function(data)\r\n            {\r\n                console.log(data);\r\n            }\r\n        });\r\n\r\n        //$('#lead_details_modal').modal('show');\r\n    });\r\n\r\n    $('#lead_details_modal').on('hide.bs.modal', function (event)\r\n    {\r\n        $('#lead_csv').val('');\r\n        $('#message').val('');\r\n        $('#advertiser_data').val('');\r\n        $('#sent_result').val('');\r\n    });\r\n\r\n    $('.input-group.date').datepicker({\r\n        format: \"yyyy-mm-dd\",\r\n        clearBtn: true,\r\n        autoclose: true,\r\n        todayHighlight: true\r\n    });\r\n\r\n    $('#select-all').click(function()\r\n    {\r\n        //$('#leads-table').closest('tr').find('.checkbox').prop('checked', this.checked);\r\n        $('#leads-table tr').each(function(i,row){\r\n            var tableRow = $(row);\r\n            tableRow.find('.checkbox').prop('checked',true);\r\n        });\r\n    });\r\n\r\n    $('#de-select-all').click(function()\r\n    {\r\n        $('#leads-table tr').each(function(i,row){\r\n            var tableRow = $(row);\r\n            tableRow.find('.checkbox').prop('checked',false);\r\n        });\r\n    });\r\n\r\n    $('#resend-leads').click(function()\r\n    {\r\n        console.log('resend leads');\r\n\r\n        // get the table\r\n        var tableName = $(this).data('table');\r\n        console.log('table: '+tableName);\r\n\r\n        var url = $('#baseUrl').val() + '/updateLeadsToPendingStatus/';\r\n        var leadIDs = [];\r\n\r\n        //get all lead id\r\n        $('#leads-table tr').each(function(i,row){\r\n            var tableRow = $(row);\r\n            var checkBox = tableRow.find('.checkbox');\r\n            var leadID = checkBox.data('lead_id');\r\n\r\n            if(checkBox.prop('checked') && leadID!==undefined)\r\n            {\r\n                leadIDs.push(leadID);\r\n            }\r\n        });\r\n\r\n        var strLeadIDs = '';\r\n        // pass all ids via url\r\n        for(var i=0;i<leadIDs.length;i++)\r\n        {\r\n            strLeadIDs += leadIDs[i]+',';\r\n        }\r\n\r\n        // remove the last comma\r\n        strLeadIDs = strLeadIDs.substr(0,strLeadIDs.length-1);\r\n        console.log(strLeadIDs);\r\n\r\n        if(strLeadIDs !== ''){\r\n            url += strLeadIDs;\r\n            // include the table name in the request\r\n            url += '?table='+tableName;\r\n\r\n            console.log(url);\r\n\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: url,\r\n                success: function(data)\r\n                {\r\n                    console.log(data);\r\n                    alert('Leads updated to pending!');\r\n                    //submit the form to refresh the entire page\r\n                    $('#search-leads').submit();\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    // $('#search-leads').submit(function() {\r\n    //     $('#searchedLeadsBtn').attr('disabled',true);\r\n    //     // $('#downloadSearchedLeads').attr('disabled',true);\r\n    //     // $('#clear').attr('disabled',true);\r\n    // });\r\n\r\n    $('#max_high_reject_rate').keyup(function() {\r\n        var max_high = Number($(this).val());\r\n        var min_critical = 0;\r\n        if(max_high < 100) min_critical = max_high + .1;\r\n        else min_critical = 100;\r\n        $('#min_critical_reject_rate').val(min_critical);\r\n    });\r\n});\r\n\r\n$(document).on('click','.openSettingBtn',function(e) \r\n{\r\n    e.preventDefault();\r\n    var btn = $(this),\r\n        modal = $('#settingsModal .appendHere');\r\n    btn.attr('disabled', true);\r\n    $.ajax({\r\n        type: 'GET',\r\n        url: $('#baseUrl').val() + '/getLeadRejectionRateSettings/',\r\n        success: function(data)\r\n        {\r\n            console.log(data);\r\n            btn.removeAttr('disabled');\r\n\r\n            $('#min_high_reject_rate').val(data.rates[0]);\r\n            $('#max_high_reject_rate').val(data.rates[1]);\r\n            $('#min_critical_reject_rate').val(Number(data.rates[1]) + .1);\r\n            $('.lrrs-div').remove();\r\n            $.each(data.keywords, function(key, words){\r\n                var name = data.names[key];\r\n                modal.append('<div class=\"col-md-6 lrrs-div\" style=\"margin-top:5px\"><label>'+name+'</label><textarea class=\"form-control this_field hrk_txtb\" rows=\"2\" name=\"high_rejection_keywords['+key+']\">'+words+'</textarea></div>')           \r\n\r\n            });\r\n            $('#settingsModal').modal('show');\r\n        }\r\n    });\r\n    \r\n});"]}