{"version":3,"sources":["history.js"],"names":["redrawDetails","query_string","table_details","clear","destroy","$","DataTable","ajax","val","section","processing","serverSide","searching","sorting","ordering","paging","columnDefs","targets","className","redrawHistory","open_modal","table_history","reference_id","width","data","defaultContent","closeNav","document","getElementById","style","hide","fn","dataTable","ext","errMode","history_of","on","row","this","parents","text","show","e","target","attr","trigger","is"],"mappings":"AASA,QAAAA,eAAAC,GACA,gBAAAC,gBAAAA,cAAAC,QAAAC,UAEAF,cAAAG,EAAA,kBAAAC,WACAC,KAAAF,EAAA,YAAAG,MAAA,oBAAAC,QAAA,WAAAR,EACAS,YAAA,EACAC,YAAA,EACAC,WAAA,EACAC,SAAA,EACAC,UAAA,EACAC,QAAA,EACAC,aAEAC,QAAA,EACAC,UAAA,gBAGAD,QAAA,EACAC,UAAA,gBAGAD,WACAC,UAAA,kBAMA,QAAAC,iBACAC,aAEAC,cAAAhB,EAAA,kBAAAC,WACAC,KAAAF,EAAA,YAAAG,MAAA,oBAAAC,QAAA,YAAAa,aACAZ,YAAA,EACAC,YAAA,EACAC,WAAA,EACAC,SAAA,EACAC,UAAA,EACAE,aAEAC,QAAA,EACAC,UAAA,gBAGAD,QAAA,EACAC,UAAA,gBAGAD,QAAA,EACAC,UAAA,gBAGAD,QAAA,EACAC,UAAA,gBAGAD,QAAA,EACAM,MAAA,OACAL,UAAA,gBAGAD,QAAA,EACAM,MAAA,OACAL,UAAA,gBAGAD,WACAO,KAAA,KACAN,UAAA,2BACAO,eAAA,gFAMA,QAAAC,YACAC,SAAAC,eAAA,mBAAAC,MAAAN,MAAA,IACAlB,EAAA,iBAAAyB,OAtFAzB,EAAA0B,GAAAC,UAAAC,IAAAC,QAAA,OAEA,IAAAzB,SAAA,EACAa,aAAA,EACAD,cACAnB,cACAiC,WAAA,GACAf,YAAA,CAkFAf,GAAA,WACAI,QAAAJ,EAAA,eAAAG,MAGAH,EAAA,wBAAA+B,GAAA,QAAA,OAAA,WACA,GAAAZ,GAAAH,cAAAgB,IAAAhC,EAAAiC,MAAAC,QAAA,OAAAf,MACAvB,cAAA,IAAAuB,EAAA,GAAA,IAAAA,EAAA,GAAA,SAAAA,EAAA,GACAnB,EAAA,4BAAAmC,KAAAhB,EAAA,IAEAxB,cAAAC,cAEA0B,SAAAC,eAAA,mBAAAC,MAAAN,MAAA,OAEAlB,EAAA,iBAAAoC,SAKApC,EAAA,wBAAA+B,GAAA,eAAA,SAAAM,GACA,GAAAC,GAAAtC,EAAAqC,EAAAC,QAAAC,KAAA,OACA,cAAAD,IAEArB,aAAAjB,EAAA,iBAAAG,MAEAW,gBAEAC,YAAA,KAIAf,EAAA,UAAA+B,GAAA,gBAAA,WACA/B,EAAA,aAAAwC,QAAA,SAEA,gBAAAxB,gBAAA,GAAAhB,EAAA,qBAAAyC,GAAA,aAAAzB,cAAAlB,QAAAC,UAEAsB,WAEAN,YAAA","file":"history.min.js","sourcesContent":["$.fn.dataTable.ext.errMode = 'throw';\r\n\r\nvar section = 0;\r\nvar reference_id = 0;\r\nvar table_history;\r\nvar table_details;\r\nvar history_of = '';\r\nvar open_modal = false;\r\n\r\nfunction redrawDetails(query_string) {\r\n    if(typeof table_details === 'object') table_details.clear().destroy();\r\n\r\n    table_details = $('#details-table').DataTable( {\r\n        'ajax': $('#baseUrl').val() + '/user-activities/' + section + '/details' + query_string,\r\n        'processing': true,\r\n        'serverSide': true,\r\n        'searching': false,\r\n        'sorting': false,\r\n        'ordering': false,\r\n        'paging': false,\r\n        'columnDefs': [\r\n            {\r\n                targets: 0,\r\n                className: 'text-center',\r\n            },\r\n            {\r\n                targets: 1,\r\n                className: 'text-center',\r\n            },\r\n            {\r\n                targets: -1,\r\n                className: 'text-center',\r\n            }\r\n        ]\r\n    } );\r\n}\r\n\r\nfunction redrawHistory () {\r\n    if(open_modal) return;\r\n\r\n    table_history = $('#history-table').DataTable( {\r\n        'ajax': $('#baseUrl').val() + '/user-activities/' + section + '/details/' + reference_id,\r\n        'processing': true,\r\n        'serverSide': true,\r\n        'searching': false,\r\n        'sorting': false,\r\n        'ordering': false,\r\n        'columnDefs': [\r\n            {\r\n                targets: 1,\r\n                className: 'text-center',\r\n            },\r\n            {\r\n                targets: 2,\r\n                className: 'text-center',\r\n            },\r\n            {\r\n                targets: 3,\r\n                className: 'text-center',\r\n            },\r\n            {\r\n                targets: 4,\r\n                className: 'text-center',\r\n            },\r\n            {\r\n                targets: 5,\r\n                width: '90px',\r\n                className: 'text-center',\r\n            },\r\n            {\r\n                targets: 6,\r\n                width: '90px',\r\n                className: 'text-center',\r\n            },\r\n            {\r\n                targets: -1,\r\n                'data': null,\r\n                className: 'align-middle text-center',\r\n                'defaultContent': '<a href=\"javascript:void(0)\" class=\"\"><i class=\"fa fa-list\"></i></i></a>'\r\n            }\r\n        ]\r\n    } );\r\n}\r\n\r\nfunction closeNav() {\r\n    document.getElementById(\"history_details\").style.width = \"0\";\r\n    $('#details_wrap').hide();\r\n}\r\n\r\n$(function() {\r\n    section = $('#section_id').val();\r\n\r\n    // Click on details\r\n    $('.table-history tbody').on( 'click', 'a, i', function () {\r\n        var data = table_history.row( $(this).parents('tr') ).data();\r\n        query_string = '/' + data[3] + '/' + data[4] + '?date=' + data[6];\r\n        $('.history_details h3 span').text(data[4]);\r\n\r\n        redrawDetails(query_string);\r\n\r\n        document.getElementById(\"history_details\").style.width = \"100%\";\r\n        // setTimeout(function(){\r\n            $('#details_wrap').show();\r\n        // }, 100);\r\n    } );\r\n\r\n    // Tab toggle\r\n    $('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\r\n        var target = $(e.target).attr(\"href\");\r\n        if(target == '#tab-info') return;\r\n\r\n        reference_id = $('#reference_id').val();\r\n\r\n        redrawHistory();\r\n\r\n        open_modal = true;\r\n    });\r\n\r\n    // close modal\r\n    $(\".modal\").on(\"hide.bs.modal\", function () {\r\n        $('#info-tab').trigger('click');\r\n\r\n        if(typeof table_history === 'object' && $('#tab-with-history').is(\":visible\") == true) table_history.clear().destroy();\r\n\r\n        closeNav();\r\n\r\n        open_modal = false;\r\n    });\r\n\r\n});\r\n"]}