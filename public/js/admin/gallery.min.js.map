{"version":3,"sources":["gallery.js"],"names":["$","document","ready","table","dataTable","ordering","bInfo","info","bFilter","lengthMenu","on","this","hasClass","removeClass","addClass","clipboard","Clipboard","e","this_btn","trigger","tooltip","parents","setTimeout","change","hide","attr","val","type","this_input","img_type","suggestedName","show","imgPreview","split","pop","console","log","confirmation","confirm","the_url","html","this_image","data","ajax","url","image","success","gallery","refreshGallery","img","name","find","modal","event","form","click","each"],"mappings":"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","file":"gallery.min.js","sourcesContent":["$(document).ready(function() {\r\n\r\n\tvar table = $('#gallery-table').dataTable( {\r\n\t  \"ordering\": false,\r\n\t  // \"bLengthChange\": false,\r\n\t  \"bInfo\" : false,\r\n      \"info\":     false,\r\n      \"bFilter\" : false,\r\n      //lengthMenu: [[500,1000,2000,5000,-1],[500,1000,2000,5000,\"All\"]]\r\n      lengthMenu: [[25,50,100,1000,2000,3000],[25,50,100,1000,2000,3000]]\r\n\t} );\r\n\r\n\t$('#gallery-table tbody').on( 'click', 'td', function () {\r\n        if ( $(this).hasClass('selected') ) {\r\n            $(this).removeClass('selected');\r\n        }\r\n        else {\r\n            table.$('td.selected').removeClass('selected');\r\n            $(this).addClass('selected');\r\n        }\r\n    } );\r\n\r\n    var clipboard = new Clipboard('.copyUrlToClipboard');\r\n    clipboard.on('success', function(e) {\r\n    \tvar this_btn = $(e.trigger);\r\n    \tthis_btn.tooltip('show');\r\n    \tthis_btn.parents('td').addClass('selected');\r\n    \t// console.info('Trigger:', e.trigger);\r\n    \t//console.log(e);\r\n    \t\r\n    \tsetTimeout(function(){\r\n\t        this_btn.tooltip('destroy');\r\n\t        this_btn.parents('td').removeClass('selected');\r\n\t    }, 500);\r\n\r\n    });\r\n    // clipboard.on('error', function(e) {\r\n    //     console.log(e);\r\n    // });\r\n\r\n\t$('.img_type').change(function() {\r\n\t\t\r\n\t\t$('.imgPreview').hide();\r\n\t\t$('.imgPreview img').attr('src','');\r\n\t\t$('.gallery_img').val('');\r\n\t\t$('#name').val('');\r\n\r\n\t\tvar type = $(this).val();\r\n\t\tif(type == 2 ) {\r\n\t\t\t$('.gallery_img').attr('type','text');\r\n\t\t}else {\r\n\t\t\t$('.gallery_img').attr('type','file');\r\n\t\t}\r\n\t});\r\n\r\n\t$(\".gallery_img\").change(function () \r\n\t{\r\n\t\tvar this_input = $(this);\r\n\t\tvar img_type = $('input[name=\"img_type\"]:checked').val();\r\n\t\tvar suggestedName = '';\r\n\t\tthis_input.removeClass('error_field error');\r\n\r\n\t\tif($(this).val() != '') {\r\n\t\t\t$('.imgPreview').show();\r\n        \tif(img_type == 1) {\r\n        \t\timgPreview($(this),$('.imgPreview img'));\r\n\r\n        \t\tsuggestedName = $('#image').val().split('\\\\').pop().split('.')[0];\r\n        \t}else {\r\n        \t\t//check if url is valid\r\n\t\t\t\t$('.imgPreview img')\r\n\t\t\t\t    .on('load', function() { console.log(\"image loaded correctly\"); })\r\n\t\t\t\t    .on('error', function() { \r\n\t\t\t\t    \tif(this_input.val() != '') {\r\n\t\t\t\t    \t\tconsole.log(this_input.val());\r\n\t\t\t\t    \t\tthis_input.addClass('error_field error').val('');\r\n\t\t\t\t    \t\tconsole.log(\"error loading image\"); \r\n\t\t\t\t    \t}\r\n\t\t\t\t    })\r\n\t\t\t\t    .attr(\"src\", $(this).val());\r\n\t\t\t\tsuggestedName = $('.gallery_img').val().split('/').pop().split('.')[0];\r\n\r\n\t\t\t\t//$('.imgPreview img').attr('src',$(this).val());   \t\t\r\n        \t}\r\n        \t$('#name').val(suggestedName);\r\n\t\t}\r\n\t\telse \r\n\t\t{\r\n\t\t\t$('.gallery_img').removeClass('error_field error');\r\n\t\t\t$('.imgPreview').hide();\r\n\t\t\t$('.imgPreview img').attr('src','');\r\n\t\t\t$('#name').val('');\r\n\t\t}\r\n    });\r\n\r\n\t$(document).on('click','.deleteGalImg',function() \r\n\t{\r\n\t\tvar confirmation = confirm('Are you sure you want to delete this image?');\r\n\r\n\t\tif(confirmation === true) {\r\n\t\t\tvar the_url = $('#baseUrl').html() + '/delete_gallery_image';\r\n\t\t\t//var this_image = $(this).parents('.gal-wrap').find('.gal-img-name').html();\r\n\t\t\tvar this_image = $(this).data('img');\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype : 'POST',\r\n\t\t\t\turl  : the_url,\r\n\t\t\t\tdata : {\r\n\t\t\t\t\t'image' : this_image\r\n\t\t\t\t}, \r\n\t\t\t\tsuccess : function(gallery) {\r\n\t\t\t\t\t// console.log(gallery);\r\n\t\t\t\t\trefreshGallery(gallery) \r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on('click','.viewGalImg',function() \r\n\t{\r\n\t\tvar img = $(this).data('url');\r\n\t\tvar name = $(this).parents('.gal-wrap').find('.gal-img-name').html();\r\n\t\t$('#put-img-here').attr('src',img);\r\n\t\t$('#gal-modal-title').html(name);\r\n\t\t$('#viewGalImgModal').modal('show');\r\n\t});\r\n\r\n\t$('#addGalImgModal').on('hide.bs.modal', function (event) \r\n\t{\r\n\t\tvar form = $(this).find('.form_with_file');\r\n\t  \t$('input[name=\"img_type\"][value=\"1\"]').click();\r\n\t  \t$('.imgPreview img').attr('src','');\r\n\t  \t$('#image').val('');\r\n\t  \t$('#name').val('');\r\n\t  \t$('.this_modal_submit').html('Save');\r\n\r\n\t\tform.find('.error').each(function(){\r\n\t\t\t$(this).removeClass('error');\r\n\t\t\t$(this).removeClass('error_field');\r\n\t\t\t$(this).removeClass('error_label');\r\n\t\t});\r\n\r\n\t\t$('.this_error_wrapper').hide();\r\n\t});\r\n\r\n});"]}