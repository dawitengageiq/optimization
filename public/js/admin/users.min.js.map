{"version":3,"sources":["users.js"],"names":["$","document","ready","usersURL","html","DataTable","processing","serverSide","columns","orderable","ajax","url","type","error","lengthMenu","click","userModal","formActionURL","find","attr","val","show","prop","modal","hide","on","confirm","id","this","data","success","delete_status","table","row","remove","draw","alert","message","this_modal","this_contact","full_name","trim","nameArray","split","title","first_name","middle_name","last_name","gender","position","email","address","mobile_number","phone_number","role_id","instant_messaging"],"mappings":"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","file":"users.min.js","sourcesContent":["/**\r\n * Created by magbanua-ariel on 03/05/2016.\r\n */\r\n\r\n$(document).ready(function()\r\n{\r\n    var usersURL = $('#baseUrl').html() + '/admin/users';\r\n\r\n    $('#users-table').DataTable({\r\n        'processing': true,\r\n        'serverSide': true,\r\n        'columns': [\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            { \"orderable\": false }\r\n        ],\r\n        'ajax':{\r\n            url: usersURL, // json datasource\r\n            type: 'get',  //LIVE\r\n            // type: 'post',  // KARLA ver\r\n            error: function(){  // error handling\r\n            }\r\n        },\r\n        //lengthMenu: [[10,50,100,-1],[10,50,100,\"All\"]]\r\n        lengthMenu: [[25,50,100,1000,2000,3000],[25,50,100,1000,2000,3000]]\r\n    });\r\n\r\n    $('#addUser').click(function()\r\n    {\r\n        var userModal = $('#userModal');\r\n        var formActionURL = $('#baseUrl').html() + '/admin/user/save';\r\n\r\n        userModal.find('.this_form').attr('action',formActionURL);\r\n        userModal.find('.this_form').attr('data-process', 'add_user');\r\n        userModal.find('.this_form').attr('data-confirmation', '');\r\n        userModal.find('.modal-title').html('Add User');\r\n\r\n        //reset all needed fields in the modal\r\n        $('.this_field').val('');\r\n        $('#title').val('Mr.');\r\n        $('#gender').val('M');\r\n\r\n        $('.password-fields-container').show();\r\n        $('.password-fields').prop('required',true);\r\n\r\n        userModal.modal('show');\r\n        //hide the error block\r\n        $('.this_error_wrapper').hide();\r\n    });\r\n\r\n    /***\r\n     * onclick listener for deleting affiliate\r\n     */\r\n    $(document).on('click','.deleteUser',function()\r\n    {\r\n        if(!confirm('Are you sure you want to delete this user?'))\r\n        {\r\n            return;\r\n        }\r\n\r\n        var id = $(this).data('id');\r\n        var url = $('#baseUrl').val() + '/admin/user/'+id+'/delete';\r\n\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: url,\r\n            success: function(data)\r\n            {\r\n                if(data.delete_status)\r\n                {\r\n                    var table = $('#users-table').DataTable();\r\n                    table.row($('#row-user-'+id)).remove();\r\n                    table.draw();\r\n                }\r\n                else\r\n                {\r\n                    alert(data.message);\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    /***\r\n     * onclick listener for editing contact\r\n     */\r\n    $(document).on('click','.editUser',function()\r\n    {\r\n        var this_modal = $('#userModal');\r\n        var id = $(this).data('id');\r\n\r\n        var formActionURL = $('#baseUrl').html() + '/admin/user/'+id+'/update';\r\n\r\n        this_modal.find('.this_form').attr('action',formActionURL);\r\n        this_modal.find('.this_form').data('process','edit_user');\r\n        this_modal.find('.this_form').attr('data-process', 'edit_user');\r\n        this_modal.find('.this_form').data('confirmation','Are you sure you want to update this user?');\r\n        this_modal.find('.this_form').attr('data-confirmation', 'Are you sure you want to update this user?')\r\n        this_modal.find('.modal-title').html('Edit User');\r\n\r\n        this_modal.find('#id').val(id);\r\n\r\n        var this_contact = '#user-'+id+'-';\r\n\r\n        //fill all the fields\r\n        var full_name = $(this_contact+'full_name').html().trim();\r\n        var nameArray = full_name.split(' ');\r\n        var title = nameArray[0];\r\n        var first_name = nameArray[1];\r\n        var middle_name = nameArray[2];\r\n        var last_name = nameArray[3];\r\n        var gender = $(this_contact+'gender').val();\r\n        var position = $(this_contact+'position').val();\r\n        var email = $(this_contact+'email').html();\r\n        var address = $(this_contact+'address').val();\r\n        var mobile_number = $(this_contact+'mobile_number').html();\r\n        var phone_number = $(this_contact+'phone_number').html();\r\n        var role_id = $(this_contact+'role_id').val();\r\n        var instant_messaging = $(this_contact+'instant_messaging').val();\r\n\r\n        $('#title').val(title);\r\n        $('#first_name').val(first_name);\r\n        $('#middle_name').val(middle_name);\r\n        $('#last_name').val(last_name);\r\n        $('#gender').val(gender);\r\n        $('#position').val(position);\r\n        $('#address').val(address);\r\n        $('#email').val(email);\r\n        $('#mobile_number').val(mobile_number);\r\n        $('#phone_number').val(phone_number);\r\n        $('#role_id').val(role_id);\r\n        $('#instant_messaging').val(instant_messaging);\r\n\r\n        $('.password-fields-container').hide();\r\n        $('.password-fields').prop('required',false);\r\n\r\n        //hide the error block\r\n        $('.this_error_wrapper').hide();\r\n\r\n        this_modal.modal('show');\r\n    });\r\n});\r\n\r\n"]}