function getAvailableUsers(t,e){var a=$("#baseUrl").val()+"/get_available_users";$.ajax({type:"POST",data:{id:t},url:a,success:function(t){e(t)}})}$(document).ready(function(){$(".search-select").select2({theme:"bootstrap",dropdownParent:$("#AffFormModal")}),$("#website").change(function(){var t=$(this).val(),e=t.indexOf("http://")>-1,a=t.indexOf("https://")>-1;e||a||(t="http://"+t),$(this).val(t)});var t=$("#baseUrl").html()+"/affiliates";$("#affiliate-table").DataTable({processing:!0,serverSide:!0,columns:[null,null,null,null,{orderable:!1},null,{orderable:!1}],order:[[0,"desc"]],columnDefs:[{width:"3%",targets:0},{width:"15%",targets:[1,3]},{width:"20%",targets:4},{width:"7%",targets:5},{width:"10%",targets:6}],ajax:{url:t,type:"post",error:function(){}},lengthMenu:[[25,50,100,1e3,2e3,3e3],[25,50,100,1e3,2e3,3e3]]}),$("#addAffBtn").click(function(){var t=$("#AffFormModal"),e=$("#baseUrl").html()+"/add_affiliate";$("#tab-with-history").hide(),t.find(".this_form").attr("action",e),t.find(".this_form").data("process","add_affiliate"),t.find(".this_form").attr("data-process","add_affiliate"),t.find(".this_form").data("confirmation",""),t.find(".this_form").attr("data-confirmation",""),t.find(".modal-title").html("Add Affiliate"),t.find("#this_id").val(""),$("#user").attr("required","required"),$("#userForAffiliate").show(),$("#website").val("http://"),$("#state").val("").trigger("change"),getAvailableUsers(null,function(t){$("#user option").remove(),$("#user").append("<option></option>"),$.each(t,function(t,e){$("#user").append('<option value="'+t+'">'+e+"</option>")})}),t.modal("show")}),$(document).on("click",".editAffiliate",function(){var t=$("#AffFormModal"),e=$(this).data("id"),a=$("#baseUrl").html()+"/edit_affiliate";$("#tab-with-history").show(),t.find(".this_form").attr("action",a),t.find(".this_form").data("process","edit_affiliate"),t.find(".this_form").attr("data-process","edit_affiliate"),t.find(".this_form").data("confirmation","Are you sure you want to edit this attribute?"),t.find(".this_form").attr("data-confirmation","Are you sure you want to edit this attribute?"),t.find(".modal-title").html("Edit Affiliate"),t.find("#this_id").val(e),t.find(".table-history #reference_id").val(e);var i="#aff-"+e+"-";$("#company").val($(i+"comp").html()),$("#type").val($(i+"type").data("type")),$("#website").val($(i+"web").html()),$("#phone").val($(i+"phn").html()),$("#address").val($(i+"add").html()),$(".state_zip_wrapper").show();var r=$(i+"cty").html(),o=$(i+"zip").html();$("#city").data("current_city",r),$("#state").val($(i+"ste").html()).trigger("change"),$("#zip").val(o),console.log(r),console.log(o),$("#description").val($(i+"desc").val()),$('input[name="status"][value="'+$(i+"stat").data("status")+'"]').prop("checked",!0),t.modal("show")}),$(document).on("click",".deleteAffiliate",function(){var t=$(this),e=$(this).data("id"),a=$("#baseUrl").val()+"/delete_affiliate",i=!0;i=confirm("Are you sure you want to delete "+$("#aff-"+e+"-comp").html()+"?"),i===!0&&$.ajax({type:"POST",data:{id:e},url:a,success:function(){var e=$("#affiliate-table").DataTable();e.row(t.parents("tr")).remove().draw()}})}),$("#AffFormModal").on("hide.bs.modal",function(t){var e=$(this).find(".this_form");e.find(".this_field").each(function(){"status"==$(this).attr("name")?$('input[name="status"][value="1"]').prop("checked",!0):$(this).val("")}),e.find(".error").each(function(){$(this).removeClass("error"),$(this).removeClass("error_field"),$(this).removeClass("error_label")}),$(".state_zip_wrapper").hide(),$(".this_error_wrapper").hide()}),$("#close-AddAffCol").click(function(){$("#AffFormCol").collapse("hide"),$(".this_field").val(""),$("#addAffColBtn").fadeIn("slow")}),$(document).on("change",".state_select",function(t){""!=$(this).val()?($("#city option").remove(),$("#city").append("<option value=>Processing cities for the state...</option>"),getCitiesByState($("#state option:selected").html(),function(t){$("#city option").remove(),$("#city").attr("required","true"),$("#zip").attr("required","true"),$("#city").append("<option value=></option>"),$.each(t,function(t,e){$("#city").append('<option value="'+e+'">'+e+"</option>")}),$(".state_zip_wrapper").fadeIn("slow"),$("#address").attr("rows",2);var e=$("#city").data("current_city");$("#city").val(e).trigger("change")})):($("#city").attr("required","false"),$("#zip").attr("required","false"),$(".state_zip_wrapper").fadeOut("fast"),$("#address").attr("rows",1))})});
//# sourceMappingURL=affiliates.min.js.map
