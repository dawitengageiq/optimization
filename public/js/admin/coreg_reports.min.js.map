{"version":3,"sources":["coreg_reports.js"],"names":["$","document","ready","the_url","html","the_rows","revStatsTable","DataTable","processing","serverSide","order","searching","ajax","url","type","data","d","campaign_id","val","affiliate_id","revenue_tracker_id","group_by_column","lead_date","prop","show_inactive_campaign","dataSrc","json","removeClass","console","log","date","profit","cost","revenue","removeAttr","rows","error","createdRow","row","dataIndex","addClass","lengthMenu","sDom","submit","e","preventDefault","affiliate","revTracker","this_button","noError","isNaN","attr","reload","change","this","click","form","find","trigger","datepicker","format","clearBtn","autoclose","todayHighlight","select2","theme","on","show","hide"],"mappings":"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","file":"coreg_reports.min.js","sourcesContent":["$(document).ready(function()\r\n{\r\n    var the_url = $('#baseUrl').html() + '/getCoregReports';\r\n\r\n    var the_rows = [];\r\n\r\n    var revStatsTable = $('#coregReport-table').DataTable({\r\n        'processing': true,\r\n        'serverSide': true,\r\n        \"order\": [[ 13, \"desc\" ]],\r\n        \"searching\": false,\r\n        // \"info\":     false,\r\n        'ajax':{\r\n            url:the_url, // json datasource\r\n            type: 'post',\r\n            'data': function(d)\r\n            {\r\n                d.campaign_id = $('#realCampaignId').val();\r\n                d.affiliate_id = $('#affiliate_id').val();\r\n                d.revenue_tracker_id = $('#revenue_tracker_id').val();\r\n                d.group_by_column = $('#group_by_column').val();\r\n                d.lead_date = $('#lead_date').val();\r\n\r\n                if($('#show_inactive_campaign').prop('checked')) {\r\n                    d.show_inactive_campaign = 1;\r\n                }\r\n            },\r\n            \"dataSrc\": function ( json ) {\r\n                // alert(\"Done!\");\r\n                $('#downloadRevenueReport').removeClass('disabled');\r\n                console.log(json);\r\n                $('#snapshot-date').html(json.date);\r\n                $('#total-net-profit').html(json.profit);\r\n                $('#total-cost').html(json.cost);\r\n                $('#total-revenue').html(json.revenue);\r\n                $('#generateReportBtn').removeAttr('disabled');\r\n\r\n                the_rows = json.rows;\r\n                return json.data;\r\n            },\r\n            error: function(data){  // error handling\r\n                console.log(data);\r\n            }  \r\n        },\r\n        \"createdRow\": function( row, data, dataIndex ) {\r\n            if(the_rows[dataIndex] == 1) {\r\n                $(row).addClass( 'success' );\r\n            }else if(the_rows[dataIndex] == 2){\r\n                $(row).addClass( 'danger' );\r\n            }else if(the_rows[dataIndex] == 3){\r\n                $(row).addClass( 'warning' );\r\n            }else if(the_rows[dataIndex] == 4){\r\n                $(row).addClass( 'info' );\r\n            }\r\n            // console.log('Created Row');\r\n            // console.log(row);\r\n            // console.log(data);\r\n            // console.log(dataIndex);\r\n            // if ( data[7] == \"Done\" ) {\r\n            //     $(row).addClass( 'danger' );\r\n            // }else {\r\n            //     $(row).addClass( 'success' );\r\n            // }\r\n        },\r\n        lengthMenu: [[25,50,100,1000,2000,3000],[25,50,100,1000,2000,3000]],\r\n        \"sDom\": 'lf<\"addToolbar\">rtip'\r\n    });\r\n    \r\n    $(\"div.addToolbar\").html($('#coregReportLegendDiv').html());\r\n    // $(\"div.addToolbar\").html('<label> Filter: <select id=\"filter\" name=\"filter\" class=\"form-control input-sm\"><option value=\"2\">All</option><option value=\"0\">Unedited</option><option value=\"1\">Edited</option></select></label>');\r\n\r\n    $('#coregReport-form').submit(function(e)\r\n    {\r\n        e.preventDefault();\r\n\r\n        $('label[for=\"affiliate_id\"]').removeClass('error_label error');\r\n        $('#affiliate_id').removeClass('error_field error');\r\n        $('label[for=\"revenue_tracker_id\"]').removeClass('error_label error');\r\n        $('#revenue_tracker_id').removeClass('error_field error');\r\n\r\n        var affiliate = $('#affiliate_id').val(),\r\n            revTracker = $('#revenue_tracker_id').val(),\r\n            this_button = $('#generateReportBtn'),\r\n            noError = true;\r\n\r\n        if(isNaN(affiliate) || affiliate < 0) {\r\n            $('label[for=\"affiliate_id\"]').addClass('error_label error');\r\n            $('#affiliate_id').addClass('error_field error');\r\n            noError = false;\r\n        }\r\n\r\n        if(isNaN(revTracker) || revTracker < 0) {\r\n            $('label[for=\"revenue_tracker_id\"]').addClass('error_label error');\r\n            $('#revenue_tracker_id').addClass('error_field error');\r\n            noError = false;\r\n        }\r\n\r\n        if(noError) {\r\n            $('label[for=\"affiliate_id\"]').removeClass('error_label error');\r\n            $('#affiliate_id').removeClass('error_field error');\r\n            $('label[for=\"revenue_tracker_id\"]').removeClass('error_label error');\r\n            $('#revenue_tracker_id').removeClass('error_field error');\r\n            $('#downloadRevenueReport').addClass('disabled');\r\n            this_button.attr('disabled',true);\r\n            revStatsTable.ajax.reload();\r\n        }\r\n    });\r\n\r\n    $('#date_range').change(function() {\r\n        if($(this).val() != '') {\r\n            $('#lead_date_from').val('');\r\n            $('#lead_date_to').val('');\r\n        }\r\n    });\r\n\r\n    $('.lead_date').change(function() {\r\n        if($(this).val() != '') {\r\n            $('#date_range').val('');\r\n        }\r\n    });\r\n\r\n    $('#clear').click(function()\r\n    {\r\n        var form = $('#coregReport-form');\r\n\r\n        form.find('input:text, input:password, input:file, select, textarea').val('');\r\n\r\n        form.find('input:radio, input:checkbox').removeAttr('checked').removeAttr('selected');\r\n        $('#realCampaignId').val('');\r\n        $('.campaignField').trigger('change.select2');\r\n    });\r\n\r\n    $('.input-group.date').datepicker({\r\n        format: \"yyyy-mm-dd\",\r\n        clearBtn: true,\r\n        autoclose: true,\r\n        todayHighlight: true\r\n    });\r\n\r\n    $('.campaignField').select2({\r\n        theme: 'bootstrap'\r\n    });\r\n\r\n    $(document).on('change','#show_inactive_campaign',function(e)\r\n    {\r\n        console.log($(this).prop('checked'))\r\n        if($(this).prop('checked')) {\r\n            $('#showAllCampaigns-container').show();\r\n            $('#showActiveCampaigns-container').hide();\r\n            $('#realCampaignId').val($('[name=\"fake_campaign_id_all\"]').val());\r\n        }else {\r\n            $('#showAllCampaigns-container').hide();\r\n            $('#showActiveCampaigns-container').show();\r\n            $('#realCampaignId').val($('[name=\"fake_campaign_id_active\"]').val());\r\n        }\r\n    });\r\n\r\n    $(document).on('change','[name=\"fake_campaign_id_all\"]',function(e)\r\n    {\r\n        console.log('all');\r\n        console.log($(this).val())\r\n        if($('#show_inactive_campaign').prop('checked')) {\r\n            $('#realCampaignId').val($('[name=\"fake_campaign_id_all\"').val());\r\n            console.log('update the other one');\r\n            $('[name=\"fake_campaign_id_active\"]').val($(this).val()).trigger('change');\r\n        }\r\n        \r\n    });\r\n\r\n    $(document).on('change','[name=\"fake_campaign_id_active\"]',function(e)\r\n    {\r\n        console.log('active');\r\n        console.log($(this).val())\r\n        if(!$('#show_inactive_campaign').prop('checked')) {\r\n            $('#realCampaignId').val($('[name=\"fake_campaign_id_active\"').val());\r\n            console.log('update the other one');\r\n            $('[name=\"fake_campaign_id_all\"]').val($(this).val()).trigger('change');\r\n        }\r\n    });\r\n});"]}