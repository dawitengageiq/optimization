{"version":3,"sources":["cron_jobs.js"],"names":["$","document","ready","the_url","html","cronTable","DataTable","order","columns","orderable","processing","serverSide","ajax","url","type","dataSrc","json","console","log","data","createdRow","row","dataIndex","addClass","lengthMenu","setInterval","reload","on","this_cron","this","id","lq","lp","lw","ts","te","ti","status","leads","val","split","total_num_cells","length","leads_table","x","lead_display","modal"],"mappings":"AAAAA,EAAAC,UAAAC,MAAA,WAEA,GAAAC,GAAAH,EAAA,YAAAI,OAAA,qBACAC,EAAAL,EAAA,mBAAAM,WACAC,QAAA,EAAA,SACAC,SACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACAC,WAAA,IAEAC,YAAA,EACAC,YAAA,EACAC,MACAC,IAAAV,EACAW,KAAA,OACAC,QAAA,SAAAC,GAEA,MADAC,SAAAC,IAAAF,GACAA,EAAAG,OAGAC,WAAA,SAAAC,EAAAF,EAAAG,GAKA,QAAAH,EAAA,GACAnB,EAAAqB,GAAAE,SAAA,UAEAvB,EAAAqB,GAAAE,SAAA,YAGAC,aAAA,IAAA,IAAA,MAAA,IAAA,IAAA,OAGAC,aAAA,WACApB,EAAAO,KAAAc,UACA,KAEA1B,EAAAC,UAAA0B,GAAA,QAAA,gBAAA,WAEA,GAAAC,GAAA5B,EAAA6B,MACAC,EAAAF,EAAAT,KAAA,MACAY,EAAAH,EAAAT,KAAA,MACAa,EAAAJ,EAAAT,KAAA,MACAc,EAAAL,EAAAT,KAAA,MACAe,EAAAN,EAAAT,KAAA,MACAgB,EAAAP,EAAAT,KAAA,MACAiB,EAAAR,EAAAT,KAAA,MACAkB,EAAAT,EAAAT,KAAA,UACAmB,EAAAtC,EAAA,QAAA8B,EAAA,YAAAS,MAAAC,MAAA,KAGAC,EAAA,GAAAH,EAAAI,OAAA,GAAAJ,EAAAI,OAEAC,EAAA,EAEA,KAAAC,EAAA,EAAAA,EAAAH,EAAAG,IACAA,EAAA,IAAA,IACAD,GAAA,QAGA,mBAAAL,GAAAM,IAAA,aAAAN,EAAAM,GACAC,aAAA,GAEAA,aAAAP,EAAAM,GAEAD,GAAA,OAAAE,aAAA,QACAD,EAAA,IAAA,IACAD,GAAA,QAIA3C,GAAA,yBAAAI,KAAAuC,GACA3C,EAAA,UAAAI,KAAA0B,GACA9B,EAAA,SAAAI,KAAAiC,GACArC,EAAA,SAAAI,KAAA2B,GACA/B,EAAA,SAAAI,KAAA4B,GACAhC,EAAA,SAAAI,KAAA6B,GACAjC,EAAA,UAAAI,KAAA8B,GACAlC,EAAA,UAAAI,KAAA+B,GACAnC,EAAA,UAAAI,KAAAgC,GAEApC,EAAA,uBAAA8C,MAAA","file":"cron_jobs.min.js","sourcesContent":["$(document).ready(function() \r\n{\r\n    var the_url = $('#baseUrl').html() + '/getCurrentCronJob';\r\n    var cronTable = $('#cron-job-table').DataTable({\r\n    \t\"order\": [[ 0, \"desc\" ]],\r\n    \t\"columns\": [\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            { \"orderable\": false }\r\n        ],\r\n        'processing': true,\r\n        'serverSide': true,\r\n        'ajax':{\r\n            url:the_url, // json datasource\r\n            type: 'post', \r\n            \"dataSrc\": function ( json ) {\r\n            \tconsole.log(json);\r\n                return json.data;\r\n            }   \r\n        },\r\n        \"createdRow\": function( row, data, dataIndex ) {\r\n        \t// console.log('Created Row');\r\n        \t// console.log(row);\r\n        \t// console.log(data);\r\n        \t// console.log(dataIndex);\r\n\t\t    if ( data[7] == \"Done\" ) {\r\n\t\t    \t$(row).addClass( 'danger' );\r\n\t\t    }else {\r\n\t\t    \t$(row).addClass( 'success' );\r\n\t\t    }\r\n\t\t},\r\n        lengthMenu: [[1000,2000,3000],[1000,2000,3000]]\r\n    });\r\n\r\n    setInterval(function(){\r\n\t    cronTable.ajax.reload();\r\n\t}, 60000);\r\n\r\n\t$(document).on('click','.more-details',function() \r\n\t{\r\n\t\tvar this_cron = $(this);\r\n\t\tvar id = this_cron.data('id'),\r\n\t\t\tlq = this_cron.data('lq'),\r\n\t\t\tlp = this_cron.data('lp'),\r\n\t\t\tlw = this_cron.data('lw'),\r\n\t\t\tts = this_cron.data('ts'),\r\n\t\t\tte = this_cron.data('te'),\r\n\t\t\tti = this_cron.data('ti'),\r\n\t\t\tstatus = this_cron.data('status'),\r\n\t\t\tleads = $('#crn-'+id+'-leadids').val().split(',');\r\n\r\n\t\t\t// Total # of cell per row - total # of lead ids radius by 10 + total # of lead ids\r\n \t\tvar total_num_cells = 10 - (leads.length % 10) + leads.length,\r\n \t\t\ttotal_num_rows = total_num_cells / 10,\r\n \t\t\tleads_table = '';\r\n\r\n \t\tfor(x = 0; x < total_num_cells; x++) {\r\n \t\t\tif(x % 10 == 0) {\r\n \t\t\t\tleads_table += '<tr>';\r\n \t\t\t}\r\n\r\n \t\t\tif(typeof leads[x] == 'undefined' || leads[x] == 'undefined') {\r\n \t\t\t\tlead_display = '';\r\n \t\t\t}else {\r\n \t\t\t\tlead_display = leads[x];\r\n \t\t\t}\r\n \t\t\tleads_table += '<td>'+lead_display+'</td>';\r\n \t\t\tif(x % 10 == 9) {\r\n \t\t\t\tleads_table += '</tr>';\r\n \t\t\t}\r\n \t\t}\r\n\r\n \t\t$('#leads-id-table tbody').html(leads_table);\r\n\t\t$('#cj-id').html(id);\r\n\t\t$('#cj-s').html(status);\r\n\t\t$('#cj-q').html(lq);\r\n\t\t$('#cj-p').html(lp);\r\n\t\t$('#cj-w').html(lw);\r\n\t\t$('#cj-ts').html(ts);\r\n\t\t$('#cj-te').html(te);\r\n\t\t$('#cj-ti').html(ti);\r\n\r\n\t\t$('#more-details-modal').modal('show');\r\n\t});\r\n});"]}