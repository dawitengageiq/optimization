$(document).ready(function(){function e(){the_url=t.html()+"/admin/getprepopReportStats";var e=$("#prepop-table"),a=$("#prepop-table tbody"),d=$("#download_report"),r=$("#group_by").val();e.DataTable().destroy(),a.empty(),d.addClass("disabled"),$.ajax({type:"POST",url:the_url,data:{group_by:$("#group_by").val(),date_from:$("#date_from").val(),date_to:$("#date_to").val(),predefined_date:$("#predefined_date").val(),affiliate_id:$("#affiliate_id").val(),s1:$("#s1").val(),s2:$("#s2").val(),s3:$("#s3").val(),s4:$("#s4").val(),s5:$("#s5").val(),sib_s1:$("#sib_s1").prop("checked"),sib_s2:$("#sib_s2").prop("checked"),sib_s3:$("#sib_s3").prop("checked"),sib_s4:$("#sib_s4").prop("checked")},success:function(t){if(console.log(t),console.log(t.records.length),t.records.length>0){var s=t.params,i=$("#s1").val(),o=$("#s2").val(),l=$("#s3").val(),p=$("#s4").val(),_=$("#s5").val(),c=$("#baseUrl").html()+"/downloadPrepopStatisticsReport?group_by="+$("#group_by").val()+"&date_from="+$("#date_from").val()+"&date_to="+$("#date_to").val()+"&predefined_date="+$("#predefined_date").val()+"&affiliate_id="+$("#affiliate_id").val()+"&report_title="+t.report_title;c+="&s1="+i+"&s2="+o+"&s3="+l+"&s4="+p+"&s5="+_+"&sib_s1="+$("#sib_s1").prop("checked")+"&sib_s2="+$("#sib_s2").prop("checked")+"&sib_s3="+$("#sib_s3").prop("checked")+"&sib_s4="+$("#sib_s4").prop("checked"),d.attr("href",c),d.removeClass("disabled")}$.each(t.records,function(e,t){var d="",i="",o="",l="",p="",_="",c="",n="";"affiliate_id"==r?(d=t.created_at,i=t.affiliate_id):"revenue_tracker_id"==r?(d=t.created_at,o=t.revenue_tracker_id):(d=t.created_at,i=t.affiliate_id,o=t.revenue_tracker_id,l=null===t.s1?"":t.s1,p=null===t.s2?"":t.s2,_=null===t.s3?"":t.s3,c=null===t.s4?"":t.s4,n=null===t.s5?"":t.s5),l="true"==s.sib_s1?l:"",p="true"==s.sib_s2?p:"",_="true"==s.sib_s3?_:"",c="true"==s.sib_s4?c:"",n="true"==s.sib_s5?n:"";var $=t.prepop_count/t.total_clicks*100,u=t.no_prepop_count/t.total_clicks*100,b=t.prepop_with_errors_count/t.total_clicks*100,f="<tr><td>"+d+"</td><td>"+i+"</td><td>"+o+"</td><td>"+l+"</td>";f+="<td>"+p+"</td><td>"+_+"</td><td>"+c+"</td><td>"+n+"</td><td>"+t.total_clicks+"</td>",f+="<td>"+t.prepop_count+"</td><td>"+t.no_prepop_count+"</td><td>"+t.prepop_with_errors_count+"</td>",f+="<td>"+$.toFixed(2)+"%</td><td>"+u.toFixed(2)+"%</td><td>"+b.toFixed(2)+"%</td></tr>",a.append(f)}),e.DataTable({order:[[1,"asc"]],lengthMenu:[[25,50,100,-1],[25,50,100,"All"]]}).draw()}})}$("#affiliate_id").select2({theme:"bootstrap"}),$(".input-group.date").datepicker({format:"yyyy-mm-dd",clearBtn:!0,autoclose:!0,todayHighlight:!0});var t=$("#baseUrl");t.html()+"/admin/prepopReportStatistics";$("#prepop-table").dataTable(),e(),$("#generate_report").click(function(t){t.preventDefault(),e()}),$("#predefined_date").change(function(){$("#date_from").val(""),$("#date_to").val("")});var a="";$(".date-picker").on("propertychange change paste input",function(){$(this).val()!=a&&(a=$(this).val(),$("#predefined_date").val(""))}),$("#clear").click(function(){$("#date_from").val(""),$("#date_to").val(""),$("#affiliate_id").val("").trigger("change"),$("#predefined_date").val("yesterday").trigger("change"),$("#group_by").val("created_at").trigger("change")}),$("#group_by").change(function(){"created_at"!=$(this).val()?$(".sibs").prop("checked",!0).attr("disabled",!0):$(".sibs").removeAttr("disabled")})});
//# sourceMappingURL=prepopstatistics.min.js.map
