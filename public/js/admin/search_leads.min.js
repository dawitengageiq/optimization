$(document).ready(function(){$(document).on("show.bs.modal",".modal",function(){var e=1040+10*$(".modal:visible").length;$(this).css("z-index",e),setTimeout(function(){$(".modal-backdrop").not(".modal-stack").css("z-index",e-1).addClass("modal-stack")},0)}),$(".draggable-drilldown-modal").draggable({handle:".modal-header"}),$(".campaignField").select2({theme:"bootstrap"});var e=$("#leads-table").DataTable({responsive:!0,order:[[0,"desc"]],lengthMenu:[[25,50,100,1e3,2e3,3e3],[25,50,100,1e3,2e3,3e3]],columnDefs:[{width:"7%",targets:0},{width:"1%",targets:[9,10]}],searching:!1});$(document).on("change","#show_inactive_campaign",function(e){console.log($(this).prop("checked")),$(this).prop("checked")?($("#showAllCampaigns-container").show(),$("#showActiveCampaigns-container").hide(),$("#realCampaignId").val($('[name="fake_campaign_id_all"]').val())):($("#showAllCampaigns-container").hide(),$("#showActiveCampaigns-container").show(),$("#realCampaignId").val($('[name="fake_campaign_id_active"]').val()))}),$(document).on("change",'[name="fake_campaign_id_all"]',function(e){console.log("all"),console.log($(this).val()),$("#show_inactive_campaign").prop("checked")&&($("#realCampaignId").val($('[name="fake_campaign_id_all"').val()),console.log("update the other one"),$('[name="fake_campaign_id_active"]').val($(this).val()).trigger("change"))}),$(document).on("change",'[name="fake_campaign_id_active"]',function(e){console.log("active"),console.log($(this).val()),$("#show_inactive_campaign").prop("checked")||($("#realCampaignId").val($('[name="fake_campaign_id_active"').val()),console.log("update the other one"),$('[name="fake_campaign_id_all"]').val($(this).val()).trigger("change"))}),$(document).on("click","#searchedLeadsBtn",function(e){e.preventDefault(),$('label[for="lead_date_from"]').removeClass("error_label error"),$("#lead_date_from").removeClass("error_field error"),$('label[for="lead_date_to"]').removeClass("error_label error"),$("#lead_date_to").removeClass("error_field error"),console.log("Test");var a=$("#lead_date_from").val(),l=$("#lead_date_to").val();""==a||""==l?$("#search-leads").submit():""!=a&&""!=l&&l>=a?($('label[for="lead_date_from"]').removeClass("error_label error"),$("#lead_date_from").removeClass("error_field error"),$('label[for="lead_date_to"]').removeClass("error_label error"),$("#lead_date_to").removeClass("error_field error"),$("#search-leads").submit()):($('label[for="lead_date_from"]').addClass("error_label error"),$("#lead_date_from").addClass("error_field error"),$('label[for="lead_date_to"]').addClass("error_label error"),$("#lead_date_to").addClass("error_field error"))}),$("#leads-table tbody").on("click","tr",function(){$(this).hasClass("selected")?$(this).removeClass("selected"):(e.$("tr.selected").removeClass("selected"),$(this).addClass("selected"))}),$("#clear").click(function(){var e=$("#search-leads");e.find("input:text, input:password, input:file, select, textarea").val(""),e.find("input:radio, input:checkbox").removeAttr("checked").removeAttr("selected"),$("#realCampaignId").val(""),$(".campaignField").trigger("change.select2"),$("#limit_rows").val(200),$("#table").val("leads")}),$(document).on("click",".show-details",function(){var e=$(this),a=e.data("lead_id"),l=e.data("name"),t=e.data("rcount"),r=e.data("rdate"),o="",d=$("#table").val();o="leads_archive"==d?$("#baseUrl").val()+"/admin/leadsArchive/"+a+"/getLeadDetails":$("#baseUrl").val()+"/admin/leads/"+a+"/getLeadDetails",console.log(o),$("#lead_details_modal .modal-title").html("Leads Detail: <b>"+a+" - "+l+"</b>"),$("#id").val(a),$("#retry_count").val(t),$("#retry_date").val(r),$.ajax({type:"POST",url:o,data:{table:d},success:function(e){console.log(e),e.leadDataCSV&&$("#lead_csv").val(e.leadDataCSV.value),e.leadMessage&&$("#message").val(e.leadMessage.value),e.leadDataADV&&$("#advertiser_data").val(e.leadDataADV.value),e.leadSentResult&&$("#sent_result").val(e.leadSentResult.value),$("#lead_details_modal").modal("show")},error:function(e){console.log(e)}})}),$("#lead_details_modal").on("hide.bs.modal",function(e){$("#lead_csv").val(""),$("#message").val(""),$("#advertiser_data").val(""),$("#sent_result").val("")}),$(".input-group.date").datepicker({format:"yyyy-mm-dd",clearBtn:!0,autoclose:!0,todayHighlight:!0}),$("#select-all").click(function(){$("#leads-table tr").each(function(e,a){var l=$(a);l.find(".checkbox").prop("checked",!0)})}),$("#de-select-all").click(function(){$("#leads-table tr").each(function(e,a){var l=$(a);l.find(".checkbox").prop("checked",!1)})}),$("#resend-leads").click(function(){console.log("resend leads");var e=$(this).data("table");console.log("table: "+e);var a=$("#baseUrl").val()+"/updateLeadsToPendingStatus/",l=[];$("#leads-table tr").each(function(e,a){var t=$(a),r=t.find(".checkbox"),o=r.data("lead_id");r.prop("checked")&&void 0!==o&&l.push(o)});for(var t="",r=0;r<l.length;r++)t+=l[r]+",";t=t.substr(0,t.length-1),console.log(t),""!==t&&(a+=t,a+="?table="+e,console.log(a),$.ajax({type:"POST",url:a,success:function(e){console.log(e),alert("Leads updated to pending!"),$("#search-leads").submit()}}))}),$("#max_high_reject_rate").keyup(function(){var e=Number($(this).val()),a=0;a=e<100?e+.1:100,$("#min_critical_reject_rate").val(a)})}),$(document).on("click",".openSettingBtn",function(e){e.preventDefault();var a=$(this),l=$("#settingsModal .appendHere");a.attr("disabled",!0),$.ajax({type:"GET",url:$("#baseUrl").val()+"/getLeadRejectionRateSettings/",success:function(e){console.log(e),a.removeAttr("disabled"),$("#min_high_reject_rate").val(e.rates[0]),$("#max_high_reject_rate").val(e.rates[1]),$("#min_critical_reject_rate").val(Number(e.rates[1])+.1),$(".lrrs-div").remove(),$.each(e.keywords,function(a,t){var r=e.names[a];l.append('<div class="col-md-6 lrrs-div" style="margin-top:5px"><label>'+r+'</label><textarea class="form-control this_field hrk_txtb" rows="2" name="high_rejection_keywords['+a+']">'+t+"</textarea></div>")}),$("#settingsModal").modal("show")}})});
//# sourceMappingURL=search_leads.min.js.map
