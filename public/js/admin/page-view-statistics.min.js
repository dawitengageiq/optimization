$(document).ready(function(){var t=$("#baseUrl");$(".input-group.date").datepicker({format:"yyyy-mm-dd",clearBtn:!0,autoclose:!0,todayHighlight:!0}),$("#affiliate_id").select2({placeholder:"Select the id or name of the affiliate.",minimumInputLength:1,maximumSelectionLength:0,theme:"bootstrap",language:{inputTooShort:function(t){return"Please enter the id or name of the affiliate. (Enter 1 or more characters)"}},ajax:{url:t.html()+"/search/select/activeAffiliatesIDName",dataType:"json",type:"POST",data:function(t){var a={term:t.term};return a},processResults:function(t){return console.log(t),{results:$.map(t.items,function(t){return{text:t.name,id:t.id}})}}}});var a,e=t.html()+"/admin/getPageViewStats",o=$("#page-view-statistics-table").DataTable({processing:!0,serverSide:!0,language:{searchPlaceholder:"Affiliate / Revenue Tracker"},order:[],ajax:{url:e,type:"post",data:function(t){t.date_from=$("#date_from").val(),t.date_to=$("#date_to").val(),t.affiliate_id=$("#affiliate_id").val(),t.group_by=$("#group_by").val(),t.date_range=$("#date_range").val(),t.s1=$("#s1").val(),t.s2=$("#s2").val(),t.s3=$("#s3").val(),t.s4=$("#s4").val(),t.s5=$("#s5").val(),t.sib_s1=$("#sib_s1").prop("checked"),t.sib_s2=$("#sib_s2").prop("checked"),t.sib_s3=$("#sib_s3").prop("checked"),t.sib_s4=$("#sib_s4").prop("checked")},dataSrc:function(e){var l=$("#download-page-view-statistics-report");if(e.data.length>0){l.removeClass("disabled");for(var r="",i=0;i<(e.affiliate_id != null && e.affiliate_id != undefined?e.affiliate_id.length:0);i++)r+="&affiliate_id["+i+"]="+e.affiliate_id[i];var d="";void 0!==e.order_column&&(d="&order_column="+e.order_column);var n=$("#s1").val(),s=$("#s2").val(),c=$("#s3").val(),f=$("#s4").val(),m=$("#s5").val(),_=t.html()+"/admin/downLoadPageViewStatisticsReport?"+r+"&date_from="+e.date_from+"&date_to="+e.date_to+"&group_by="+e.group_by+d+"&order_dir="+e.order_dir+"&is_download=true&date_range="+e.date_range;_+="&s1="+n+"&s2="+s+"&s3="+c+"&s4="+f+"&s5="+m+"&sib_s1="+$("#sib_s1").prop("checked")+"&sib_s2="+$("#sib_s2").prop("checked")+"&sib_s3="+$("#sib_s3").prop("checked")+"&sib_s4="+$("#sib_s4").prop("checked"),console.log(_),l.attr("href",_)}else l.addClass("disabled");return $(o.column(9).footer()).html(e.total_lp),$(o.column(10).footer()).html(e.total_rp),$(o.column(11).footer()).html(e.total_to1),$(o.column(12).footer()).html(e.total_to2),$(o.column(13).footer()).html(e.total_mo1),$(o.column(14).footer()).html(e.total_mo2),$(o.column(15).footer()).html(e.total_mo3),$(o.column(16).footer()).html(e.total_mo4),$(o.column(17).footer()).html(e.total_lfc1),$(o.column(18).footer()).html(e.total_lfc2),$(o.column(19).footer()).html(e.total_tbr1),$(o.column(20).footer()).html(e.total_pd),$(o.column(21).footer()).html(e.total_tbr2),$(o.column(22).footer()).html(e.total_iff),$(o.column(23).footer()).html(e.total_rex),$(o.column(24).footer()).html(e.total_ads),$(o.column(25).footer()).html(e.total_cpawall),$(o.column(26).footer()).html(e.total_exitpage),$(o.column(27).footer()).html(e.thirty_day_average),a=e.thirty_day_average,e.data},error:function(t){console.log(t)}},createdRow:function(t,e,o){var l=Number(a);ceiling=.95*l,e.percentage>=ceiling&&e.percentage<l?$(t).find("td:last-child").addClass("warning"):e.percentage<ceiling&&e.percentage<l&&$(t).find("td:last-child").addClass("danger")},columns:[{data:"date"},{data:"affiliate_name"},{data:"affiliate_id"},{data:"revenue_tracker_id"},{data:"s1"},{data:"s2"},{data:"s3"},{data:"s4"},{data:"s5"},{data:"lp"},{data:"rp"},{data:"to1"},{data:"to2"},{data:"mo1"},{data:"mo2"},{data:"mo3"},{data:"mo4"},{data:"lfc1"},{data:"lfc2"},{data:"tbr1"},{data:"pd"},{data:"tbr2"},{data:"iff"},{data:"rex"},{data:"ads"},{data:"cpawall"},{data:"exitpage"},{data:"percentage"}],lengthMenu:[[25,50,100,-1],[25,50,100,"All"]]});$("#remove_affiliate_id_selections").click(function(){$("#affiliate_id").val(null).trigger("change")}),$(document).on("submit",function(t){t.preventDefault(),o.ajax.reload()}),$("#clear").click(function(){$(".date-field").val(""),$("#affiliate_id").val("").trigger("change")}),$("#date_range").change(function(){""!=$(this).val()&&($("#date_from").val(""),$("#date_to").val(""))}),$(".date-field").change(function(){""!=$(this).val()&&$("#date_range").val("")}),$("#group_by").change(function(){"created_at"!=$(this).val()?$(".sibs").prop("checked",!0).attr("disabled",!0):$(".sibs").removeAttr("disabled")})});
//# sourceMappingURL=page-view-statistics.min.js.map
