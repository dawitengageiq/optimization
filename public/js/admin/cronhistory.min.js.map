{"version":3,"sources":["cronhistory.js"],"names":["$","document","ready","the_url","html","DataTable","order","columns","orderable","processing","serverSide","ajax","url","type","dataSrc","json","console","log","data","createdRow","row","dataIndex","addClass","lengthMenu","on","this_cron","this","id","lq","lp","lw","ts","te","ti","status","leads","val","split","total_num_cells","length","leads_table","x","lead_display","modal"],"mappings":"AAAAA,EAAAC,UAAAC,MAAA,WAEA,GAAAC,GAAAH,EAAA,YAAAI,OAAA,oBACAJ,GAAA,mBAAAK,WACAC,QAAA,EAAA,SACAC,SACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACAC,WAAA,IAEAC,YAAA,EACAC,YAAA,EACAC,MACAC,IAAAT,EACAU,KAAA,OACAC,QAAA,SAAAC,GAEA,MADAC,SAAAC,IAAAF,GACAA,EAAAG,OAGAC,WAAA,SAAAC,EAAAF,EAAAG,GACA,QAAAH,EAAA,GACAlB,EAAAoB,GAAAE,SAAA,UAEAtB,EAAAoB,GAAAE,SAAA,YAGAC,aAAA,IAAA,IAAA,MAAA,IAAA,IAAA,OAOAvB,GAAAC,UAAAuB,GAAA,QAAA,gBAAA,WAEA,GAAAC,GAAAzB,EAAA0B,MACAC,EAAAF,EAAAP,KAAA,MACAU,EAAAH,EAAAP,KAAA,MACAW,EAAAJ,EAAAP,KAAA,MACAY,EAAAL,EAAAP,KAAA,MACAa,EAAAN,EAAAP,KAAA,MACAc,EAAAP,EAAAP,KAAA,MACAe,EAAAR,EAAAP,KAAA,MACAgB,EAAAT,EAAAP,KAAA,UACAiB,EAAAnC,EAAA,QAAA2B,EAAA,YAAAS,MAAAC,MAAA,KAGAC,EAAA,GAAAH,EAAAI,OAAA,GAAAJ,EAAAI,OAEAC,EAAA,EAEA,KAAAC,EAAA,EAAAA,EAAAH,EAAAG,IACAA,EAAA,IAAA,IACAD,GAAA,QAGA,mBAAAL,GAAAM,IAAA,aAAAN,EAAAM,GACAC,aAAA,GAEAA,aAAAP,EAAAM,GAEAD,GAAA,OAAAE,aAAA,QACAD,EAAA,IAAA,IACAD,GAAA,QAIAxC,GAAA,yBAAAI,KAAAoC,GACAxC,EAAA,UAAAI,KAAAuB,GACA3B,EAAA,SAAAI,KAAA8B,GACAlC,EAAA,SAAAI,KAAAwB,GACA5B,EAAA,SAAAI,KAAAyB,GACA7B,EAAA,SAAAI,KAAA0B,GACA9B,EAAA,UAAAI,KAAA2B,GACA/B,EAAA,UAAAI,KAAA4B,GACAhC,EAAA,UAAAI,KAAA6B,GAEAjC,EAAA,uBAAA2C,MAAA","file":"cronhistory.min.js","sourcesContent":["$(document).ready(function()\r\n{\r\n    var the_url = $('#baseUrl').html() + '/getHistoryCronJob';\r\n    var cronTable = $('#cron-job-table').DataTable({\r\n        \"order\": [[ 0, \"desc\" ]],\r\n        \"columns\": [\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            null,\r\n            { \"orderable\": false }\r\n        ],\r\n        'processing': true,\r\n        'serverSide': true,\r\n        'ajax':{\r\n            url:the_url, // json datasource\r\n            type: 'post',\r\n            \"dataSrc\": function ( json ) {\r\n                console.log(json);\r\n                return json.data;\r\n            }\r\n        },\r\n        \"createdRow\": function( row, data, dataIndex ) {\r\n            if ( data[7] == \"Done\" ) {\r\n                $(row).addClass( 'danger' );\r\n            }else {\r\n                $(row).addClass( 'success' );\r\n            }\r\n        },\r\n        lengthMenu: [[1000,2000,3000],[1000,2000,3000]]\r\n    });\r\n\r\n    // setInterval(function(){\r\n    //     cronTable.ajax.reload();\r\n    // }, 60000);\r\n\r\n    $(document).on('click','.more-details',function()\r\n    {\r\n        var this_cron = $(this);\r\n        var id = this_cron.data('id'),\r\n            lq = this_cron.data('lq'),\r\n            lp = this_cron.data('lp'),\r\n            lw = this_cron.data('lw'),\r\n            ts = this_cron.data('ts'),\r\n            te = this_cron.data('te'),\r\n            ti = this_cron.data('ti'),\r\n            status = this_cron.data('status'),\r\n            leads = $('#crn-'+id+'-leadids').val().split(',');\r\n\r\n        // Total # of cell per row - total # of lead ids radius by 10 + total # of lead ids\r\n        var total_num_cells = 10 - (leads.length % 10) + leads.length,\r\n            total_num_rows = total_num_cells / 10,\r\n            leads_table = '';\r\n\r\n        for(x = 0; x < total_num_cells; x++) {\r\n            if(x % 10 == 0) {\r\n                leads_table += '<tr>';\r\n            }\r\n\r\n            if(typeof leads[x] == 'undefined' || leads[x] == 'undefined') {\r\n                lead_display = '';\r\n            }else {\r\n                lead_display = leads[x];\r\n            }\r\n            leads_table += '<td>'+lead_display+'</td>';\r\n            if(x % 10 == 9) {\r\n                leads_table += '</tr>';\r\n            }\r\n        }\r\n\r\n        $('#leads-id-table tbody').html(leads_table);\r\n        $('#cj-id').html(id);\r\n        $('#cj-s').html(status);\r\n        $('#cj-q').html(lq);\r\n        $('#cj-p').html(lp);\r\n        $('#cj-w').html(lw);\r\n        $('#cj-ts').html(ts);\r\n        $('#cj-te').html(te);\r\n        $('#cj-ti').html(ti);\r\n\r\n        $('#more-details-modal').modal('show');\r\n    });\r\n});"]}