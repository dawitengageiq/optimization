{"version":3,"sources":["filtertypes.js"],"names":["$","document","ready","dataFilterTypesURL","html","DataTable","processing","serverSide","columns","orderable","ajax","url","type","error","lengthMenu","click","this_modal","formActionURL","find","attr","modal","hide","on","id","this","data","val","this_filtertype","trim","name","status","icon","trigger","prop","show","confirm","success","delete_status","table","row","remove","draw","alert","message","change","input_type","process","this_input","img_type","removeClass","imgPreview","console","log","addClass","event","form","each"],"mappings":"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","file":"filtertypes.min.js","sourcesContent":["/**\r\n * Created by magbanua-ariel on 19/09/2015.\r\n */\r\n\r\n$(document).ready(function()\r\n{\r\n    /*\r\n    $('.table-datatable').DataTable({\r\n        responsive: true,\r\n        \"order\": [[ 0, \"desc\" ]],\r\n        lengthMenu: [[1000,2000,3000,4000,5000,-1],[1000,2000,3000,4000,5000,\"All\"]]\r\n    });\r\n    */\r\n\r\n    var dataFilterTypesURL = $('#baseUrl').html() + '/filtertypes';\r\n\r\n    $('#filtertypes-table').DataTable({\r\n        'processing': true,\r\n        'serverSide': true,\r\n        \"columns\": [\r\n            null,\r\n            null,\r\n            null,\r\n            { \"orderable\": false }\r\n        ],\r\n        'ajax':{\r\n            url:dataFilterTypesURL, // json datasource\r\n            type: 'post',  // method  , by default get LIVE\r\n            error: function(){  // error handling\r\n\r\n            }\r\n        },\r\n        lengthMenu: [[25,50,100,1000,2000,3000],[25,50,100,1000,2000,3000]]\r\n    });\r\n\r\n    /***\r\n     * onclick listener for add filter type\r\n     */\r\n    $('#add_filtertype_button').click(function()\r\n    {\r\n        var this_modal = $('#filtertype_form_modal');\r\n        var formActionURL = $('#baseUrl').html() + '/admin/filter/store';\r\n\r\n        this_modal.find('form').attr('action',formActionURL);\r\n        this_modal.find('form').attr('data-process', 'add_filter_type');\r\n        this_modal.find('form').attr('data-confirmation', '');\r\n        this_modal.find('.modal-title').html('Add Filter Type');\r\n\r\n        this_modal.modal('show');\r\n        //hide the error block\r\n        $('.this_error_wrapper').hide();\r\n    });\r\n\r\n    /**\r\n     * Listener for edit filter types\r\n     */\r\n    $(document).on('click','.edit-filtertype',function()\r\n    {\r\n        var this_modal = $('#filtertype_form_modal');\r\n        var id = $(this).data('id');\r\n        var formActionURL = $('#baseUrl').html() + '/admin/filtertype/update/'+id;\r\n\r\n        this_modal.find('form').attr('action',formActionURL);\r\n        this_modal.find('form').data('process','edit_filter_type');\r\n        this_modal.find('form').attr('data-process', 'edit_filter_type');\r\n        this_modal.find('form').data('confirmation','Are you sure you want to update this filter type?');\r\n        this_modal.find('form').attr('data-confirmation', 'Are you sure you want to update this filter type?')\r\n        this_modal.find('.modal-title').html('Edit Filter Type');\r\n        this_modal.find('#id').val(id);\r\n\r\n        var this_filtertype = '#filtertype-'+id+'-';\r\n\r\n        var type = $(this_filtertype+'type').html().trim();\r\n        var name = $(this_filtertype+'name').html().trim();\r\n        var status = $(this_filtertype+'status').data('status');\r\n        var icon = $(this_filtertype+'image').html();\r\n\r\n        $('#type').val(type).trigger('change');\r\n        $('#name').val(name);\r\n        $('input[name=\"status\"][value=\"'+status+'\"]').prop('checked', true);\r\n        $('.imgPreview').show();\r\n        $('.imgPreview img').attr('src',icon);\r\n\r\n        this_modal.modal('show');\r\n    });\r\n\r\n\r\n    /***\r\n     * onclick listener for deleting affiliate\r\n     */\r\n    $(document).on('click','.delete-filtertype',function()\r\n    {\r\n        if(!confirm('Are you sure you want to delete this Filter Type?'))\r\n        {\r\n            return;\r\n        }\r\n\r\n        var id = $(this).data('id');\r\n        var url = $('#baseUrl').val() + '/admin/filtertype/delete/'+id;\r\n\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: url,\r\n            success: function(data)\r\n            {\r\n                if(data.delete_status)\r\n                {\r\n                    var table = $('#filtertypes-table').DataTable();\r\n                    table.row($('#row-filtertype-'+id)).remove();\r\n                    table.draw();\r\n                }\r\n                else\r\n                {\r\n                    alert(data.message);\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    $('#type').change(function()\r\n    {\r\n        var input_type = $(this).val();\r\n        if(input_type == 'question') {\r\n            $('.forPrflIconDiv').show();\r\n        }else {\r\n            $('.forPrflIconDiv').hide();\r\n        }\r\n        $('[name=\"img_type\"][value=\"1\"]').prop('checked',true).trigger('change')\r\n    });\r\n\r\n    $('.img_type').change(function() {\r\n        //1 - upload\r\n        //2 - img url\r\n        var process = $('#filtertype_form_modal').find('form').attr('data-process');\r\n        if(process == 'add_filter_type'){\r\n            $('.imgPreview').hide();\r\n            $('.imgPreview img').attr('src','');\r\n        }\r\n       \r\n        $('#icon').val('');\r\n        var type = $(this).val();\r\n        if(type == 2 ) {\r\n            $('#icon').attr('type','text');\r\n        }else {\r\n            $('#icon').attr('type','file');\r\n        }\r\n    });\r\n\r\n    $(\"#icon\").change(function () \r\n    {\r\n        var this_input = $(this);\r\n        var img_type = $('input[name=\"img_type\"]:checked').val();\r\n\r\n        this_input.removeClass('error_field error');\r\n\r\n        if($(this).val() != '') {\r\n            $('.imgPreview').show();\r\n            if(img_type == 1) {\r\n                imgPreview($(this),$('.imgPreview img'));\r\n            }else {\r\n                //check if url is valid\r\n                $('.imgPreview img')\r\n                    .on('load', function() { console.log(\"image loaded correctly\"); })\r\n                    .on('error', function() { \r\n                        if(this_input.val() != '') {\r\n                            console.log(this_input.val());\r\n                            this_input.addClass('error_field error').val('');\r\n                            console.log(\"error loading image\"); \r\n                        }\r\n                    })\r\n                    .attr(\"src\", $(this).val());  \r\n            }\r\n        }\r\n        else \r\n        {\r\n            $('#icon').removeClass('error_field error');\r\n            $('.imgPreview').hide();\r\n            $('.imgPreview img').attr('src','');\r\n        }\r\n    });\r\n\r\n    $('#filtertype_form_modal').on('hide.bs.modal', function (event) \r\n    {\r\n        var form = $(this).find('.form_with_file');\r\n\r\n        $('.imgPreview').hide();\r\n        $('.imgPreview img').attr('src','');\r\n        $('.forPrflIconDiv').hide();\r\n        $('[name=\"img_type\"][value=\"1\"]').prop('checked',true).trigger('change')\r\n\r\n        form.find('.this_field').each(function() \r\n        {\r\n            if($(this).attr('name') == 'status') {\r\n                $('input[name=\"status\"][value=\"0\"]').prop('checked', true);\r\n            }else if($(this).attr('name') == 'type') {\r\n                $('#type').val('profile');\r\n            }else {\r\n                $(this).val('');\r\n            }\r\n        });\r\n        form.find('.error').each(function(){\r\n            $(this).removeClass('error');\r\n            $(this).removeClass('error_field');\r\n            $(this).removeClass('error_label');\r\n        });\r\n\r\n        $('#icon').removeClass('error error_field');\r\n\r\n    });\r\n});"]}