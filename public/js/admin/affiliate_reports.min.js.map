{"version":3,"sources":["affiliate_reports.js"],"names":["$","document","ready","internalAffiliateReport","console","log","the_url","baseURL","table","body","footer","find","html","DataTable","destroy","empty","ajax","type","url","data","period","val","affiliate_type","start_date","end_date","success","total_clicks","total_payout","total_leads","total_revenue","total_weget","total_margin","affiliates","each","records","x","row","revenue","toFixed","leadCount","leads","payout","weGet","margin","affiliate","affiliate_id","clicks","affCell","append","Number","toLocaleString","language","searchPlaceholder","draw","hostPostAffiliateReport","revSubIDBreakdown","affiliateID","revenueTracker","revenueTrackerID","websiteName","addClass","revenue_tracker_id","sib_s1","prop","sib_s2","sib_s3","sib_s4","s1","s2","s3","s4","s5","webCell","JSON","stringify","responsive","lengthMenu","dlHref","removeClass","attr","on","zIndex","length","this","css","setTimeout","not","alertContainer","closest","fadeOut","hide","draggable","handle","dateRangePicker","datepicker","format","clearBtn","autoclose","todayHighlight","orientation","lastValue1","change","endDate","Date","parse","snapShotPeriod","reportsURL","snapShotSelect","snapshotPeriod","dateRangePayload","the_affiliate_url","the_iframe_affiliate_url","the_iframe_website_url","the_iframe_revenueTracker_url","dataTable","both_table","internal_iframe_table","processing","serverSide","order","d","dataSrc","json","column","totalPassovers","totalPayout","totalLeads","totalRevenue","totalWeGet","totalMargin","columns","current_affiliate_id","current_affiliate_type","e","parent","children","parseJSON","affiliateCDName","subIDCampaignDetailsModal","campaigns","campaign_id","hasClass","modal","preventDefault","revenueTrackerDetailsModal","lead_count","iframeRevenueTrackerDetailsModal","iframeRevenueTrackersDetailsTable","clear","iframeRevenueTrackersTable","drawCallback","settings","initComplete","aff_id","affiliateWebSiteTable","website_table","websites","website","click","fn","isDataTable","totalClicks","generateButton","downloadLinkID","snapShot","originalGenerateText","generateURL","startDate","payloadData","error","errors","responseJSON","errorContainer","show","errorsHtml","key","value","form","removeAttr","status","message","file","alertDangerWrapper","alertSuccessWrapper","alertDangerContent","alertSuccessContent","downloadURL","encodeURI","errorsContainer","affiliateType","downloadLinkIDNSB","hasSubidBreakdown","nsb_file","activeTab","reload","currentTarget","target","snapShotPeriodField","startDateField","endDateField"],"mappings":"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","file":"affiliate_reports.min.js","sourcesContent":["$(document).ready(function()\r\n{\r\n    $(document).on('show.bs.modal', '.modal', function () {\r\n        var zIndex = 1040 + (10 * $('.modal:visible').length);\r\n        $(this).css('z-index', zIndex);\r\n        setTimeout(function() {\r\n            $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');\r\n        }, 0);\r\n    });\r\n    var alertContainer = $('.alert');\r\n    alertContainer.on('click','.close-internal-report-error',function(){\r\n        $(this).closest('.alert').fadeOut();\r\n        $(this).closest('.internal-error-wrapper').hide();\r\n    });\r\n\r\n    alertContainer.on('click','.close-handp-report-error',function(){\r\n        $(this).closest('.alert').fadeOut();\r\n        $(this).closest('.handp-error-wrapper').hide();\r\n    });\r\n\r\n    alertContainer.on('click','.close-internal-iframe-report-error',function(){\r\n        $(this).closest('.alert').fadeOut();\r\n        $(this).closest('.internal-iframe-error-wrapper').hide();\r\n    });\r\n\r\n    //draggable drilldown modal\r\n    $('.draggable-drilldown-modal').draggable({\r\n        handle: \".modal-header\"\r\n    });\r\n\r\n    var dateRangePicker = $('.date-range-picker');\r\n    dateRangePicker.prop(\"readonly\", true);\r\n\r\n    $('.input-group.date').datepicker({\r\n        format: \"yyyy-mm-dd\",\r\n        clearBtn: true,\r\n        autoclose: true,\r\n        todayHighlight: true,\r\n        orientation: \"top auto\",\r\n        // endDate: '-0d',\r\n        // startDate: '-30d'\r\n    });\r\n\r\n    var lastValue1 = '';\r\n    dateRangePicker.on('propertychange change paste input',function()\r\n    {\r\n        if ($(this).val() != lastValue1) {\r\n            lastValue1 = $(this).val();\r\n            $('#snapshot_period').val('none');\r\n        }\r\n    });\r\n\r\n    dateRangePicker.change(function() {\r\n\r\n        var endDate = $('#end_date');\r\n        //Return to default\r\n        endDate.removeClass('error_field');\r\n\r\n        //Check if dates are valid\r\n        if(Date.parse($('#start_date').val()) > Date.parse(endDate.val())) {\r\n            $('#end_date').addClass('error_field');\r\n        }\r\n    });\r\n\r\n    var snapShotPeriod = $('#snapshot_period');\r\n    snapShotPeriod.change(function()\r\n    {\r\n        //clear the date range\r\n        $('#start_date').val('');\r\n        $('#end_date').val('');\r\n    });\r\n\r\n    /*\r\n     $('.modal-content').resizable({\r\n     //alsoResize: \".modal-dialog\",\r\n     minHeight: 300,\r\n     minWidth: 300\r\n     });\r\n     */\r\n\r\n    //hide first the download buttons\r\n    $('.download-report-btn').hide();\r\n\r\n    //change the link of download csv when snapshot is changed\r\n    var baseURL = $('#baseUrl').html();\r\n    var reportsURL = $('#reportsUrl').html();\r\n    var snapShotSelect = snapShotPeriod;\r\n    var snapshotPeriod = snapShotSelect.val();\r\n\r\n    var dateRangePayload = '?start_date='+$('#start_date').val()+'&end_date='+$('#end_date').val();\r\n\r\n    $('a#downloadXLSInternal').attr('href', baseURL+'/downloadAffiliateReportXLS/1/'+snapshotPeriod+dateRangePayload);\r\n    $('a#downloadXLSHandP').attr('href', baseURL+'/downloadAffiliateReportXLS/2/'+snapshotPeriod+dateRangePayload);\r\n\r\n    snapShotSelect.change(function()\r\n    {\r\n        var snapshotPeriod = $(this).val();\r\n        console.log(snapshotPeriod);\r\n\r\n        var dateRangePayload = '?start_date='+$('#start_date').val()+'&end_date='+$('#end_date').val();\r\n\r\n        $('a#downloadXLSInternal').attr('href', baseURL+'/downloadAffiliateReportXLS/1/'+snapshotPeriod+dateRangePayload);\r\n        $('a#downloadXLSHandP').attr('href', baseURL+'/downloadAffiliateReportXLS/2/'+snapshotPeriod+dateRangePayload);\r\n    });\r\n\r\n    var the_affiliate_url = baseURL + '/getAffiliateReports';\r\n    // var the_affiliate_url = reportsURL + '/affiliate_reports/datatable';\r\n    var the_iframe_affiliate_url = baseURL + '/getIframeAffiliateReports';\r\n    // var handpAffiliateReportsURL = baseURL + '/getHandPAffiliateReports';\r\n    // var handpAffiliateSubIDReportsURL = baseURL + '/getHandPAffiliateSubIDReports';\r\n    var the_iframe_website_url = baseURL + '/getIframeWebsiteReports';\r\n    var the_iframe_revenueTracker_url = baseURL + '/getIframeRevenueTrackerReports';\r\n\r\n    function internalAffiliateReport() {\r\n        console.log('internal affiliate report')\r\n        the_url = baseURL+'/getAffiliateReports';\r\n        //the_url = reportsURL + '/affiliate_reports/datatable';\r\n\r\n        var table = $('#internal-table'),\r\n            body = $('#internal-table tbody'),\r\n            footer = $('#internal-table tfoot tr');\r\n        footer.find(':nth-child(2)').html('')\r\n        footer.find(':nth-child(3)').html('')\r\n        footer.find(':nth-child(4)').html('')\r\n        footer.find(':nth-child(5)').html('')\r\n        footer.find(':nth-child(6)').html('')\r\n        footer.find(':nth-child(7)').html('')\r\n        table.DataTable().destroy();\r\n        body.empty();\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: the_url,\r\n            data: {\r\n                period : $('#snapshot_period').val(),\r\n                affiliate_type : 1,\r\n                start_date : $('#start_date').val(),\r\n                end_date : $('#end_date').val(),\r\n            },\r\n            success: function(data){\r\n\r\n                var total_clicks = 0, total_payout = 0.0, total_leads = 0, total_revenue = 0.0, total_weget = 0.0, total_margin = 0.0;\r\n                var affiliates = data.affiliates;\r\n\r\n                $.each(data.records, function(x, row){\r\n\r\n                    var revenue = row.revenue != null ? (row.revenue).toFixed(2) : 0.0,\r\n                        leadCount = row.leads != null ? row.leads : 0,\r\n                        payout = row.payout != null ? (row.payout).toFixed(3) : 0.0,\r\n                        weGet = (revenue - payout).toFixed(2),\r\n                        margin = (weGet == 0 || revenue ==  0) ? 0 : ((weGet / revenue) * 100).toFixed(2),\r\n                        affiliate = affiliates[row.affiliate_id],\r\n                        clicks = row.clicks != null ? row.clicks : 0;\r\n\r\n                    var affCell = '<span class=\"ar_aff_id\" data-id=\"'+row.affiliate_id+'\" data-type=\"1\">'+affiliate+'</span>';\r\n                    var row = '<tr><td>'+affCell+'</td><td>'+clicks+'</td><td>$ '+payout+'</td><td>'+leadCount+'</td><td> $'+revenue+'</td><td> $'+weGet+'</td><td>'+margin+'%</td></tr>';\r\n                    body.append(row);\r\n\r\n                    total_clicks += Number(clicks);\r\n                    total_payout += Number(payout);\r\n                    total_leads += Number(leadCount);\r\n                    total_revenue += Number(revenue);\r\n                    total_weget += Number(weGet);\r\n                });\r\n\r\n                total_margin = total_revenue == 0 ? 'N/A' : (((total_revenue - total_payout) / total_revenue ) * 100.00).toFixed(2) + '%';\r\n\r\n                footer.find(':nth-child(2)').html(total_clicks)\r\n                footer.find(':nth-child(3)').html('$' + (total_payout).toLocaleString())\r\n                footer.find(':nth-child(4)').html(total_leads)\r\n                footer.find(':nth-child(5)').html('$' + (total_revenue).toLocaleString())\r\n                footer.find(':nth-child(6)').html('$' + (total_weget).toLocaleString())\r\n                footer.find(':nth-child(7)').html(total_margin)\r\n\r\n                table.DataTable({language: {\r\n                    searchPlaceholder: \"Affiliate\"\r\n                }}).draw();\r\n            }\r\n        });\r\n    }\r\n\r\n    $('#internal-table').dataTable();\r\n    $('#affiliate_website-table').dataTable();\r\n    $('#subIDBreakdownTable').dataTable();\r\n    internalAffiliateReport();\r\n\r\n    $('#handp-table').DataTable();\r\n    // $('#handp-subid-table').DataTable();\r\n    \r\n    hostPostAffiliateReport();\r\n    function hostPostAffiliateReport() {\r\n        console.log('host and post affiliate report')\r\n        var the_url = baseURL + '/getHandPAffiliateReports';\r\n\r\n        var table = $('#handp-table'),\r\n            body = $('#handp-table tbody'),\r\n            footer = $('#handp-table tfoot tr');\r\n        footer.find(':nth-child(2)').html('')\r\n        footer.find(':nth-child(3)').html('')\r\n        footer.find(':nth-child(4)').html('')\r\n        footer.find(':nth-child(5)').html('')\r\n        footer.find(':nth-child(6)').html('')\r\n        table.DataTable().destroy();\r\n        body.empty();\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: the_url,\r\n            data: {\r\n                period : $('#snapshot_period').val(),\r\n                affiliate_type : 1,\r\n                start_date : $('#start_date').val(),\r\n                end_date : $('#end_date').val(),\r\n            },\r\n            success: function(data){\r\n                // console.log(data);\r\n                var total_clicks = 0, total_payout = 0.0, total_leads = 0, total_revenue = 0.0, total_weget = 0.0, total_margin = 0.0;\r\n                var affiliates = data.affiliates;\r\n\r\n                $.each(data.records, function(x, row){\r\n\r\n                    var revenue = row.revenue != null ? (row.revenue).toFixed(2) : 0.0,\r\n                        leadCount = row.leads != null ? row.leads : 0,\r\n                        payout = row.payout != null ? (row.payout).toFixed(2) : 0.0,\r\n                        weGet = (revenue - payout).toFixed(2),\r\n                        margin = (weGet == 0 || revenue ==  0) ? 0 : ((weGet / revenue) * 100).toFixed(2),\r\n                        affiliate = affiliates[row.affiliate_id],\r\n                        clicks = row.clicks != null ? row.clicks : 0;\r\n\r\n                    var affCell = '<span class=\"ar_aff_id\" data-id=\"'+row.affiliate_id+'\" data-type=\"1\">'+affiliate+'</span>';\r\n                    var row = '<tr><td>'+affCell+'</td><td>'+leadCount+'</td><td>$ '+payout+'</td><td> $'+revenue+'</td><td> $'+weGet+'</td><td>'+margin+'%</td></tr>';\r\n                    body.append(row);\r\n\r\n                    total_clicks += Number(clicks);\r\n                    total_payout += Number(payout);\r\n                    total_leads += Number(leadCount);\r\n                    total_revenue += Number(revenue);\r\n                    total_weget += Number(weGet);\r\n                });\r\n\r\n                total_margin = total_revenue == 0 ? 'N/A' : (((total_revenue - total_payout) / total_revenue ) * 100.00).toFixed(2) + '%';\r\n\r\n                footer.find(':nth-child(2)').html(total_leads)\r\n                footer.find(':nth-child(3)').html('$' + (total_payout).toLocaleString())\r\n                footer.find(':nth-child(4)').html('$' + (total_revenue).toLocaleString())\r\n                footer.find(':nth-child(5)').html('$' + (total_weget).toLocaleString())\r\n                footer.find(':nth-child(6)').html(total_margin)\r\n\r\n                table.DataTable({language: {\r\n                    searchPlaceholder: \"Affiliate\"\r\n                }}).draw();\r\n            }\r\n        });\r\n    }\r\n\r\n    var internal_iframe_table = $('#internal-iframe-table').DataTable({\r\n        responsive: true,\r\n        'processing': true,\r\n        'serverSide': true,\r\n        language: {\r\n            searchPlaceholder: \"Affiliate\"\r\n            // \"sSearch\": \"<span>Affiliate:</span> _INPUT_\" //search\r\n        },\r\n        lengthMenu: [[25,50,100,-1],[25,50,100,\"All\"]],\r\n        'order': [[ 0, \"asc\" ]],\r\n        'ajax':{\r\n            url: the_iframe_affiliate_url, // json datasource\r\n            type: 'post',\r\n            'data': function(d)\r\n            {\r\n                d.period = $('#snapshot_period').val();\r\n                d.affiliate_type = 1;\r\n                d.start_date = $('#start_date').val();\r\n                d.end_date = $('#end_date').val();\r\n            },\r\n            'dataSrc': function (json)\r\n            {\r\n                console.log(json);\r\n\r\n                $(internal_iframe_table.column(1).footer()).html(json.totalPassovers);\r\n                $(internal_iframe_table.column(2).footer()).html(json.totalPayout);\r\n                $(internal_iframe_table.column(3).footer()).html(json.totalLeads);\r\n                $(internal_iframe_table.column(4).footer()).html(json.totalRevenue);\r\n                $(internal_iframe_table.column(5).footer()).html(json.totalWeGet);\r\n                $(internal_iframe_table.column(6).footer()).html(json.totalMargin);\r\n\r\n                return json.data;\r\n            }\r\n        },\r\n        'columns':[\r\n            {'data':'affiliate'},\r\n            {'data':'passovers'},\r\n            {'data':'payout'},\r\n            {'data':'leads'},\r\n            {'data':'revenue'},\r\n            {'data':'we_get'},\r\n            {'data':'margin'}\r\n        ]\r\n    });\r\n\r\n    var current_affiliate_id = 0;\r\n    var current_affiliate_type = 0;\r\n    var both_table;\r\n\r\n    $('#revenueTrackersDetailsTable').DataTable({\r\n        responsive: true,\r\n        lengthMenu: [[10,15,25,50,100,-1],[10,15,25,50,100,\"All\"]]\r\n    });\r\n\r\n    $('#handp-subid-table').DataTable({\r\n        responsive: true,\r\n        lengthMenu: [[10,15,25,50,100,-1],[10,15,25,50,100,\"All\"]]\r\n    });\r\n\r\n    $('#subIDCampaignDetailsTable').DataTable({\r\n        responsive: true,\r\n        lengthMenu: [[10,15,25,50,100,-1],[10,15,25,50,100,\"All\"]]\r\n    });\r\n\r\n    $(document).on('click','#handp-subid-table tbody tr td:first-child', function(e){\r\n\r\n        if($(this).parent('tr').children().length > 1)\r\n        {\r\n            var affiliate = $.parseJSON($(this).find('.affiliate-details').html());\r\n            var affiliateID = affiliate.affiliate_id;\r\n            var s1 = affiliate.s1,\r\n                s2 = affiliate.s2,\r\n                s3 = affiliate.s3,\r\n                s4 = affiliate.s4,\r\n                s5 = affiliate.s5;\r\n            var affiliateCDName = affiliateID + '/' + s1 + ' - ' + s2 + ' - ' + s3 + ' - ' + s4 + ' - ' + s5;\r\n\r\n            var subIDCampaignDetailsModal = $('#subIDCampaignDetailsModal');\r\n            $('#subID').html(affiliateCDName);\r\n\r\n            var table = $('#subIDCampaignDetailsTable'),\r\n                body = $('#subIDCampaignDetailsTable tbody'),\r\n                footer = $('#subIDCampaignDetailsTable tfoot tr');\r\n            footer.find(':nth-child(2)').html('')\r\n            footer.find(':nth-child(3)').html('')\r\n            table.DataTable().destroy();\r\n            body.empty();\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: baseURL + '/getHandPSubIDReports',\r\n                data: {\r\n                    affiliate_id : affiliateID,\r\n                    s1 : s1,\r\n                    s2 : s2,\r\n                    s3 : s3,\r\n                    s4 : s4,\r\n                    s5 : s5,\r\n                    period : $('#snapshot_period').val(),\r\n                    start_date : $('#start_date').val(),\r\n                    end_date : $('#end_date').val(),\r\n                },\r\n                success: function(data){\r\n                    //console.log(data);\r\n                    var total_leads = 0, total_revenue = 0.0;\r\n                    var campaigns = data.campaigns;\r\n\r\n                    $.each(data.records, function(x, row){\r\n                        // if(row.campaign_id == 1) {\r\n                        //     console.log(row);\r\n                        // }\r\n                        var revenue = row.revenue != null ? (row.revenue).toFixed(2) : 0.0,\r\n                            leadCount = row.leads != null ? row.leads : 0;\r\n\r\n                        var row = '<tr><td>'+campaigns[row.campaign_id]+'</td><td>'+leadCount+'</td><td>$ '+revenue+'</td></tr>';\r\n                        body.append(row);\r\n\r\n                        total_leads += Number(leadCount);\r\n                        total_revenue += Number(revenue);\r\n                    });\r\n\r\n                    footer.find(':nth-child(2)').html(total_leads)\r\n                    footer.find(':nth-child(3)').html('$' + (total_revenue).toLocaleString())\r\n\r\n                    table.DataTable({\r\n                        responsive: true,\r\n                        lengthMenu: [[10,15,25,50,100,-1],[10,15,25,50,100,\"All\"]],\r\n                        language: {\r\n                            searchPlaceholder: \"Campaign\"\r\n                        },\r\n                    }).draw();\r\n                }\r\n            });\r\n\r\n            // var subIDCampaignDetailsTable = $('#subIDCampaignDetailsTable');\r\n            // subIDCampaignDetailsTable.DataTable().clear();\r\n            // subIDCampaignDetailsTable.DataTable().destroy();\r\n\r\n            // var subIDCampaignTable = subIDCampaignDetailsTable.DataTable({\r\n            //     responsive: true,\r\n            //     'processing': true,\r\n            //     'serverSide': true,\r\n            //     language: {\r\n            //         searchPlaceholder: \"Campaign\"\r\n            //     },\r\n            //     lengthMenu: [[10,15,25,50,100,-1],[10,15,25,50,100,\"All\"]],\r\n            //     'order': [[ 0, \"asc\" ]],\r\n            //     'ajax':{\r\n            //         url: the_subIDCampaignDetails_url, //json datasource\r\n            //         type: 'post',\r\n            //         'data': function(d)\r\n            //         {\r\n            //             d.period = $('#snapshot_period').val();\r\n            //             d.affiliate_id = affiliateID;\r\n            //             d.s1 = s1;\r\n            //             d.s2 = s2;\r\n            //             d.s3 = s3;\r\n            //             d.s4 = s4;\r\n            //             d.s5 = s5;\r\n            //             d.start_date = $('#start_date').val();\r\n            //             d.end_date = $('#end_date').val();\r\n            //         },\r\n            //         'dataSrc': function (json)\r\n            //         {\r\n            //             console.log(json);\r\n\r\n            //             $(subIDCampaignTable.column(1).footer()).html(json.totalLeads);\r\n            //             $(subIDCampaignTable.column(2).footer()).html(json.totalRevenue);\r\n\r\n            //             // $('#handpSubIDModal').css('-webkit-filter','blur(5px) grayscale(90%)');\r\n\r\n            //             return json.data;\r\n            //         }\r\n            //     },\r\n            //     'columns':[\r\n            //         {'data':'campaign'},\r\n            //         {'data':'leads'},\r\n            //         {'data':'revenue'}\r\n            //     ],\r\n            //     //'scrollY':        $(window).height()/2,\r\n            //     //'scrollCollapse': true,\r\n            //     //'paging':         false,\r\n            //     'drawCallback': function(settings)\r\n            //     {\r\n            //         //$('.dataTables_scrollBody thead tr').addClass('hidden');\r\n            //         //$('.dataTables_scrollBody tfoot tr').addClass('hidden');\r\n            //         //$('.dataTables_scrollBody thead tr th').removeClass('sorting_asc sorting_desc sorting');\r\n            //         //$('.dataTables_scrollBody thead').css('display','none');\r\n            //         //$('.dataTables_scrollBody tfoot').css('display','none');\r\n            //     },\r\n            //     'initComplete': function()\r\n            //     {\r\n            //         //$('.dataTables_scrollBody thead tr').addClass('hidden');\r\n            //         //$('.dataTables_scrollBody tfoot tr').addClass('hidden');\r\n            //         //$('.dataTables_scrollBody thead tr th').removeClass('sorting_asc sorting_desc sorting');\r\n            //         //$('.dataTables_scrollBody thead').css('display','none');\r\n            //         //$('.dataTables_scrollBody tfoot').css('display','none');\r\n            //     }\r\n            // });\r\n\r\n            if(!subIDCampaignDetailsModal.hasClass('in'))\r\n            {\r\n                subIDCampaignDetailsModal.modal('show');\r\n            }\r\n        }\r\n    });\r\n\r\n    // $('#subIDCampaignDetailsModal').on('hidden.bs.modal', function (e) {\r\n    //   $('#handpSubIDModal').css('-webkit-filter','');\r\n    // });\r\n    var revenueTracker;\r\n    function revSubIDBreakdown() {\r\n        var affiliateID = revenueTracker.data('id');\r\n        var revenueTrackerID = revenueTracker.data('rtid');\r\n        var websiteName = revenueTracker.data('webname');\r\n\r\n        console.log('affiliate_id: '+affiliateID);\r\n        console.log('revenue_tracker_id: '+revenueTrackerID);\r\n        console.log('webname: '+websiteName);\r\n\r\n        $('#downloadSubReportBtn').addClass('disabled');\r\n\r\n        //SubID Breakdown\r\n        $('#AffRevTitle').html(websiteName);\r\n\r\n        the_url = baseURL+'/getRevTrackerSubIDReports';\r\n        //the_url = reportsURL + '/affiliate_reports/datatable';\r\n\r\n        var table = $('#subIDBreakdownTable'),\r\n            body = $('#subIDBreakdownTable tbody'),\r\n            footer = $('#subIDBreakdownTable tfoot tr');\r\n        footer.find(':nth-child(6)').html('')\r\n        footer.find(':nth-child(7)').html('')\r\n        footer.find(':nth-child(8)').html('')\r\n        footer.find(':nth-child(9)').html('')\r\n        footer.find(':nth-child(10)').html('')\r\n        footer.find(':nth-child(11)').html('')\r\n        table.DataTable().destroy();\r\n        body.empty();\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: the_url,\r\n            data: {\r\n                affiliate_id : affiliateID,\r\n                revenue_tracker_id : revenueTrackerID,\r\n                period : $('#snapshot_period').val(),\r\n                start_date : $('#start_date').val(),\r\n                end_date : $('#end_date').val(),\r\n                sib_s1: $('#filter-subid-form #sib_s1').prop('checked'),\r\n                sib_s2: $('#filter-subid-form #sib_s2').prop('checked'),\r\n                sib_s3: $('#filter-subid-form #sib_s3').prop('checked'),\r\n                sib_s4: $('#filter-subid-form #sib_s4').prop('checked'),\r\n            },\r\n            success: function(data){\r\n                // console.log(data);\r\n                var total_clicks = 0, total_payout = 0.0, total_leads = 0, total_revenue = 0.0, total_weget = 0.0, total_margin = 0.0;\r\n\r\n                $.each(data.records, function(x, row){\r\n\r\n                    var revenue = row.revenue != null ? (row.revenue).toFixed(2) : 0.0,\r\n                        leadCount = row.leads != null ? row.leads : 0,\r\n                        payout = row.payout != null ? (row.payout).toFixed(3) : 0.0,\r\n                        weGet = (revenue - payout).toFixed(2),\r\n                        margin = (weGet == 0 || revenue ==  0) ? 0 : ((weGet / revenue) * 100).toFixed(2),\r\n                        clicks = row.clicks != null ? row.clicks : 0,\r\n                        s1 = $('#filter-subid-form #sib_s1').prop('checked') ? row.s1 : '',\r\n                        s2 = $('#filter-subid-form #sib_s2').prop('checked') ? row.s2 : '',\r\n                        s3 = $('#filter-subid-form #sib_s3').prop('checked') ? row.s3 : '',\r\n                        s4 = $('#filter-subid-form #sib_s4').prop('checked') ? row.s4 : '',\r\n                        s5 = row.s5;\r\n\r\n                    var webCell = s1 + '<textarea class=\"subid-details hidden\">'+ JSON.stringify(row)+'</textarea>';\r\n                    var row = '<tr><td>'+webCell+'</td><td>'+s2+'</td><td>'+s3+'</td><td>'+s4+'</td><td>'+s5+'</td><td>'+clicks+'</td><td>$ '+payout+'</td><td>'+leadCount+'</td><td> $'+revenue+'</td><td> $'+weGet+'</td><td>'+margin+'%</td></tr>';\r\n                    body.append(row);\r\n\r\n                    total_clicks += Number(clicks);\r\n                    total_payout += Number(payout);\r\n                    total_leads += Number(leadCount);\r\n                    total_revenue += Number(revenue);\r\n                    total_weget += Number(weGet);\r\n                });\r\n\r\n                total_margin = total_revenue == 0 ? 'N/A' : (((total_revenue - total_payout) / total_revenue ) * 100.00).toFixed(2) + '%';\r\n\r\n                footer.find(':nth-child(6)').html(total_clicks)\r\n                footer.find(':nth-child(7)').html('$' + (total_payout).toLocaleString())\r\n                footer.find(':nth-child(8)').html(total_leads)\r\n                footer.find(':nth-child(9)').html('$' + (total_revenue).toLocaleString())\r\n                footer.find(':nth-child(10)').html('$' + (total_weget).toLocaleString())\r\n                footer.find(':nth-child(11)').html(total_margin)\r\n\r\n                table.DataTable({\r\n                    responsive: true,\r\n                    lengthMenu: [[10,15,25,50,100,-1],[10,15,25,50,100,\"All\"]],\r\n                }).draw();\r\n\r\n                var dlHref = baseURL+'/downloadRevTrackerSubIDReports?affiliate_id='+affiliateID+'&revenue_tracker_id='+revenueTrackerID+'&period='+$('#snapshot_period').val()\r\n                    +'&start_date='+$('#start_date').val()+'&end_date='+$('#end_date').val()+'&sib_s1='+$('#filter-subid-form #sib_s1').prop('checked')+'&sib_s2='+$('#filter-subid-form #sib_s2').prop('checked')+\r\n                    '&sib_s3='+$('#filter-subid-form #sib_s3').prop('checked')+'&sib_s4='+$('#filter-subid-form #sib_s4').prop('checked');\r\n                console.log(dlHref)\r\n                $('#downloadSubReportBtn').removeClass('disabled').attr('href', dlHref);\r\n            }\r\n        });\r\n    }\r\n\r\n    $(document).on('click','#affiliate_website-table tbody tr td:first-child', function(e){\r\n\r\n        if($(this).parent('tr').children().length > 1)\r\n        {\r\n            revenueTracker = $(this).find('.revenue-tracker');\r\n            revSubIDBreakdown();\r\n\r\n            $('#subIDDetailsModal').modal('show');\r\n        }\r\n    });\r\n\r\n    $(document).on('submit','#filter-subid-form', function(e){\r\n\r\n        e.preventDefault();\r\n        revSubIDBreakdown();\r\n    });\r\n\r\n    $('#subIDDetailsModal').on('hidden.bs.modal', function (e) {\r\n      $('#filter-subid-form #sib_s1').prop('checked', false);\r\n      $('#filter-subid-form #sib_s2').prop('checked', false);\r\n      $('#filter-subid-form #sib_s3').prop('checked', false);\r\n      $('#filter-subid-form #sib_s4').prop('checked', false);\r\n    });\r\n\r\n    $(document).on('click','#subIDBreakdownTable tbody tr td:nth-child(1)', function(e){\r\n\r\n        if($(this).parent('tr').children().length > 1)\r\n        {\r\n            var revenueTracker = $.parseJSON($(this).find('.subid-details').html());\r\n            var affiliateID = revenueTracker.affiliate_id;\r\n            var revenueTrackerID = revenueTracker.revenue_tracker_id;\r\n            var s1 = $('#filter-subid-form #sib_s1').prop('checked') ? revenueTracker.s1 : '',\r\n                s2 = $('#filter-subid-form #sib_s2').prop('checked') ? revenueTracker.s2 : '',\r\n                s3 = $('#filter-subid-form #sib_s3').prop('checked') ? revenueTracker.s3 : '',\r\n                s4 = $('#filter-subid-form #sib_s4').prop('checked') ? revenueTracker.s4 : '',\r\n                s5 = revenueTracker.s5;\r\n            var websiteName = s1 + ' - ' + s2 + ' - ' + s3 + ' - ' + s4 + ' - ' + s5;\r\n\r\n            console.log('affiliate_id: '+affiliateID);\r\n            console.log('revenue_tracker_id: '+revenueTrackerID);\r\n            console.log('webname: '+websiteName);\r\n           \r\n            var revenueTrackerDetailsModal = $('#revenueTrackerDetailsModal');\r\n            $('#revenueTrackerWebsite').html(websiteName);\r\n\r\n            the_url = baseURL + '/getRevenueTrackerReports';\r\n            //the_url = reportsURL + '/affiliate_reports/datatable';\r\n\r\n            var table = $('#revenueTrackersDetailsTable'),\r\n                body = $('#revenueTrackersDetailsTable tbody'),\r\n                footer = $('#revenueTrackersDetailsTable tfoot tr');\r\n            footer.find(':nth-child(2)').html('')\r\n            footer.find(':nth-child(3)').html('')\r\n            table.DataTable().destroy();\r\n            body.empty();\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: the_url,\r\n                data: {\r\n                    affiliate_id : affiliateID,\r\n                    revenue_tracker_id : revenueTrackerID,\r\n                    s1 : s1,\r\n                    s2 : s2,\r\n                    s3 : s3,\r\n                    s4 : s4,\r\n                    s5 : s5,\r\n                    period : $('#snapshot_period').val(),\r\n                    start_date : $('#start_date').val(),\r\n                    end_date : $('#end_date').val(),\r\n                    sib_s1: $('#filter-subid-form #sib_s1').prop('checked'),\r\n                    sib_s2: $('#filter-subid-form #sib_s2').prop('checked'),\r\n                    sib_s3: $('#filter-subid-form #sib_s3').prop('checked'),\r\n                    sib_s4: $('#filter-subid-form #sib_s4').prop('checked'),\r\n                },\r\n                success: function(data){\r\n                    // console.log(data);\r\n                    var total_leads = 0, total_revenue = 0.0;\r\n                    var campaigns = data.campaigns;\r\n\r\n                    $.each(data.records, function(x, row){\r\n                        if(row.campaign_id == 1) {\r\n                            console.log(row);\r\n                        }\r\n                        var revenue = row.revenue != null ? (row.revenue).toFixed(2) : 0.0,\r\n                            leadCount = row.lead_count != null ? row.lead_count : 0;\r\n\r\n                        var webCell = row.s1 + '<textarea class=\"subid-details hidden\">'+ JSON.stringify(row)+'</textarea>';\r\n                        var row = '<tr><td>'+campaigns[row.campaign_id]+'</td><td>'+leadCount+'</td><td>$ '+revenue+'</td></tr>';\r\n                        body.append(row);\r\n\r\n                        total_leads += Number(leadCount);\r\n                        total_revenue += Number(revenue);\r\n                    });\r\n\r\n                    footer.find(':nth-child(2)').html(total_leads)\r\n                    footer.find(':nth-child(3)').html('$' + (total_revenue).toLocaleString())\r\n\r\n                    table.DataTable({\r\n                        responsive: true,\r\n                        lengthMenu: [[10,15,25,50,100,-1],[10,15,25,50,100,\"All\"]],\r\n                        language: {\r\n                            searchPlaceholder: \"Campaign\"\r\n                        },\r\n                    }).draw();\r\n                }\r\n            });\r\n\r\n            if(!revenueTrackerDetailsModal.hasClass('in'))\r\n            {\r\n                revenueTrackerDetailsModal.modal('show');\r\n            }\r\n        }\r\n    });\r\n    \r\n    // $('#revenueTrackerDetailsModal').on('hidden.bs.modal', function (e) {\r\n    //   $('#subIDDetailsModal').css('-webkit-filter','');\r\n    // });\r\n\r\n    $(document).on('click','#iframe_affiliate_website-table tbody tr td:first-child', function(e){\r\n\r\n        if($(this).parent('tr').children().length > 1)\r\n        {\r\n            var revenueTracker = $(this).find('.revenue-tracker');\r\n            var affiliateID = revenueTracker.data('id');\r\n            var revenueTrackerID = revenueTracker.data('rtid');\r\n            var websiteName = revenueTracker.data('webname');\r\n\r\n            var iframeRevenueTrackerDetailsModal = $('#iframeRevenueTrackerDetailsModal');\r\n\r\n            console.log('affiliate_id: '+affiliateID);\r\n            console.log('revenue_tracker_id: '+revenueTrackerID);\r\n            console.log('webname: '+websiteName);\r\n\r\n            //$('#snapshot_period option:selected').html()\r\n            $('#iframeRevenueTrackerWebsite').html(websiteName);\r\n\r\n            var iframeRevenueTrackersDetailsTable = $('#iframeRevenueTrackersDetailsTable');\r\n            iframeRevenueTrackersDetailsTable.DataTable().clear();\r\n            iframeRevenueTrackersDetailsTable.DataTable().destroy();\r\n\r\n            var iframeRevenueTrackersTable = iframeRevenueTrackersDetailsTable.DataTable({\r\n                responsive: true,\r\n                'processing': true,\r\n                'serverSide': true,\r\n                language: {\r\n                    searchPlaceholder: \"Campaign\"\r\n                },\r\n                lengthMenu: [[10,15,25,50,100,-1],[10,15,25,50,100,\"All\"]],\r\n                'order': [[ 0, \"asc\" ]],\r\n                'ajax':{\r\n                    url: the_iframe_revenueTracker_url, // json datasource\r\n                    type: 'post',\r\n                    'data': function(d)\r\n                    {\r\n                        d.period = $('#snapshot_period').val();\r\n                        d.affiliate_id = affiliateID;\r\n                        d.revenue_tracker_id = revenueTrackerID;\r\n                        d.start_date = $('#start_date').val();\r\n                        d.end_date = $('#end_date').val();\r\n                    },\r\n                    'dataSrc': function (json)\r\n                    {\r\n                        console.log(json);\r\n\r\n                        $(iframeRevenueTrackersTable.column(1).footer()).html(json.totalLeads);\r\n                        $(iframeRevenueTrackersTable.column(2).footer()).html(json.totalRevenue);\r\n\r\n                        return json.data;\r\n                    }\r\n                },\r\n                'columns':[\r\n                    {'data':'campaign'},\r\n                    {'data':'leads'},\r\n                    {'data':'revenue'}\r\n                ],\r\n                //'scrollY':        $(window).height()/2,\r\n                //'scrollCollapse': true,\r\n                //'paging':         false,\r\n                'drawCallback': function(settings)\r\n                {\r\n                    //$('.dataTables_scrollBody thead tr').addClass('hidden');\r\n                    //$('.dataTables_scrollBody tfoot tr').addClass('hidden');\r\n                    //$('.dataTables_scrollBody thead tr th').removeClass('sorting_asc sorting_desc sorting');\r\n                    //$('.dataTables_scrollBody thead').css('display','none');\r\n                    //$('.dataTables_scrollBody tfoot').css('display','none');\r\n                },\r\n                'initComplete': function()\r\n                {\r\n                    //$('.dataTables_scrollBody thead tr').addClass('hidden');\r\n                    //$('.dataTables_scrollBody tfoot tr').addClass('hidden');\r\n                    //$('.dataTables_scrollBody thead tr th').removeClass('sorting_asc sorting_desc sorting');\r\n                    //$('.dataTables_scrollBody thead').css('display','none');\r\n                    //$('.dataTables_scrollBody tfoot').css('display','none');\r\n                }\r\n            });\r\n\r\n            if(!iframeRevenueTrackerDetailsModal.hasClass('in'))\r\n            {\r\n                iframeRevenueTrackerDetailsModal.modal('show');\r\n            }\r\n        }\r\n    });\r\n\r\n    //Website Statistics breakdown\r\n    $(document).on('click','#internal-iframe-table tbody tr td:first-child',function(e)\r\n    {\r\n        if($(this).parent('tr').children().length > 1)\r\n        {\r\n\r\n            var affiliate = $(this).find('.ar_aff_id');\r\n            var aff_id = affiliate.data('id');\r\n\r\n            $('#pr_aff_cmp').html($(this).find('.ar_aff_id').html());\r\n            current_affiliate_id = aff_id;\r\n\r\n            var affiliateWebSiteTable = $('#iframe_affiliate_website-table');\r\n            affiliateWebSiteTable.DataTable().clear();\r\n            affiliateWebSiteTable.DataTable().destroy();\r\n\r\n            var website_table = affiliateWebSiteTable.DataTable({\r\n                responsive: true,\r\n                'processing': true,\r\n                'serverSide': true,\r\n                language: {\r\n                    searchPlaceholder: \"Website\"\r\n                },\r\n                lengthMenu: [[10,15,25,50,100,-1],[10,15,25,50,100,\"All\"]],\r\n                'order': [[ 0, \"asc\" ]],\r\n                'ajax':{\r\n                    url: the_iframe_website_url, // json datasource\r\n                    type: 'post',\r\n                    'data': function(d)\r\n                    {\r\n                        d.period = $('#snapshot_period').val();\r\n                        d.affiliate_id = current_affiliate_id;\r\n                        d.start_date = $('#start_date').val();\r\n                        d.end_date = $('#end_date').val();\r\n                    },\r\n                    'dataSrc': function (json)\r\n                    {\r\n                        console.log(json);\r\n\r\n                        $(website_table.column(1).footer()).html(json.totalPassovers);\r\n                        $(website_table.column(2).footer()).html(json.totalPayout);\r\n                        $(website_table.column(3).footer()).html(json.totalLeads);\r\n                        $(website_table.column(4).footer()).html(json.totalRevenue);\r\n                        $(website_table.column(5).footer()).html(json.totalWeGet);\r\n                        $(website_table.column(6).footer()).html(json.totalMargin);\r\n\r\n                        return json.data;\r\n                    }\r\n                },\r\n                'columns':[\r\n                    {'data':'website_name'},\r\n                    {'data':'passovers'},\r\n                    {'data':'payout'},\r\n                    {'data':'leads'},\r\n                    {'data':'revenue'},\r\n                    {'data':'we_get'},\r\n                    {'data':'margin'}\r\n                ]\r\n            });\r\n\r\n            //website_table.order([]);\r\n            //website_table.ajax.reload();\r\n            $('#prIframeAffiliateWebsiteModal').modal('show');\r\n        }\r\n    });\r\n\r\n    //Inter Affiliate Reports Website Statistics breakdown\r\n    $(document).on('click','#internal-table tbody tr td:first-child',function(e)\r\n    {\r\n        if($(this).parent('tr').children().length > 1) {\r\n            var affiliate = $(this).find('.ar_aff_id');\r\n            var aff_id = affiliate.data('id');\r\n            var affiliate_type = affiliate.data('type');\r\n\r\n            $('#pr_aff_cmp').html($(this).find('.ar_aff_id').html());\r\n            current_affiliate_id = aff_id;\r\n            current_affiliate_type = affiliate_type;\r\n\r\n            the_url = baseURL+'/getWebsiteReports';\r\n            //the_url = reportsURL + '/affiliate_reports/datatable';\r\n\r\n            var table = $('#affiliate_website-table'),\r\n                body = $('#affiliate_website-table tbody'),\r\n                footer = $('#affiliate_website-table tfoot tr');\r\n            footer.find(':nth-child(2)').html('')\r\n            footer.find(':nth-child(3)').html('')\r\n            footer.find(':nth-child(4)').html('')\r\n            footer.find(':nth-child(5)').html('')\r\n            footer.find(':nth-child(6)').html('')\r\n            footer.find(':nth-child(7)').html('')\r\n            table.DataTable().destroy();\r\n            body.empty();\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: the_url,\r\n                data: {\r\n                    affiliate_id : current_affiliate_id,\r\n                    period : $('#snapshot_period').val(),\r\n                    affiliate_type : affiliate_type,\r\n                    start_date : $('#start_date').val(),\r\n                    end_date : $('#end_date').val(),\r\n                },\r\n                success: function(data){\r\n                    var total_clicks = 0, total_payout = 0.0, total_leads = 0, total_revenue = 0.0, total_weget = 0.0, total_margin = 0.0;\r\n                    var websites = data.websites;\r\n\r\n                    $.each(data.records, function(x, row){\r\n\r\n                        var revenue = row.revenue != null ? (row.revenue).toFixed(2) : 0.0,\r\n                            leadCount = row.leads != null ? row.leads : 0,\r\n                            payout = row.payout != null ? (row.payout).toFixed(3) : 0.0,\r\n                            weGet = (revenue - payout).toFixed(2),\r\n                            margin = (weGet == 0 || revenue ==  0) ? 0 : ((weGet / revenue) * 100).toFixed(2),\r\n                            website = websites[row.revenue_tracker_id],\r\n                            clicks = row.clicks != null ? row.clicks : 0;\r\n\r\n                        var webCell = '<span class=\"revenue-tracker\" data-id=\"'+ row.affiliate_id+'\" data-rtid=\"'+row.revenue_tracker_id+'\" data-webname=\"'+website+'\">'+website+'</span>';\r\n                        var row = '<tr><td>'+webCell+'</td><td>'+clicks+'</td><td>$ '+payout+'</td><td>'+leadCount+'</td><td> $'+revenue+'</td><td> $'+weGet+'</td><td>'+margin+'%</td></tr>';\r\n                        body.append(row);\r\n\r\n                        total_clicks += Number(clicks);\r\n                        total_payout += Number(payout);\r\n                        total_leads += Number(leadCount);\r\n                        total_revenue += Number(revenue);\r\n                        total_weget += Number(weGet);\r\n                    });\r\n\r\n                    total_margin = total_revenue == 0 ? 'N/A' : (((total_revenue - total_payout) / total_revenue ) * 100.00).toFixed(2) + '%';\r\n\r\n                    footer.find(':nth-child(2)').html(total_clicks)\r\n                    footer.find(':nth-child(3)').html('$' + (total_payout).toLocaleString())\r\n                    footer.find(':nth-child(4)').html(total_leads)\r\n                    footer.find(':nth-child(5)').html('$' + (total_revenue).toLocaleString())\r\n                    footer.find(':nth-child(6)').html('$' + (total_weget).toLocaleString())\r\n                    footer.find(':nth-child(7)').html(total_margin)\r\n\r\n                    table.DataTable({\r\n                        responsive: true,\r\n                        lengthMenu: [[10,15,25,50,100,-1],[10,15,25,50,100,\"All\"]],\r\n                        language: {\r\n                            searchPlaceholder: \"Website\"\r\n                        }\r\n                    }).draw();\r\n                }\r\n            });\r\n            $('#prAffiliateWebsiteModal').modal('show');\r\n        }\r\n    });\r\n\r\n    //subID Statistics breakdown\r\n    $(document).on('click','#handp-table tbody tr td:first-child',function(e)\r\n    {\r\n        if($(this).parent('tr').children().length > 1)\r\n        {\r\n            var affiliate = $(this).find('.ar_aff_id');\r\n            var aff_id = affiliate.data('id');\r\n            var affiliate_type = affiliate.data('type');\r\n\r\n            $('#handp_aff_cmp').html($(this).find('.ar_aff_id').html());\r\n            current_affiliate_id = aff_id;\r\n            current_affiliate_type = affiliate_type;\r\n\r\n            var table = $('#handp-subid-table'),\r\n                body = $('#handp-subid-table tbody'),\r\n                footer = $('#handp-subid-table tfoot tr');\r\n            footer.find(':nth-child(7)').html('')\r\n            footer.find(':nth-child(8)').html('')\r\n            footer.find(':nth-child(9)').html('')\r\n            footer.find(':nth-child(10)').html('')\r\n            footer.find(':nth-child(11)').html('')\r\n            table.DataTable().destroy();\r\n            body.empty();\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: baseURL + '/getHandPAffiliateSubIDReports',\r\n                data: {\r\n                    affiliate_id : current_affiliate_id,\r\n                    period : $('#snapshot_period').val(),\r\n                    affiliate_type : current_affiliate_type,\r\n                    affiliate_id : current_affiliate_id,\r\n                    start_date : $('#start_date').val(),\r\n                    end_date : $('#end_date').val(),\r\n                },\r\n                success: function(data){\r\n                    // console.log(data);\r\n                    var total_payout = 0.0, total_leads = 0, total_revenue = 0.0, total_weget = 0.0, total_margin = 0.0;\r\n                    var websites = data.websites;\r\n\r\n                    $.each(data.records, function(x, row){\r\n\r\n                        var revenue = row.revenue != null ? (row.revenue).toFixed(2) : 0.0,\r\n                            leadCount = row.leads != null ? row.leads : 0,\r\n                            payout = row.payout != null ? (row.payout).toFixed(2) : 0.0,\r\n                            weGet = (revenue - payout).toFixed(2),\r\n                            margin = (weGet == 0 || revenue ==  0) ? 0 : ((weGet / revenue) * 100).toFixed(2);\r\n\r\n                        var webCell = row.affiliate_id + '<textarea class=\"affiliate-details hidden\">'+ JSON.stringify(row)+'</textarea>';\r\n                        var row = '<tr><td>'+webCell+'</td><td>'+row.s1+'</td><td>'+row.s2+'</td><td>'+row.s3+'</td><td>'+row.s4+'</td><td>'+row.s5+'</td><td>'+leadCount+'</td><td>$ '+payout+'</td><td> $'+revenue+'</td><td> $'+weGet+'</td><td>'+margin+'%</td></tr>';\r\n                        body.append(row);\r\n\r\n                        total_payout += Number(payout);\r\n                        total_leads += Number(leadCount);\r\n                        total_revenue += Number(revenue);\r\n                        total_weget += Number(weGet);\r\n                    });\r\n\r\n                    total_margin = total_revenue == 0 ? 'N/A' : (((total_revenue - total_payout) / total_revenue ) * 100.00).toFixed(2) + '%';\r\n\r\n                    footer.find(':nth-child(7)').html(total_leads)\r\n                    footer.find(':nth-child(8)').html('$' + (total_payout).toLocaleString())\r\n                    footer.find(':nth-child(9)').html('$' + (total_revenue).toLocaleString())\r\n                    footer.find(':nth-child(10)').html('$' + (total_weget).toLocaleString())\r\n                    footer.find(':nth-child(11)').html(total_margin)\r\n\r\n                    table.DataTable({\r\n                        responsive: true,\r\n                        lengthMenu: [[10,15,25,50,100,-1],[10,15,25,50,100,\"All\"]],\r\n                        language: {\r\n                            searchPlaceholder: \"Sub ID\"\r\n                        }\r\n                    }).draw();\r\n                }\r\n            });\r\n\r\n            // var subIDTable = handpSubIDTable.DataTable({\r\n            //     responsive: true,\r\n            //     'processing': true,\r\n            //     'serverSide': true,\r\n            //     language: {\r\n            //         searchPlaceholder: \"Sub ID\"\r\n            //     },\r\n            //     lengthMenu: [[10,15,25,50,100,-1],[10,15,25,50,100,\"All\"]],\r\n            //     'order': [[ 0, \"asc\" ]],\r\n            //     'ajax':{\r\n            //         url: handpAffiliateSubIDReportsURL, // json datasource\r\n            //         type: 'post',\r\n            //         'data': function(d)\r\n            //         {\r\n            //             d.period = $('#snapshot_period').val();\r\n            //             d.affiliate_type = current_affiliate_type;\r\n            //             d.affiliate_id = current_affiliate_id;\r\n            //             d.start_date = $('#start_date').val();\r\n            //             d.end_date = $('#end_date').val();\r\n            //         },\r\n            //         'dataSrc': function (json)\r\n            //         {\r\n            //             console.log(json);\r\n\r\n            //             $(subIDTable.column(2).footer()).html(json.totalLeads);\r\n            //             $(subIDTable.column(3).footer()).html(json.totalPayout);\r\n            //             $(subIDTable.column(4).footer()).html(json.totalRevenue);\r\n            //             $(subIDTable.column(5).footer()).html(json.totalWeGet);\r\n            //             $(subIDTable.column(6).footer()).html(json.totalMargin);\r\n\r\n            //             return json.data;\r\n            //         }\r\n            //     },\r\n            //     'columns':[\r\n            //         {'data':'affiliate'},\r\n            //         {'data':'s1'},\r\n            //         {'data':'s2'},\r\n            //         {'data':'s3'},\r\n            //         {'data':'s4'},\r\n            //         {'data':'s5'},\r\n            //         {'data':'leads'},\r\n            //         {'data':'payout'},\r\n            //         {'data':'revenue'},\r\n            //         {'data':'we_get'},\r\n            //         {'data':'margin'}\r\n            //     ]\r\n            // });\r\n\r\n            // website_table.order([]);\r\n            // website_table.ajax.reload();\r\n            $('#handpSubIDModal').modal('show');\r\n        }\r\n    });\r\n\r\n    $('[href=\"#internal_tab\"]').click(function()\r\n    {\r\n        $('.alert-danger-wrapper').hide();\r\n        $('.alert-warning-wrapper').hide();\r\n        $('.alert-success-wrapper').hide();\r\n        $('.internal-error-wrapper').hide();\r\n    });\r\n\r\n    $('[href=\"#handp_tab\"]').click(function()\r\n    {\r\n        $('.alert-danger-wrapper').hide();\r\n        $('.alert-warning-wrapper').hide();\r\n        $('.alert-success-wrapper').hide();\r\n        $('.handp-error-wrapper').hide();\r\n    });\r\n\r\n    $('[href=\"#internal_iframe_tab\"]').click(function()\r\n    {\r\n        $('.alert-danger-wrapper').hide();\r\n        $('.alert-warning-wrapper').hide();\r\n        $('.alert-success-wrapper').hide();\r\n        $('.internal-iframe-error-wrapper').hide();\r\n    });\r\n\r\n    $('[href=\"#both_tab\"]').click(function()\r\n    {\r\n        if(!$.fn.DataTable.isDataTable('#both-table'))\r\n        {\r\n            both_table = $('#both-table').DataTable({\r\n                responsive: true,\r\n                'processing': true,\r\n                'serverSide': true,\r\n                language: {\r\n                    searchPlaceholder: \"Affiliate\"\r\n                    // \"sSearch\": \"<span>Affiliate:</span> _INPUT_\" //search\r\n                },\r\n                lengthMenu: [[25,50,100,-1],[25,50,100,\"All\"]],\r\n                'order': [[ 0, \"asc\" ]],\r\n                'ajax':{\r\n                    url:the_affiliate_url, // json datasource\r\n                    type: 'post',\r\n                    'data': function(d)\r\n                    {\r\n                        d.period = $('#snapshot_period').val();\r\n                        d.affiliate_type = 0;\r\n                        d.start_date = $('#start_date').val();\r\n                        d.end_date = $('#end_date').val();\r\n                    },\r\n                    'dataSrc': function (json)\r\n                    {\r\n                        console.log(json);\r\n\r\n                        $(both_table.column(1).footer()).html(json.totalClicks);\r\n                        $(both_table.column(2).footer()).html(json.totalPayout);\r\n                        $(both_table.column(3).footer()).html(json.totalLeads);\r\n                        $(both_table.column(4).footer()).html(json.totalRevenue);\r\n                        $(both_table.column(5).footer()).html(json.totalWeGet);\r\n                        $(both_table.column(6).footer()).html(json.totalMargin);\r\n\r\n                        return json.data;\r\n                    }\r\n                },\r\n                'columns':[\r\n                    {'data':'affiliate'},\r\n                    {'data':'clicks'},\r\n                    {'data':'payout'},\r\n                    {'data':'leads'},\r\n                    {'data':'revenue'},\r\n                    {'data':'we_get'},\r\n                    {'data':'margin'}\r\n                ]\r\n            });\r\n        }\r\n    });\r\n\r\n    $('.generate-handp-excel-report').click(function(){\r\n\r\n        var generateButton = $(this);\r\n        //var affiliateType = generateButton.data('affiliate_type');\r\n        var downloadLinkID = generateButton.data('download_link_id');\r\n        var snapShot = snapShotSelect.val();\r\n\r\n        var originalGenerateText = generateButton.html();\r\n\r\n        var generateURL = baseURL+'/generateHandPAffiliateReportsXLS/'+snapShot;\r\n\r\n        generateButton.attr('disabled','true');\r\n        generateButton.html('<i class=\"fa fa-spin fa-spinner\"></i>');\r\n\r\n        var startDate = $('#start_date').val();\r\n        var endDate = $('#end_date').val();\r\n\r\n        var payloadData = {\r\n            start_date: startDate,\r\n            end_date: endDate\r\n        };\r\n\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: generateURL,\r\n            data: payloadData,\r\n            error: function(data)\r\n            {\r\n                var errors = data.responseJSON;\r\n                console.log(data);\r\n\r\n                var errorContainer = $('.this_errors');\r\n\r\n                $('.this_error_wrapper').show();\r\n                errorContainer.html('');\r\n                errorContainer.show();\r\n\r\n                var errorsHtml = '<ul>';\r\n\r\n                $.each( errors, function( key, value ) {\r\n                    errorsHtml += '<li> <span class=\"glyphicon glyphicon-remove-sign\" aria-hidden=\"true\"></span> ' + value[0] + '</li>'; //showing only the first error.\r\n                    form.find('label[for=\"'+key+'\"]').addClass('error_label error');\r\n                    form.find('#'+key).addClass('error_field error');\r\n                });\r\n\r\n                errorsHtml += '</ul>';\r\n                errorContainer.append(errorsHtml);\r\n\r\n                generateButton.html(originalGenerateText);\r\n                generateButton.removeAttr('disabled');\r\n\r\n            },\r\n            success: function(data)\r\n            {\r\n                $('.this_error_wrapper').show();\r\n                console.log(data.status);\r\n                console.log(data.message);\r\n                console.log(data.key);\r\n                console.log(data.file);\r\n\r\n                var alertDangerWrapper = $('.alert-danger-wrapper');\r\n                var alertSuccessWrapper = $('.alert-success-wrapper');\r\n\r\n                alertDangerWrapper.hide();\r\n                $('.alert-warning-wrapper').hide();\r\n                alertSuccessWrapper.hide();\r\n\r\n                switch(data.status)\r\n                {\r\n                    case 'generate_failed':\r\n\r\n                        alertDangerWrapper.show();\r\n                        var alertDangerContent = $('.alert-danger-content');\r\n                        alertDangerContent.html('');\r\n                        alertDangerContent.append(data.message);\r\n                        break;\r\n\r\n                    default:\r\n\r\n                        alertSuccessWrapper.show();\r\n                        var alertSuccessContent = $('.alert-success-content');\r\n                        alertSuccessContent.html('');\r\n                        alertSuccessContent.append(data.message);\r\n\r\n                        console.log(downloadLinkID);\r\n                        console.log(snapShot);\r\n\r\n                        // var dateRangePayload = '?start_date='+$('#start_date').val()+'&end_date='+$('#end_date').val();\r\n\r\n                        //update the download button\r\n                        var downloadURL = baseURL+'/downloadAffiliateReportXLS?file_name_dl='+encodeURI(data.file);\r\n                        $(downloadLinkID).attr('href', downloadURL);\r\n                        // $(downloadLinkID).attr('href', baseURL+'/downloadHandPAffiliateReportXLS/'+snapShot+dateRangePayload);\r\n\r\n                        //show the DL link\r\n                        $(downloadLinkID).show();\r\n\r\n                        break;\r\n                }\r\n\r\n                generateButton.html(originalGenerateText);\r\n                generateButton.removeAttr('disabled');\r\n            }\r\n        });\r\n\r\n    });\r\n\r\n    $('.generate-iframe-excel-report').click(function()\r\n    {\r\n        var generateButton = $(this);\r\n        //var affiliateType = generateButton.data('affiliate_type');\r\n        var downloadLinkID = generateButton.data('download_link_id');\r\n        var snapShot = snapShotSelect.val();\r\n\r\n        var originalGenerateText = generateButton.html();\r\n\r\n        var generateURL = baseURL+'/generateIframeAffiliateReportXLS/'+snapShot;\r\n\r\n        generateButton.attr('disabled','true');\r\n        generateButton.html('<i class=\"fa fa-spin fa-spinner\"></i>');\r\n\r\n        var startDate = $('#start_date').val();\r\n        var endDate = $('#end_date').val();\r\n\r\n        var payloadData = {\r\n            start_date: startDate,\r\n            end_date: endDate\r\n        };\r\n\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: generateURL,\r\n            data: payloadData,\r\n            error: function(data)\r\n            {\r\n                var errors = data.responseJSON;\r\n                console.log(data);\r\n\r\n                var errorsContainer = $('.this_errors');\r\n                $('.this_error_wrapper').show();\r\n                errorsContainer.html('');\r\n                errorsContainer.show();\r\n\r\n                var errorsHtml = '<ul>';\r\n                $.each( errors, function( key, value ) {\r\n                    errorsHtml += '<li> <span class=\"glyphicon glyphicon-remove-sign\" aria-hidden=\"true\"></span> ' + value[0] + '</li>'; //showing only the first error.\r\n                    form.find('label[for=\"'+key+'\"]').addClass('error_label error');\r\n                    form.find('#'+key).addClass('error_field error');\r\n                });\r\n\r\n                errorsHtml += '</ul>';\r\n\r\n                errorsContainer.append(errorsHtml);\r\n\r\n                generateButton.html(originalGenerateText);\r\n                generateButton.removeAttr('disabled');\r\n\r\n            },\r\n            success: function(data)\r\n            {\r\n                $('.this_error_wrapper').show();\r\n                console.log(data.status);\r\n                console.log(data.message);\r\n                console.log(data.key);\r\n                console.log(data.file);\r\n\r\n                var alertDangerWrapper = $('.alert-danger-wrapper');\r\n                alertDangerWrapper.hide();\r\n                $('.alert-warning-wrapper').hide();\r\n                var alertSuccessWrapper = $('.alert-success-wrapper');\r\n                alertSuccessWrapper.hide();\r\n\r\n                switch(data.status)\r\n                {\r\n                    case 'generate_failed':\r\n\r\n                        alertDangerWrapper.show();\r\n                        var alertDangerContent = $('.alert-danger-content');\r\n                        alertDangerContent.html('');\r\n                        alertDangerContent.append(data.message);\r\n                        break;\r\n\r\n                    default:\r\n\r\n                        alertSuccessWrapper.show();\r\n                        var alertSuccessContent = $('.alert-success-content');\r\n                        alertSuccessContent.html('');\r\n                        alertSuccessContent.append(data.message);\r\n\r\n                        console.log(downloadLinkID);\r\n                        console.log(snapShot);\r\n\r\n                        // var dateRangePayload = '?start_date='+$('#start_date').val()+'&end_date='+$('#end_date').val();\r\n\r\n                        //update the download button\r\n                        var downloadURL = baseURL+'/downloadAffiliateReportXLS?file_name_dl='+encodeURI(data.file);\r\n                        $(downloadLinkID).attr('href', downloadURL);\r\n                        // $(downloadLinkID).attr('href', baseURL+'/downloadIframeAffiliateReportXLS/'+snapShot+dateRangePayload);\r\n\r\n                        //show the DL link\r\n                        $(downloadLinkID).show();\r\n\r\n                        break;\r\n                }\r\n\r\n                generateButton.html(originalGenerateText);\r\n                generateButton.removeAttr('disabled');\r\n            }\r\n        });\r\n\r\n    });\r\n\r\n    $('.generate-excel-report').click(function()\r\n    {\r\n        var generateButton = $(this);\r\n        var affiliateType = generateButton.data('affiliate_type');\r\n        var downloadLinkID = generateButton.data('download_link_id');\r\n        var downloadLinkIDNSB = $('#downloadXLSInternalNSB');\r\n        var snapShot = snapShotSelect.val();\r\n\r\n        var originalGenerateText = generateButton.html();\r\n\r\n        $(downloadLinkID).hide();\r\n        $(downloadLinkIDNSB).hide();\r\n\r\n        //$('a#downloadXLSInternal').attr('href', baseURL+'/downloadAffiliateReportXLS/1/'+snapshotPeriod);\r\n        var generateURL = baseURL+'/generateAffiliateReportXLS/'+affiliateType+'/'+snapShot\r\n        // var generateURL = reportsURL+'/affiliate_reports/generate/'+affiliateType+'/'+snapShot\r\n\r\n        generateButton.attr('disabled','true');\r\n        generateButton.html('<i class=\"fa fa-spin fa-spinner\"></i>');\r\n\r\n        var startDate = $('#start_date').val();\r\n        var endDate = $('#end_date').val();\r\n\r\n        var payloadData = {\r\n            start_date: startDate,\r\n            end_date: endDate\r\n        };\r\n\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: generateURL,\r\n            data: payloadData,\r\n            error: function(data)\r\n            {\r\n                var errors = data.responseJSON;\r\n                console.log(data);\r\n\r\n                var errorsContainer = $('.this_errors');\r\n                $('.this_error_wrapper').show();\r\n                errorsContainer.html('');\r\n                errorsContainer.show();\r\n\r\n                var errorsHtml = '<ul>';\r\n                $.each( errors, function( key, value ) {\r\n                    errorsHtml += '<li> <span class=\"glyphicon glyphicon-remove-sign\" aria-hidden=\"true\"></span> ' + value[0] + '</li>'; //showing only the first error.\r\n                    form.find('label[for=\"'+key+'\"]').addClass('error_label error');\r\n                    form.find('#'+key).addClass('error_field error');\r\n                });\r\n\r\n                errorsHtml += '</ul>';\r\n\r\n                errorsContainer.append(errorsHtml);\r\n\r\n                generateButton.html(originalGenerateText);\r\n                generateButton.removeAttr('disabled');\r\n\r\n            },\r\n            success: function(data)\r\n            {\r\n                $('.this_error_wrapper').show();\r\n                console.log(data);\r\n\r\n                var alertDangerWrapper = $('.alert-danger-wrapper');\r\n                alertDangerWrapper.hide();\r\n                $('.alert-warning-wrapper').hide();\r\n                var alertSuccessWrapper = $('.alert-success-wrapper');\r\n                alertSuccessWrapper.hide();\r\n\r\n                switch(data.status)\r\n                {\r\n                    case 'generate_failed':\r\n\r\n                        alertDangerWrapper.show();\r\n                        var alertDangerContent = $('.alert-danger-content');\r\n                        alertDangerContent.html('');\r\n                        alertDangerContent.append(data.message);\r\n                        break;\r\n                    default:\r\n\r\n                        alertSuccessWrapper.show();\r\n                        var alertSuccessContent = $('.alert-success-content');\r\n                        alertSuccessContent.html('');\r\n                        alertSuccessContent.append(data.message);\r\n\r\n                        // var dateRangePayload = '?start_date='+$('#start_date').val()+'&end_date='+$('#end_date').val();\r\n\r\n                        if(data.status == 'generate_successful') {\r\n                            //update the download button\r\n                            // $(downloadLinkID).attr('href', baseURL+'/downloadAffiliateReportXLS/'+affiliateType+'/'+snapShot+dateRangePayload);\r\n                            var downloadURL = reportsURL+'/downloadAffiliateReportXLS?file_name_dl='+encodeURI(data.file);\r\n                            // var downloadURL = reportsURL+'/affiliate_reports/download/?file_name_dl='+encodeURI(data.file);\r\n                            $(downloadLinkID).attr('href', downloadURL);\r\n\r\n                            //show the DL link\r\n                            $(downloadLinkID).show();\r\n\r\n                            if(data.hasSubidBreakdown) {\r\n                                var downloadURL = reportsURL+'/downloadAffiliateReportXLS?file_name_dl='+encodeURI(data.nsb_file);\r\n                                // var downloadURL = reportsURL+'/affiliate_reports/download/?file_name_dl='+encodeURI(data.nsb_file);\r\n                                $(downloadLinkIDNSB).attr('href', downloadURL);\r\n                                $(downloadLinkIDNSB).show();\r\n                            }\r\n\r\n                        }\r\n\r\n                        break;\r\n                }\r\n\r\n                generateButton.html(originalGenerateText);\r\n                generateButton.removeAttr('disabled');\r\n            }\r\n        });\r\n\r\n    });\r\n\r\n    //at first the internal tab is the current active tab.\r\n    var activeTab = '#internal_tab';\r\n\r\n    $(document).on('submit','#updatePublisherReportsTable',function(e)\r\n    {\r\n        e.preventDefault();\r\n\r\n        $('.pr_sp_periord').html($('#snapshot_period option:selected').html());\r\n        console.log(activeTab);\r\n\r\n        var snapShot = $('#snapshot_period').val();\r\n        var startDate = $('#start_date').val();\r\n        var endDate = $('#end_date').val();\r\n\r\n        if($.fn.DataTable.isDataTable('#internal-table' ) && activeTab == '#internal_tab')\r\n        {\r\n            //update the hidden fields/variables\r\n            $('#internal_tab_snap_shot').val(snapShot);\r\n            $('#internal_tab_start_date').val(startDate);\r\n            $('#internal_tab_end_date').val(endDate);\r\n\r\n            // internal_table.order([[ 0, \"asc\" ]]);\r\n            // internal_table.ajax.reload();\r\n            internalAffiliateReport();\r\n        }\r\n\r\n        if ($.fn.DataTable.isDataTable('#handp-table') && activeTab == '#handp_tab')\r\n        {\r\n            //update the hidden fields/variables\r\n            $('#handp_tab_snap_shot').val(snapShot);\r\n            $('#hand_tab_start_date').val(startDate);\r\n            $('#handp_tab_end_date').val(endDate);\r\n\r\n            // handp_table.order([[ 0, \"asc\" ]]);\r\n            // handp_table.ajax.reload();\r\n\r\n            hostPostAffiliateReport();\r\n        }\r\n\r\n        if ($.fn.DataTable.isDataTable('#internal-iframe-table') && activeTab == '#internal_iframe_tab')\r\n        {\r\n            //update the hidden fields/variables\r\n            $('#internal_iframe_tab_snap_shot').val(snapShot);\r\n            $('#internal_iframe_tab_start_date').val(startDate);\r\n            $('#internal_iframe_end_date').val(endDate);\r\n\r\n            console.log('awts');\r\n\r\n            internal_iframe_table.order([[ 0, \"asc\" ]]);\r\n            internal_iframe_table.ajax.reload();\r\n        }\r\n\r\n        if($.fn.DataTable.isDataTable('#both-table') && activeTab == '#both')\r\n        {\r\n            both_table.order([[ 0, \"asc\" ]]);\r\n            both_table.ajax.reload();\r\n        }\r\n    });\r\n\r\n    $('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\r\n\r\n        var currentTarget = $(e.target).attr(\"href\") // activated tab\r\n\r\n        var snapShot, startDate, endDate;\r\n        var snapShotPeriodField = $('#snapshot_period');\r\n        var startDateField = $('#start_date');\r\n        var endDateField = $('#end_date');\r\n\r\n        switch(currentTarget)\r\n        {\r\n            case '#handp_tab':\r\n\r\n                snapShot = $('#handp_tab_snap_shot').val();\r\n                startDate = $('#hand_tab_start_date').val();\r\n                endDate = $('#handp_tab_end_date').val();\r\n\r\n                break;\r\n\r\n            case '#internal_tab':\r\n\r\n                snapShot = $('#internal_tab_snap_shot').val();\r\n                startDate = $('#internal_tab_start_date').val();\r\n                endDate = $('#internal_tab_end_date').val();\r\n\r\n                break;\r\n\r\n            case '#internal_iframe_tab':\r\n\r\n                snapShot = $('#internal_iframe_tab_snap_shot').val();\r\n                startDate = $('#internal_iframe_tab_start_date').val();\r\n                endDate = $('#internal_iframe_tab_end_date').val();\r\n\r\n                break;\r\n        }\r\n\r\n        //update the form fields/variables\r\n        snapShotPeriodField.val(snapShot);\r\n        startDateField.val(startDate);\r\n        endDateField.val(endDate);\r\n\r\n        activeTab = currentTarget;\r\n    });\r\n\r\n    $('a[data-toggle=\"tab\"]').on('hide.bs.tab', function (e) {\r\n\r\n        var currentTarget = $(e.target).attr(\"href\"); //activated tab\r\n        console.log(currentTarget);\r\n\r\n        var snapShot, startDate, endDate;\r\n        var snapShotPeriodField = $('#snapshot_period');\r\n        var startDateField = $('#start_date');\r\n        var endDateField = $('#end_date');\r\n\r\n        snapShot = snapShotPeriodField.val();\r\n        startDate = startDateField.val();\r\n        endDate = endDateField.val();\r\n\r\n        switch(currentTarget)\r\n        {\r\n            case '#handp_tab':\r\n\r\n                $('#handp_tab_snap_shot').val(snapShot);\r\n                $('#hand_tab_start_date').val(startDate);\r\n                $('#handp_tab_end_date').val(endDate);\r\n\r\n                break;\r\n\r\n            case '#internal_tab':\r\n\r\n                $('#internal_tab_snap_shot').val(snapShot);\r\n                $('#internal_tab_start_date').val(startDate);\r\n                $('#internal_tab_end_date').val(endDate);\r\n\r\n                break;\r\n\r\n            case '#internal_iframe_tab':\r\n\r\n                $('#internal_iframe_tab_snap_shot').val(snapShot);\r\n                $('#internal_iframe_tab_start_date').val(startDate);\r\n                $('#internal_iframe_tab_end_date').val(endDate);\r\n\r\n                break;\r\n        }\r\n    });\r\n});"]}