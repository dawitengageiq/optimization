{"version":3,"sources":["websites.js"],"names":["$","document","ready","ajaxSetup","headers","X-CSRF-Token","attr","websiteID","on","e","preventDefault","form","this","the_data","serialize","url","confirmation","data","confirm","find","ajax","type","error","errors","responseJSON","process","undefined","advertiser_id","console","log","html","show","errorsHtml","each","key","value","addClass","append","removeAttr","success","removeClass","hide","id","affiliateWebsiteTable","DataTable","draw","modal","responsive","autoWidth","processing","serverSide","order","columns","orderable","dataSrc","json","drawCallback","settings","parent","css","setTimeout","pre_btn","submit_btn","val","this_btn"],"mappings":"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","file":"websites.min.js","sourcesContent":["$(document).ready(function() {\r\n\r\n    $.ajaxSetup({\r\n       headers: {\r\n           'X-CSRF-Token': $('meta[name=\"_token\"]').attr('content')\r\n       }\r\n    });\r\n\r\n    var websiteID = null;\r\n\r\n    $(document).on('submit','.this_form',function(e)\r\n   \t{\r\n\t\te.preventDefault();\r\n\t\tvar form = $(this);\r\n\t\tvar the_data = form.serialize();\r\n    \tvar url = form.attr('action');\r\n\r\n    \tvar confirmation = true;\r\n\r\n    \tif($(this).data('confirmation') != '')\r\n\t\t{\r\n\t\t\tconfirmation = confirm(form.data('confirmation'));\r\n\t\t}\r\n\r\n\t\tif(confirmation === true) \r\n\t\t{\r\n\t\t\tform.find('.this_modal_submit').attr('disabled','true');\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdata: the_data,\r\n\t\t\t\turl: url,\r\n\t\t\t\terror: function(data)\r\n\t\t\t\t{\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar errors = data.responseJSON;\r\n\r\n\t\t\t\t\tvar process = form.data('process');\r\n\r\n\t\t\t\t\tif(process=='add_contact' || process=='edit_contact')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//remove the duplicate error message during adding contact with unassigned affiliate or advertiser\r\n\t\t\t\t\t\t//errors.advertiser_id[0] = '';\r\n\t\t\t\t\t\tif(errors.advertiser_id!=undefined)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\terrors.advertiser_id[0] = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconsole.log(errors);\r\n\r\n\t\t\t\t\tform.find('.this_errors').html('');\r\n\t\t\t\t\tform.find('.this_error_wrapper').show();\r\n\t\t\t\t\tform.find('.this_errors').show();\r\n\r\n\t\t\t\t\t// $('.this_errors').html('');\r\n\t\t\t\t\t// $('.this_error_wrapper').show();\r\n\r\n\t\t\t\t\tvar errorsHtml = '<ul>';\r\n\t\t\t\t\t$.each( errors, function( key, value )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(value!='')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\terrorsHtml += '<li> <span class=\"glyphicon glyphicon-remove-sign\" aria-hidden=\"true\"></span> ' + value[0] + '</li>'; //showing only the first error.\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$('label[for=\"'+key+'\"]').addClass('error_label error');\r\n\t\t\t\t\t\t$('#'+key).addClass('error_field error');\r\n\t\t\t        });\r\n\r\n\t\t\t        errorsHtml += '</ul>';\r\n\r\n\t\t\t        console.log(errorsHtml);\r\n\r\n\t\t\t       \tform.find('.this_errors').append(errorsHtml);\r\n\t\t\t        form.find('.this_modal_submit').removeAttr('disabled');\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data)\r\n\t\t\t\t{\r\n\t\t\t\t\t//form.find('input[type=\"submit\"]').prop('disabled',true);\r\n\t\t\t\t\tform.find('.error').each(function(){\r\n\t\t\t\t\t\t$(this).removeClass('error');\r\n\t\t\t\t\t\t$(this).removeClass('error_field');\r\n\t\t\t\t\t\t$(this).removeClass('error_label');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$('.this_error_wrapper').hide();\r\n\t\t\t\t\t\r\n\t\t\t\t\twebsiteID = data.id;\r\n\t\t\t\t\tconsole.log('SUCCESS ' + websiteID);\r\n\t\t\t\t\tvar affiliateWebsiteTable = $('#websites-table').DataTable();\r\n\t\t\t\t\taffiliateWebsiteTable.draw();\r\n\r\n\t\t\t\t\t$('#websiteModal').modal('hide');\r\n\r\n\t\t\t\t\t$('.this_modal_submit').removeAttr('disabled');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n   \t});\r\n\r\n\tvar affiliateWebsiteTable = $('#websites-table').DataTable({\r\n\t    responsive: true,\r\n\t    autoWidth: false,\r\n\t    'processing': true,\r\n\t\t'serverSide': true,\r\n\t    \"order\": [[ 0, \"desc\" ]],\r\n\t    'columns': [\r\n\t\t\tnull,\r\n\t\t\tnull,\r\n\t\t\t{ 'orderable': false },\r\n\t\t\tnull,\r\n\t\t\tnull,\r\n\t\t\t{ 'orderable': false },\r\n\t\t],\r\n\t    'ajax':{\r\n\t\t\turl: $('#baseUrl').html() + '/affiliate/get_websites',\r\n\t\t\ttype: 'post', \r\n\t\t\terror: function(data) //error handling\r\n\t\t\t{\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t},\r\n\t\t\t\"dataSrc\": function ( json ) {\r\n\t    \t\treturn json.data;\r\n\t    \t}\r\n\t\t},\r\n\t\t\"drawCallback\": function( settings ) {\r\n\t\t\tconsole.log(websiteID);\r\n\t       if(websiteID != null) {\r\n\t       \t$('#afWeb-'+websiteID+'-name').parent().parent().css('background-color','rgba(0, 188, 212, 0.16)');\r\n\t       \tsetTimeout(function(){ \r\n\t       \t\t$('#afWeb-'+websiteID+'-name').parent().parent().css('background-color','');\r\n\t       \t\twebsiteID = null;\r\n\t       \t}, 2000);\r\n\r\n\t       }\r\n\t    }\r\n\t});\r\n\r\n\t$('#websiteModal').on('hide.bs.modal', function () {\r\n\t  var modal = $('#websiteModal'),\r\n\t\tform = modal.find('form'),\r\n\t\tpre_btn = $('#websiteModalPreSubmit'),\r\n\t\tsubmit_btn = $('#websiteModalSubmit');\r\n\r\n\t\t// websiteID = null;\r\n\r\n\t\t$('#this_id').val('');\r\n\t\t$('#website_id').val('');\r\n\t\t$('#name').val('');\r\n\t\t$('#description').val('');\r\n\t\t$('#status').val('');\r\n\r\n\t\tpre_btn.show();\r\n\t\tsubmit_btn.hide();\r\n\t\tform.find('.this_modal_close').html('Close');\r\n\t\t$('#websiteModalConfirm').hide();\r\n\t});\r\n});\r\n\r\n$(document).on('click','.editAffiliateWebsite', function() \r\n{\r\n\tvar id = $(this).data('id'),\r\n\t\tthis_button = $(this),\r\n\t\tmodal = $('#websiteModal'),\r\n\t\tform = modal.find('form');\r\n\r\n\t\t$('#this_id').val(id);\r\n\t\t$('#website_id').val(id);\r\n\t\t$('#name').val($('#afWeb-'+id+'-name').html());\r\n\t\t$('#description').val($('#afWeb-'+id+'-desc').html());\r\n\t\t$('#status').val($('#afWeb-'+id+'-status').html());\r\n\r\n\tmodal.modal('show');\r\n});\r\n\r\n$(document).on('click','#websiteModalPreSubmit', function() \r\n{\r\n\tvar modal = $('#websiteModal'),\r\n\t\tform = modal.find('form'),\r\n\t\tthis_btn = $(this),\r\n\t\tsubmit_btn = $('#websiteModalSubmit');\r\n\r\n\tthis_btn.hide();\r\n\tsubmit_btn.show();\r\n\tform.find('.this_modal_close').html('Cancel');\r\n\t$('#websiteModalConfirm').show();\r\n\t\r\n});\r\n"]}