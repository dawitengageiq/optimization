$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip(),$.ajaxSetup({headers:{"X-CSRF-Token":$('meta[name="_token"]').attr("content")}});var a=$("#baseUrl").html()+"/affiliate/campaignList",e=$("#eiq_iframe_id").val();$("#campaigns-table").DataTable({processing:!0,serverSide:!0,order:[],initComplete:function(){var a=this.api().column(2),e=a.footer().innerHTML,t=$('<select id="datatable_category"><option value="">'+e+"</option></select>").appendTo($(a.header()).empty()).on("change",function(){var e=$.fn.dataTable.util.escapeRegex($(this).val());a.search(e?"^"+e+"$":"",!0,!1).draw()});$.ajax({url:$("#baseUrl").html()+"/getCategories",method:"POST",success:function(a){$.each(a,function(a,e){t.append('<option value="'+e.id+'">'+e.name+"</option>")}),t.append('<option value="null">Undefined</option>')},error:function(a,e,t){console.log(e)}});var i=this.api().column(5),o=i.footer().innerHTML,n=$('<select id="datatable_status"><option value="">'+o+"</option></select>").appendTo($(i.header()).empty()).on("change",function(){var a=$.fn.dataTable.util.escapeRegex($(this).val());i.search(a?"^"+a+"$":"",!0,!1).draw()});$.ajax({url:$("#baseUrl").html()+"/affiliateRequestStatusList",method:"GET",success:function(a){for(var e=0;e<a.length;e++)n.append('<option value="'+a[e].value+'">'+a[e].option+"</option>")},error:function(a,e,t){console.log(e)}})},drawCallback:function(a){},ajax:{url:a,type:"POST",data:function(a){var e=$("#datatable_category").val(),t=$("#datatable_status").val();void 0===e&&(e=""),void 0===t&&(t=""),a.datatable_category=e,a.datatable_status=t},error:function(){}},columns:[{data:"image",orderable:!1},{data:"name",orderable:!0},{data:"category_name",orderable:!1},{data:"description",orderable:!1},{data:"payouts",orderable:!0},{data:"request_status",orderable:!1},{data:"action",orderable:!1}],lengthMenu:[[20,50,100,-1],[20,50,100,"ALL"]]});$(document).on("click",".displayMoreDetailsBtn",function(a){a.preventDefault();var e=$(this).data("id"),t=$(this).data("advertiser_name"),i=$("#cmp-"+e+"-name").html(),o=$("#cmp-"+e+"-img").attr("src"),n=$("#cmp-"+e+"-description").html();$("#campaign-name.campaign-desc").html(i),$("#advertiser-name.campaign-desc").html(t),$("#campaign-image.campaign-desc").attr("src",o),$("#campaign-full-description.campaign-desc").html(n),$("#campaignMoreDetailsModal").modal("show")}),$("#campaignMoreDetailsModal").on("hidden.bs.modal",function(a){$("#campaign-name.campaign-desc").html(""),$("#advertiser-name.campaign-desc").html(""),$("#campaign-image.campaign-desc").attr("src",""),$("#campaign-full-description.campaign-desc").html("")}),$(document).on("click",".applyToRunRequestBtn",function(a){var e=$(this),t=$(this).data("campaign_id"),i=$(this).data("affiliate_id"),o=$("#baseUrl").html()+"/receive_request_to_run_campaign";e.html('<i class="fa fa-spinner fa-spin" aria-hidden="true"></i>'),$.ajax({type:"POST",url:o,data:{campaign:t,affiliate:i},success:function(a){$("#applyToRunMessageModal").modal("show");var t=$("#campaigns-table").DataTable(),i='<span class="btn btn-default btn-warning">Pending</span>';t.cell(e.parent("td")).data(i).draw(),setTimeout(function(){$("#applyToRunMessageModal").modal("hide")},5e3)}})});var t=!1;lastCampaignOpened=0,oWebId="'website_id'   : ",oRedUrl="'redirect_url' : ",cWebId="'{website_id}'",cRedUrl="'{next_page}'",cSampleCode="",scriptEnd="&lt;/script&gt;",scriptEndPos=0,oAppendTo="options.appendTo = '",cAppendTo="{append_element}",oSkipTime="options.skipTimeout = ",cSkipTime="{skip_timeout}",osubmitTxt="options.submitBtntext = '",csubmitTxt="{submit_text}",oLoadTxt="options.loaderText = '",cLoadTxt="{load_text}";var i="",o="";String.prototype.replaceAll=function(a,e){var t=this;return t.replace(new RegExp(a,"g"),e)},$(document).on("click",".getACodeBtn",function(a){var o=$(this),n=$(this).data("campaign_id"),s=$(this).data("affiliate_id"),l=$("#baseUrl").html()+"/get_campaign_posting_instruction";return o.html('<i class="fa fa-spinner fa-spin" aria-hidden="true"></i>'),n==e&&$("#iframeCustomCodeBtn").show(),lastCampaignOpened==n&&t?(o.html("Get A Code"),void $("#campaignGetCodeModal").modal("show")):void $.ajax({type:"POST",url:l,data:{campaign:n,affiliate:s},success:function(a){var e=a.status,l=a.data;if(1==e)if(null!=l){var c=l.sample_code;c=c.replace("'{affiliate_id}'",s),$("#posting-tab").html(l.posting_instruction),$("#get-tab .code-sample-div pre code").html(c),$("#sampleCode4Custom").text(c),cSampleCode=c,i=c,$("pre code").each(function(a,e){hljs.highlightBlock(e)}),$("#campaignGetCodeModal").modal("show"),t=!0}else alert("Unfortunately, We have not created the posting instructions yet :(");else alert("You do not have the right to run this campign");o.html("Get A Code"),lastCampaignOpened=n}})}),$(document).on("click","#updateIframeCodeBtn",function(a){o=i,$(".customizeCode").each(function(a){var e=$(this).attr("id"),t=$(this).val();"website"==e?""!=t&&(o=o.replaceAll("'{website_id}'",t)):"redirect_url"==e?""!=t&&(o=o.replaceAll("{next_page}",t)):"append_to"==e?""!=t&&(og_app_val="options.appendTo = '"+t+"';  // Optional\n",scriptEndPos=o.search(scriptEnd),o=o.slice(0,scriptEndPos)+og_app_val+o.slice(scriptEndPos)):"timeout"==e?""!=t&&(og_timeout_val="options.skipTimeout = "+t+";  // Optional\n",scriptEndPos=o.search(scriptEnd),o=o.slice(0,scriptEndPos)+og_timeout_val+o.slice(scriptEndPos)):"submit_btn"==e?""!=t&&(og_submit_val="options.submitBtntext = '"+t+"';  // Optional\n",scriptEndPos=o.search(scriptEnd),o=o.slice(0,scriptEndPos)+og_submit_val+o.slice(scriptEndPos)):"loader_text"==e&&""!=t&&(og_load_val="options.loaderText = '"+t+"';  // Optional\n",scriptEndPos=o.search(scriptEnd),o=o.slice(0,scriptEndPos)+og_load_val+o.slice(scriptEndPos))}),console.log(o),$("#get-tab .code-sample-div pre code").html(o),$("pre code").each(function(a,e){hljs.highlightBlock(e)}),$("#customCodeCollapse").collapse("hide")}),$("#campaignGetCodeModal").on("hidden.bs.modal",function(a){$("#iframeCustomCodeBtn").hide(),$("#customCodeCollapse").collapse("hide")})});
//# sourceMappingURL=campaigns.min.js.map
