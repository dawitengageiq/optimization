{"version":3,"sources":["campaign.js"],"names":["w","container","params","affiliate_id","s1","s2","s3","s4","s5","email","first_name","last_name","dob_month","dob_day","dob_year","zip","gender","address","phone","redirect_url","campaign_id","creative_id","url","setParams","$data","key","setContainer","$container","setURL","$url","this_callback","campaign_handler","this","construct","prototype","init","$callback","$campaigns","script","document","createElement","src","getElementsByTagName","appendChild","get","str","iframe","id","width","height","style","querySelectorAll","counter","onload","iFrameResize","window","location","href","EIQHandler"],"mappings":"CAAA,SAAAA,GAEA,GAAAC,GAAA,OACAC,GACAC,aAAA,GACAC,GAAA,GACAC,GAAA,GACAC,GAAA,GACAC,GAAA,GACAC,GAAA,GACAC,MAAA,GACAC,WAAA,GACAC,UAAA,GACAC,UAAA,GACAC,QAAA,GACAC,SAAA,GACAC,IAAA,GACAC,OAAA,GACAC,QAAA,GACAC,MAAA,GACAC,aAAA,IAOAC,EAAA,GACAC,EAAA,GAEAC,EAAA,gCAEAH,EAAA,GAEAI,EAAA,SAAAC,GAEA,IAAA,GAAAC,KAAAD,GACAC,IAAAvB,KACAA,EAAAuB,GAAAD,EAAAC,IAGA,gBAAAA,IAAAN,EAAAK,EAAAC,IACA,eAAAA,IAAAL,EAAAI,EAAAC,IACA,eAAAA,IAAAJ,EAAAG,EAAAC,KAIAC,EAAA,SAAAC,GACA1B,EAAA,IAAA0B,GAAA,mBAAAA,GAAA1B,EAAA0B,GAGAC,EAAA,SAAAC,GACAP,EAAA,IAAAO,GAAA,mBAAAA,GAAAP,EAAAO,GAOAC,EAAA,aAMAC,EAAA,WAEAC,KAAAC,YAMAF,GAAAG,WACAD,UAAA,aAEAE,KAAA,SAAAX,EAAAG,EAAAS,EAAAC,EAAAR,GACAN,EAAAC,GACAE,EAAAC,GAEAC,EAAAC,GAEAC,EAAAM,CAGA,IAAAE,GAAAC,SAAAC,cAAA,SAMA,OALAF,GAAAG,IAAAnB,EAAA,0CACAiB,SAAAG,qBAAA,QAAA,GAAAC,YAAAL,GAIAN,MAEAY,IAAA,WAEA,GAAAC,GAAA,EAQAA,IAAA,gBAAAzB,EAAA,cAAAA,EAAA,KAAAC,CAEA,KAAA,GAAAI,KAAAvB,GACA,IAAA2C,IACAA,GAAA,KAEA,aAAApB,IACAoB,GAAApB,EAAA,IAAAvB,EAAAuB,GAIA,IAAAqB,GAAAP,SAAAC,cAAA,SACAM,GAAAC,GAAA,YACAD,EAAAL,IAAAnB,EAAA,KAAAuB,EACAC,EAAAE,MAAA,OACAF,EAAAG,OAAA,OACAH,EAAAI,MAAA,eAEAX,SAAAY,iBAAAlD,GAAA,GAAA0C,YAAAG,EACA,IAAAM,GAAA,CACAN,GAAAO,OAAA,WAUA,GAAAD,GACAE,eAEAF,EAAA,IACA,IAAAjC,EACAoC,OAAAC,SAAAC,KAAAtC,EAEAW,KAGAsB,OAaApD,EAAA0D,WAAA,GAAA3B,IACAC","file":"campaign.min.js","sourcesContent":["! (function(w)\r\n{\r\n    var container = 'body';\r\n    var params = {\r\n        'affiliate_id': '',\r\n        's1' : '',\r\n        's2' : '',\r\n        's3' : '',\r\n        's4' : '',\r\n        's5' : '',\r\n        'email' : '',\r\n        'first_name' : '',\r\n        'last_name' : '',\r\n        'dob_month' : '',\r\n        'dob_day' : '',\r\n        'dob_year' : '',\r\n        'zip' : '',\r\n        'gender' : '',\r\n        'address' : '',\r\n        'phone' : '',\r\n        'redirect_url' : '',\r\n    };\r\n\r\n    var campaigns = [];\r\n\r\n    var creatives = [];\r\n\r\n    var campaign_id = '';\r\n    var creative_id = '';\r\n\r\n    var url = '//path17.epicdemand.com/embed';\r\n\r\n    var redirect_url = '';\r\n\r\n    var setParams = function($data){\r\n        // params  = $data;\r\n        for (var key in $data) {\r\n            if(key in params) {\r\n                params[key] = $data[key]\r\n            }\r\n\r\n            if(key == 'redirect_url') redirect_url = $data[key];\r\n            if(key == 'campaign_id') campaign_id = $data[key];\r\n            if(key == 'creative_id') creative_id = $data[key];\r\n        }\r\n    };\r\n\r\n    var setContainer = function($container){\r\n        container  = $container == '' || typeof $container == 'undefined' ? container : $container;\r\n    };\r\n\r\n    var setURL = function($url){\r\n        url  = $url == '' || typeof $url == 'undefined' ? url : $url;\r\n    };\r\n\r\n    var setCampaigns = function($campaigns){\r\n        campaigns  = $campaigns == '' || typeof $campaigns == 'undefined' ? campaigns : $campaigns;\r\n    };\r\n\r\n    var this_callback = function() {\r\n    };\r\n\r\n    /**\r\n    * Will be extended as prototype\r\n    */\r\n    var campaign_handler = function ()\r\n    {\r\n        this.construct();\r\n    }\r\n    \r\n    /**\r\n    * Extend, public methods\r\n    */\r\n    campaign_handler.prototype = {\r\n        construct: function(){\r\n        },\r\n        init: function($data, $container, $callback, $campaigns, $url){\r\n            setParams($data);\r\n            setContainer($container);\r\n            // setCampaigns($campaigns);\r\n            setURL($url)\r\n\r\n            this_callback = $callback;\r\n\r\n            //Insert SCRIPT\r\n            var script = document.createElement( \"script\" );\r\n            script.src = url + '/iframe-resizer/js/iframeResizer.min.js';\r\n            document.getElementsByTagName( \"head\" )[0].appendChild( script );\r\n\r\n            // <script src=\"iframe-resizer/js/iframeResizer.min.js\"></script>\r\n            // <script>iFrameResize({ log: true, enablePublicMethods     : true, }, '#myIframe')</script> \r\n            return this;\r\n        },\r\n        get: function() {\r\n\r\n            var str = \"\";\r\n            // for (var key in campaigns) {\r\n            //     if (str != \"\") {\r\n            //         str += \"&\";\r\n            //     }\r\n            //     str += \"campaigns[]=\" + campaigns[key];\r\n            // }\r\n\r\n            str += '&campaigns[]=' + campaign_id + '&creatives[' + campaign_id + ']=' + creative_id\r\n\r\n            for (var key in params) {\r\n                if (str != \"\") {\r\n                    str += \"&\";\r\n                }\r\n                if(key != 'container') {\r\n                    str += key + \"=\" + params[key];\r\n                }\r\n            }\r\n\r\n            var iframe = document.createElement('iframe');\r\n            iframe.id = 'eiqIframe'\r\n            iframe.src = url + '/?' + str;\r\n            iframe.width = '100%';\r\n            iframe.height = '100%';\r\n            iframe.style = 'border: 0px;';\r\n            //document.body.appendChild(iframe);\r\n            document.querySelectorAll(container)[0].appendChild(iframe);\r\n            var counter = 0;\r\n            iframe.onload = function(){\r\n                // console.log(document.getElementById(\"eiqIframe\").contentWindow.location.href);\r\n                // iframe_link = document.getElementById(\"eiqIframe\").contentWindow.location.href;\r\n                // if(iframe_link.includes('done.php')) {\r\n                //     if(redirect_url != '') {\r\n                //         window.location.href= redirect_url; \r\n                //     }else {\r\n                //         this_callback();\r\n                //     }\r\n                // }\r\n                if(counter == 0) {\r\n                    iFrameResize();\r\n                }\r\n                if(counter > 0) {\r\n                    if(redirect_url != '') {\r\n                        window.location.href= redirect_url; \r\n                    }else {\r\n                        this_callback();\r\n                    }\r\n                }\r\n                counter++; \r\n            }\r\n\r\n            // var inter = window.setInterval(function() {\r\n            //     if (iframe.contentWindow.document.readyState === \"complete\") {\r\n            //       window.clearInterval(inter);\r\n            //     }\r\n            // }, 100);\r\n\r\n            // iFrameResize({ log: false}, '#eiqIframe')\r\n        }\r\n    }\r\n\r\n    w.EIQHandler = new campaign_handler();\r\n})(this);\r\n"]}